!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(this,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=356)}([function(e,t,r){var n=r(40),o=r(21),s=r(308),i=r(27),a=r(26),c=r(16),u=Object.prototype.hasOwnProperty,l=s((function(e,t){if(a(t)||i(t))o(t,c(t),e);else for(var r in t)u.call(t,r)&&n(e,r,t[r])}));e.exports=l},function(e,t,r){"use strict";const n=r(22),o={count(e){const t=this.buildUrl("count",e);return this.shopify.request(t,"GET","count")},create(e){const t=this.buildUrl();return this.shopify.request(t,"POST",this.key,e)},delete(e){const t=this.buildUrl(e);return this.shopify.request(t,"DELETE")},get(e,t){const r=this.buildUrl(e,t);return this.shopify.request(r,"GET",this.key)},list(e){const t=this.buildUrl(void 0,e);return this.shopify.request(t,"GET",this.name)},update(e,t){const r=this.buildUrl(e);return this.shopify.request(r,"PUT",this.key,t)},buildUrl(e,t){e||0===e||(e="");let r="/admin";this.shopify.options.apiVersion&&(r+="/api/"+this.shopify.options.apiVersion),r+=`/${this.name}/${e}`,r=r.replace(/\/+/g,"/").replace(/\/$/,"")+".json";const o={pathname:r,...this.shopify.baseUrl};return t&&(o.search="?"+n.stringify(t,{arrayFormat:"brackets"})),o}};e.exports=o},function(e,t,r){var n=r(89),o=r(323),s=r(343),i=r(19),a=r(21),c=r(347),u=r(110),l=r(114),p=u((function(e,t){var r={};if(null==e)return r;var u=!1;t=n(t,(function(t){return t=i(t,e),u||(u=t.length>1),t})),a(e,l(e),r),u&&(r=o(r,7,c));for(var p=t.length;p--;)s(r,t[p]);return r}));e.exports=p},function(e,t,r){e.exports=r(189)},function(e,t,r){var n=r(315),o=r(110)((function(e,t){return null==e?{}:n(e,t)}));e.exports=o},function(e,t,r){"use strict";const n=r(22),o={count(e,t){const r=this.buildUrl(e,"count",t);return this.shopify.request(r,"GET","count")},create(e,t){const r=this.buildUrl(e);return this.shopify.request(r,"POST",this.key,t)},delete(e,t,r){const n=this.buildUrl(e,t,r);return this.shopify.request(n,"DELETE")},get(e,t,r){const n=this.buildUrl(e,t,r);return this.shopify.request(n,"GET",this.key)},list(e,t){const r=this.buildUrl(e,void 0,t);return this.shopify.request(r,"GET",this.name)},update(e,t,r){const n=this.buildUrl(e,t);return this.shopify.request(n,"PUT",this.key,r)},buildUrl(e,t,r){t||0===t||(t="");let o="/admin";this.shopify.options.apiVersion&&(o+="/api/"+this.shopify.options.apiVersion),o+=`/${this.parentName}/${e}/${this.name}/${t}`,o=o.replace(/\/+/g,"/").replace(/\/$/,"")+".json";const s={pathname:o,...this.shopify.baseUrl};return r&&(s.search="?"+n.stringify(r,{arrayFormat:"brackets"})),s}};e.exports=o},function(e,t){function r(e,t,r,n,o,s,i){try{var a=e[s](i),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,o)}e.exports=function(e){return function(){var t=this,n=arguments;return new Promise((function(o,s){var i=e.apply(t,n);function a(e){r(i,o,s,a,c,"next",e)}function c(e){r(i,o,s,a,c,"throw",e)}a(void 0)}))}}},function(e,t){var r=Array.isArray;e.exports=r},function(e,t,r){var n=r(78),o="object"==typeof self&&self&&self.Object===Object&&self,s=n||o||Function("return this")();e.exports=s},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];const o=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement",...n];const s=["null","undefined","string","number","bigint","boolean","symbol"];function i(e){return t=>typeof t===e}const{toString:a}=Object.prototype,c=e=>{const t=a.call(e).slice(8,-1);return/HTML\w+Element/.test(t)&&l.domElement(e)?"HTMLElement":(r=t,o.includes(r)?t:void 0);var r},u=e=>t=>c(t)===e;function l(e){if(null===e)return"null";switch(typeof e){case"undefined":return"undefined";case"string":return"string";case"number":return"number";case"boolean":return"boolean";case"function":return"Function";case"bigint":return"bigint";case"symbol":return"symbol"}if(l.observable(e))return"Observable";if(l.array(e))return"Array";if(l.buffer(e))return"Buffer";const t=c(e);if(t)return t;if(e instanceof String||e instanceof Boolean||e instanceof Number)throw new TypeError("Please don't use object wrappers for primitive types");return"Object"}l.undefined=i("undefined"),l.string=i("string");const p=i("number");l.number=e=>p(e)&&!l.nan(e),l.bigint=i("bigint"),l.function_=i("function"),l.null_=e=>null===e,l.class_=e=>l.function_(e)&&e.toString().startsWith("class "),l.boolean=e=>!0===e||!1===e,l.symbol=i("symbol"),l.numericString=e=>l.string(e)&&!l.emptyStringOrWhitespace(e)&&!Number.isNaN(Number(e)),l.array=(e,t)=>!!Array.isArray(e)&&(!l.function_(t)||e.every(t)),l.buffer=e=>{var t,r,n,o;return null!==(o=null===(n=null===(r=null===(t=e)||void 0===t?void 0:t.constructor)||void 0===r?void 0:r.isBuffer)||void 0===n?void 0:n.call(r,e))&&void 0!==o&&o},l.nullOrUndefined=e=>l.null_(e)||l.undefined(e),l.object=e=>!l.null_(e)&&("object"==typeof e||l.function_(e)),l.iterable=e=>{var t;return l.function_(null===(t=e)||void 0===t?void 0:t[Symbol.iterator])},l.asyncIterable=e=>{var t;return l.function_(null===(t=e)||void 0===t?void 0:t[Symbol.asyncIterator])},l.generator=e=>l.iterable(e)&&l.function_(e.next)&&l.function_(e.throw),l.asyncGenerator=e=>l.asyncIterable(e)&&l.function_(e.next)&&l.function_(e.throw),l.nativePromise=e=>u("Promise")(e);l.promise=e=>l.nativePromise(e)||(e=>{var t,r;return l.function_(null===(t=e)||void 0===t?void 0:t.then)&&l.function_(null===(r=e)||void 0===r?void 0:r.catch)})(e),l.generatorFunction=u("GeneratorFunction"),l.asyncGeneratorFunction=e=>"AsyncGeneratorFunction"===c(e),l.asyncFunction=e=>"AsyncFunction"===c(e),l.boundFunction=e=>l.function_(e)&&!e.hasOwnProperty("prototype"),l.regExp=u("RegExp"),l.date=u("Date"),l.error=u("Error"),l.map=e=>u("Map")(e),l.set=e=>u("Set")(e),l.weakMap=e=>u("WeakMap")(e),l.weakSet=e=>u("WeakSet")(e),l.int8Array=u("Int8Array"),l.uint8Array=u("Uint8Array"),l.uint8ClampedArray=u("Uint8ClampedArray"),l.int16Array=u("Int16Array"),l.uint16Array=u("Uint16Array"),l.int32Array=u("Int32Array"),l.uint32Array=u("Uint32Array"),l.float32Array=u("Float32Array"),l.float64Array=u("Float64Array"),l.bigInt64Array=u("BigInt64Array"),l.bigUint64Array=u("BigUint64Array"),l.arrayBuffer=u("ArrayBuffer"),l.sharedArrayBuffer=u("SharedArrayBuffer"),l.dataView=u("DataView"),l.directInstanceOf=(e,t)=>Object.getPrototypeOf(e)===t.prototype,l.urlInstance=e=>u("URL")(e),l.urlString=e=>{if(!l.string(e))return!1;try{return new URL(e),!0}catch(e){return!1}},l.truthy=e=>Boolean(e),l.falsy=e=>!e,l.nan=e=>Number.isNaN(e),l.primitive=e=>{return l.null_(e)||(t=typeof e,s.includes(t));var t},l.integer=e=>Number.isInteger(e),l.safeInteger=e=>Number.isSafeInteger(e),l.plainObject=e=>{if("[object Object]"!==a.call(e))return!1;const t=Object.getPrototypeOf(e);return null===t||t===Object.getPrototypeOf({})},l.typedArray=e=>{return t=c(e),n.includes(t);var t};l.arrayLike=e=>!l.nullOrUndefined(e)&&!l.function_(e)&&(e=>l.safeInteger(e)&&e>=0)(e.length),l.inRange=(e,t)=>{if(l.number(t))return e>=Math.min(0,t)&&e<=Math.max(t,0);if(l.array(t)&&2===t.length)return e>=Math.min(...t)&&e<=Math.max(...t);throw new TypeError("Invalid range: "+JSON.stringify(t))};const h=["innerHTML","ownerDocument","style","attributes","nodeValue"];l.domElement=e=>l.object(e)&&1===e.nodeType&&l.string(e.nodeName)&&!l.plainObject(e)&&h.every(t=>t in e),l.observable=e=>{var t,r,n,o;return!!e&&(e===(null===(r=(t=e)[Symbol.observable])||void 0===r?void 0:r.call(t))||e===(null===(o=(n=e)["@@observable"])||void 0===o?void 0:o.call(n)))},l.nodeStream=e=>l.object(e)&&l.function_(e.pipe)&&!l.observable(e),l.infinite=e=>e===1/0||e===-1/0;const d=e=>t=>l.integer(t)&&Math.abs(t%2)===e;l.evenInteger=d(0),l.oddInteger=d(1),l.emptyArray=e=>l.array(e)&&0===e.length,l.nonEmptyArray=e=>l.array(e)&&e.length>0,l.emptyString=e=>l.string(e)&&0===e.length,l.nonEmptyString=e=>l.string(e)&&e.length>0;l.emptyStringOrWhitespace=e=>l.emptyString(e)||(e=>l.string(e)&&!/\S/.test(e))(e),l.emptyObject=e=>l.object(e)&&!l.map(e)&&!l.set(e)&&0===Object.keys(e).length,l.nonEmptyObject=e=>l.object(e)&&!l.map(e)&&!l.set(e)&&Object.keys(e).length>0,l.emptySet=e=>l.set(e)&&0===e.size,l.nonEmptySet=e=>l.set(e)&&e.size>0,l.emptyMap=e=>l.map(e)&&0===e.size,l.nonEmptyMap=e=>l.map(e)&&e.size>0;const f=(e,t,r)=>{if(!l.function_(t))throw new TypeError("Invalid predicate: "+JSON.stringify(t));if(0===r.length)throw new TypeError("Invalid number of values");return e.call(r,t)};l.any=(e,...t)=>(l.array(e)?e:[e]).some(e=>f(Array.prototype.some,e,t)),l.all=(e,...t)=>f(Array.prototype.every,e,t);const m=(e,t,r)=>{if(!e)throw new TypeError(`Expected value which is \`${t}\`, received value of type \`${l(r)}\`.`)};t.assert={undefined:e=>m(l.undefined(e),"undefined",e),string:e=>m(l.string(e),"string",e),number:e=>m(l.number(e),"number",e),bigint:e=>m(l.bigint(e),"bigint",e),function_:e=>m(l.function_(e),"Function",e),null_:e=>m(l.null_(e),"null",e),class_:e=>m(l.class_(e),"Class",e),boolean:e=>m(l.boolean(e),"boolean",e),symbol:e=>m(l.symbol(e),"symbol",e),numericString:e=>m(l.numericString(e),"string with a number",e),array:(e,t)=>{m(l.array(e),"Array",e),t&&e.forEach(t)},buffer:e=>m(l.buffer(e),"Buffer",e),nullOrUndefined:e=>m(l.nullOrUndefined(e),"null or undefined",e),object:e=>m(l.object(e),"Object",e),iterable:e=>m(l.iterable(e),"Iterable",e),asyncIterable:e=>m(l.asyncIterable(e),"AsyncIterable",e),generator:e=>m(l.generator(e),"Generator",e),asyncGenerator:e=>m(l.asyncGenerator(e),"AsyncGenerator",e),nativePromise:e=>m(l.nativePromise(e),"native Promise",e),promise:e=>m(l.promise(e),"Promise",e),generatorFunction:e=>m(l.generatorFunction(e),"GeneratorFunction",e),asyncGeneratorFunction:e=>m(l.asyncGeneratorFunction(e),"AsyncGeneratorFunction",e),asyncFunction:e=>m(l.asyncFunction(e),"AsyncFunction",e),boundFunction:e=>m(l.boundFunction(e),"Function",e),regExp:e=>m(l.regExp(e),"RegExp",e),date:e=>m(l.date(e),"Date",e),error:e=>m(l.error(e),"Error",e),map:e=>m(l.map(e),"Map",e),set:e=>m(l.set(e),"Set",e),weakMap:e=>m(l.weakMap(e),"WeakMap",e),weakSet:e=>m(l.weakSet(e),"WeakSet",e),int8Array:e=>m(l.int8Array(e),"Int8Array",e),uint8Array:e=>m(l.uint8Array(e),"Uint8Array",e),uint8ClampedArray:e=>m(l.uint8ClampedArray(e),"Uint8ClampedArray",e),int16Array:e=>m(l.int16Array(e),"Int16Array",e),uint16Array:e=>m(l.uint16Array(e),"Uint16Array",e),int32Array:e=>m(l.int32Array(e),"Int32Array",e),uint32Array:e=>m(l.uint32Array(e),"Uint32Array",e),float32Array:e=>m(l.float32Array(e),"Float32Array",e),float64Array:e=>m(l.float64Array(e),"Float64Array",e),bigInt64Array:e=>m(l.bigInt64Array(e),"BigInt64Array",e),bigUint64Array:e=>m(l.bigUint64Array(e),"BigUint64Array",e),arrayBuffer:e=>m(l.arrayBuffer(e),"ArrayBuffer",e),sharedArrayBuffer:e=>m(l.sharedArrayBuffer(e),"SharedArrayBuffer",e),dataView:e=>m(l.dataView(e),"DataView",e),urlInstance:e=>m(l.urlInstance(e),"URL",e),urlString:e=>m(l.urlString(e),"string with a URL",e),truthy:e=>m(l.truthy(e),"truthy",e),falsy:e=>m(l.falsy(e),"falsy",e),nan:e=>m(l.nan(e),"NaN",e),primitive:e=>m(l.primitive(e),"primitive",e),integer:e=>m(l.integer(e),"integer",e),safeInteger:e=>m(l.safeInteger(e),"integer",e),plainObject:e=>m(l.plainObject(e),"plain object",e),typedArray:e=>m(l.typedArray(e),"TypedArray",e),arrayLike:e=>m(l.arrayLike(e),"array-like",e),domElement:e=>m(l.domElement(e),"HTMLElement",e),observable:e=>m(l.observable(e),"Observable",e),nodeStream:e=>m(l.nodeStream(e),"Node.js Stream",e),infinite:e=>m(l.infinite(e),"infinite number",e),emptyArray:e=>m(l.emptyArray(e),"empty array",e),nonEmptyArray:e=>m(l.nonEmptyArray(e),"non-empty array",e),emptyString:e=>m(l.emptyString(e),"empty string",e),nonEmptyString:e=>m(l.nonEmptyString(e),"non-empty string",e),emptyStringOrWhitespace:e=>m(l.emptyStringOrWhitespace(e),"empty string or whitespace",e),emptyObject:e=>m(l.emptyObject(e),"empty object",e),nonEmptyObject:e=>m(l.nonEmptyObject(e),"non-empty object",e),emptySet:e=>m(l.emptySet(e),"empty set",e),nonEmptySet:e=>m(l.nonEmptySet(e),"non-empty set",e),emptyMap:e=>m(l.emptyMap(e),"empty map",e),nonEmptyMap:e=>m(l.nonEmptyMap(e),"non-empty map",e),evenInteger:e=>m(l.evenInteger(e),"even integer",e),oddInteger:e=>m(l.oddInteger(e),"odd integer",e),directInstanceOf:(e,t)=>m(l.directInstanceOf(e,t),"T",e),inRange:(e,t)=>m(l.inRange(e,t),"in range",e),any:(e,...t)=>m(l.any(e,...t),"predicate returns truthy for any value",t),all:(e,...t)=>m(l.all(e,...t),"predicate returns truthy for all values",t)},Object.defineProperties(l,{class:{value:l.class_},function:{value:l.function_},null:{value:l.null_}}),Object.defineProperties(t.assert,{class:{value:t.assert.class_},function:{value:t.assert.function_},null:{value:t.assert.null_}}),t.default=l,e.exports=l,e.exports.default=l,e.exports.assert=t.assert},function(e,t,r){var n=r(215),o=r(218);e.exports=function(e,t){var r=o(e,t);return n(r)?r:void 0}},function(e,t){e.exports=require("events")},function(e,t){e.exports=require("url")},function(e,t){e.exports=require("stream")},function(e,t,r){var n=r(77),o=r(200),s=r(27);e.exports=function(e){return s(e)?n(e):o(e)}},function(e,t,r){var n=r(18),o=r(196),s=r(197),i=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?o(e):s(e)}},function(e,t,r){var n=r(8).Symbol;e.exports=n},function(e,t,r){var n=r(7),o=r(57),s=r(249),i=r(252);e.exports=function(e,t){return n(e)?e:o(e,t)?[e]:s(i(e))}},function(e,t,r){var n=r(58);e.exports=function(e){if("string"==typeof e||n(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},function(e,t,r){var n=r(40),o=r(106);e.exports=function(e,t,r,s){var i=!r;r||(r={});for(var a=-1,c=t.length;++a<c;){var u=t[a],l=s?s(r[u],e[u],u,r,e):void 0;void 0===l&&(l=e[u]),i?o(r,u,l):n(r,u,l)}return r}},function(e,t,r){"use strict";var n=r(321),o=r(322),s=r(111);e.exports={formats:s,parse:o,stringify:n}},function(e,t,r){"use strict";const n=r(190),o=r(13),s=r(259),i=r(260),a=r(14),c=r(306),u=r(39);function l(e){if(!(this instanceof l))return new l(e);if(!e||!e.shopName||!e.accessToken&&(!e.apiKey||!e.password)||e.accessToken&&(e.apiKey||e.password))throw new Error("Missing or invalid options");if(o.call(this),this.options={timeout:6e4,...e},this.callLimits={remaining:void 0,current:void 0,max:void 0},this.callGraphqlLimits={restoreRate:void 0,remaining:void 0,current:void 0,max:void 0},this.baseUrl={hostname:e.shopName.endsWith(".myshopify.com")?e.shopName:e.shopName+".myshopify.com",protocol:"https:"},this.baseHeaders={"User-Agent":`${c.name}/${c.version}`},e.accessToken?this.baseHeaders["X-Shopify-Access-Token"]=e.accessToken:this.baseHeaders.Authorization="Basic "+Buffer.from(`${e.apiKey}:${e.password}`).toString("base64"),e.autoLimit){const t=n(e.autoLimit,(e,t,r)=>{"calls"===r&&(r="limit"),e[r]=t},{bucketSize:35});this.request=s(this.request,t)}}function p(e,t){const r=t.trim().split(";"),n=a.parse(r[0].trim().slice(1,-1),!0);return'"next"'===r[1].trim().slice(4)?e.next=n:e.previous=n,e}Object.setPrototypeOf(l.prototype,o.prototype),l.prototype.updateLimits=function(e){if(!e)return;const t=e.split("/").map(Number),r=this.callLimits;r.remaining=t[1]-t[0],r.current=t[0],r.max=t[1],this.emit("callLimits",r)},l.prototype.request=function(e,t,r,n,o){const s={headers:{...o,...this.baseHeaders},timeout:this.options.timeout,responseType:"json",retry:0,method:t};return n&&(s.json=r?{[r]:n}:n),i(e,s).then(e=>{const t=e.body;if(this.updateLimits(e.headers["x-shopify-shop-api-call-limit"]),202===e.statusCode){const t=1e3*e.headers["retry-after"]||0,{pathname:o,search:s}=a.parse(e.headers.location);return(n=t,new Promise(e=>setTimeout(e,n))).then(()=>{const e={pathname:o,...this.baseUrl};return s&&(e.search=s),this.request(e,"GET",r)})}var n;const o=r?t[r]:t||{};if(e.headers.link){const t=e.headers.link.split(",").reduce(p,{});t.next&&Object.defineProperties(o,{nextPageParameters:{value:t.next.query}}),t.previous&&Object.defineProperties(o,{previousPageParameters:{value:t.previous.query}})}return o},e=>(this.updateLimits(e.response&&e.response.headers["x-shopify-shop-api-call-limit"]),Promise.reject(e)))},l.prototype.updateGraphqlLimits=function(e){if(!e)return;const t=this.callGraphqlLimits;t.current=e.maximumAvailable-e.currentlyAvailable,t.remaining=e.currentlyAvailable,t.restoreRate=e.restoreRate,t.max=e.maximumAvailable,this.emit("callGraphqlLimits",t)},l.prototype.graphql=function(e,t){let r="/admin/api";this.options.apiVersion&&(r+="/"+this.options.apiVersion),r+="/graphql.json";const n={pathname:r,...this.baseUrl},o=null!=t,s={headers:{...this.baseHeaders,"Content-Type":o?"application/json":"application/graphql"},timeout:this.options.timeout,responseType:"json",retry:0,method:"POST",body:o?JSON.stringify({query:e,variables:t}):e};return i(n,s).then(e=>{if(e.body.extensions&&e.body.extensions.cost&&this.updateGraphqlLimits(e.body.extensions.cost.throttleStatus),e.body.errors){const t=e.body.errors[0],r=new Error(t.message);throw r.locations=t.locations,r.path=t.path,r.extensions=t.extensions,r.response=e,r}return e.body.data||{}})},u.registerAll(l),e.exports=l},function(e,t,r){(function(e){var n=r(8),o=r(198),s=t&&!t.nodeType&&t,i=s&&"object"==typeof e&&e&&!e.nodeType&&e,a=i&&i.exports===s?n.Buffer:void 0,c=(a?a.isBuffer:void 0)||o;e.exports=c}).call(this,r(46)(e))},function(e,t){var r=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&r.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t){var r=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}},function(e,t,r){var n=r(51),o=r(48);e.exports=function(e){return null!=e&&o(e.length)&&!n(e)}},function(e,t,r){var n=r(205),o=r(206),s=r(207),i=r(208),a=r(209);function c(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=o,c.prototype.get=s,c.prototype.has=i,c.prototype.set=a,e.exports=c},function(e,t,r){var n=r(30);e.exports=function(e,t){for(var r=e.length;r--;)if(n(e[r][0],t))return r;return-1}},function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,r){var n=r(12)(Object,"create");e.exports=n},function(e,t,r){var n=r(227);e.exports=function(e,t){var r=e.__data__;return n(t)?r["string"==typeof t?"string":"hash"]:r.map}},function(e,t,r){var n=r(242),o=r(53),s=r(243),i=r(244),a=r(245),c=r(17),u=r(80),l=u(n),p=u(o),h=u(s),d=u(i),f=u(a),m=c;(n&&"[object DataView]"!=m(new n(new ArrayBuffer(1)))||o&&"[object Map]"!=m(new o)||s&&"[object Promise]"!=m(s.resolve())||i&&"[object Set]"!=m(new i)||a&&"[object WeakMap]"!=m(new a))&&(m=function(e){var t=c(e),r="[object Object]"==t?e.constructor:void 0,n=r?u(r):"";if(n)switch(n){case l:return"[object DataView]";case p:return"[object Map]";case h:return"[object Promise]";case d:return"[object Set]";case f:return"[object WeakMap]"}return t}),e.exports=m},function(e,t,r){var n=r(19),o=r(20);e.exports=function(e,t){for(var r=0,s=(t=n(t,e)).length;null!=e&&r<s;)e=e[o(t[r++])];return r&&r==s?e:void 0}},function(e,t,r){var n=r(79)(Object.getPrototypeOf,Object);e.exports=n},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.CancelError=t.ParseError=void 0;const s=r(37);class i extends s.RequestError{constructor(e,t){const{options:r}=t.request;super(`${e.message} in "${r.url.toString()}"`,e,t.request),this.name="ParseError"}}t.ParseError=i;class a extends s.RequestError{constructor(e){super("Promise was canceled",{},e),this.name="CancelError"}get isCanceled(){return!0}}t.CancelError=a,o(r(37),t)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnsupportedProtocolError=t.ReadError=t.TimeoutError=t.UploadError=t.CacheError=t.HTTPError=t.MaxRedirectsError=t.RequestError=t.setNonEnumerableProperties=t.knownHookEvents=t.withoutBody=t.kIsNormalizedAlready=void 0;const n=r(38),o=r(15),s=r(60),i=r(14),a=r(61),c=r(61),u=r(62),l=r(262),p=r(264),h=r(267),d=r(282),f=r(285),m=r(64),y=r(11),g=r(292),v=r(100),b=r(101),_=r(293),w=r(295),x=r(296),k=r(297),S=r(102),j=r(298),P=r(103),T=r(299),E=r(300),O=r(301),A=new p.default,C=Symbol("request"),I=Symbol("response"),U=Symbol("responseSize"),q=Symbol("downloadedSize"),R=Symbol("bodySize"),H=Symbol("uploadedSize"),L=Symbol("serverResponsesPiped"),N=Symbol("unproxyEvents"),M=Symbol("isFromCache"),D=Symbol("cancelTimeouts"),z=Symbol("startedReading"),B=Symbol("stopReading"),F=Symbol("triggerRead"),$=Symbol("body"),G=Symbol("jobs"),V=Symbol("originalResponse"),W=Symbol("retryTimeout");t.kIsNormalizedAlready=Symbol("isNormalizedAlready");const K=y.default.string(process.versions.brotli);t.withoutBody=new Set(["GET","HEAD"]),t.knownHookEvents=["init","beforeRequest","beforeRedirect","beforeError","beforeRetry","afterResponse"];const J=new k.default,Q=new Set([300,301,302,303,304,307,308]),X=["context","body","json","form"];t.setNonEnumerableProperties=(e,t)=>{const r={};for(const t of e)if(t)for(const e of X)e in t&&(r[e]={writable:!0,configurable:!0,enumerable:!1,value:t[e]});Object.defineProperties(t,r)};class Y extends Error{constructor(e,t,r){var n;if(super(e),Error.captureStackTrace(this,this.constructor),this.name="RequestError",this.code=t.code,r instanceof ae?(Object.defineProperty(this,"request",{enumerable:!1,value:r}),Object.defineProperty(this,"response",{enumerable:!1,value:r[I]}),Object.defineProperty(this,"options",{enumerable:!1,value:r.options})):Object.defineProperty(this,"options",{enumerable:!1,value:r}),this.timings=null===(n=this.request)||void 0===n?void 0:n.timings,y.default.string(t.stack)&&y.default.string(this.stack)){const e=this.stack.indexOf(this.message)+this.message.length,r=this.stack.slice(e).split("\n").reverse(),n=t.stack.slice(t.stack.indexOf(t.message)+t.message.length).split("\n").reverse();for(;0!==n.length&&n[0]===r[0];)r.shift();this.stack=`${this.stack.slice(0,e)}${r.reverse().join("\n")}${n.reverse().join("\n")}`}}}t.RequestError=Y;class Z extends Y{constructor(e){super(`Redirected ${e.options.maxRedirects} times. Aborting.`,{},e),this.name="MaxRedirectsError"}}t.MaxRedirectsError=Z;class ee extends Y{constructor(e){super(`Response code ${e.statusCode} (${e.statusMessage})`,{},e.request),this.name="HTTPError"}}t.HTTPError=ee;class te extends Y{constructor(e,t){super(e.message,e,t),this.name="CacheError"}}t.CacheError=te;class re extends Y{constructor(e,t){super(e.message,e,t),this.name="UploadError"}}t.UploadError=re;class ne extends Y{constructor(e,t,r){super(e.message,e,r),this.name="TimeoutError",this.event=e.event,this.timings=t}}t.TimeoutError=ne;class oe extends Y{constructor(e,t){super(e.message,e,t),this.name="ReadError"}}t.ReadError=oe;class se extends Y{constructor(e){super(`Unsupported protocol "${e.url.protocol}"`,{},e),this.name="UnsupportedProtocolError"}}t.UnsupportedProtocolError=se;const ie=["socket","connect","continue","information","upgrade","timeout"];class ae extends o.Duplex{constructor(e,r={},n){super({autoDestroy:!1,highWaterMark:0}),this[q]=0,this[H]=0,this.requestInitialized=!1,this[L]=new Set,this.redirects=[],this[B]=!1,this[F]=!1,this[G]=[],this.retryCount=0,this._progressCallbacks=[];const o=()=>this._unlockWrite(),i=()=>this._lockWrite();this.on("pipe",e=>{e.prependListener("data",o),e.on("data",i),e.prependListener("end",o),e.on("end",i)}),this.on("unpipe",e=>{e.off("data",o),e.off("data",i),e.off("end",o),e.off("end",i)}),this.on("pipe",e=>{e instanceof c.IncomingMessage&&(this.options.headers={...e.headers,...this.options.headers})});const{json:a,body:u,form:l}=r;if((a||u||l)&&this._lockWrite(),t.kIsNormalizedAlready in r)this.options=r;else try{this.options=this.constructor.normalizeArguments(e,r,n)}catch(e){return y.default.nodeStream(r.body)&&r.body.destroy(),void this.destroy(e)}(async()=>{var e;try{this.options.body instanceof s.ReadStream&&await(async e=>new Promise((t,r)=>{const n=e=>{r(e)};e.pending||t(),e.once("error",n),e.once("ready",()=>{e.off("error",n),t()})}))(this.options.body);const{url:t}=this.options;if(!t)throw new TypeError("Missing `url` property");if(this.requestUrl=t.toString(),decodeURI(this.requestUrl),await this._finalizeBody(),await this._makeRequest(),this.destroyed)return void(null===(e=this[C])||void 0===e||e.destroy());for(const e of this[G])e();this[G].length=0,this.requestInitialized=!0}catch(e){if(e instanceof Y)return void this._beforeError(e);this.destroyed||this.destroy(e)}})()}static normalizeArguments(e,r,o){var s,a,c,u,l;const p=r;if(y.default.object(e)&&!y.default.urlInstance(e))r={...o,...e,...r};else{if(e&&r&&void 0!==r.url)throw new TypeError("The `url` option is mutually exclusive with the `input` argument");r={...o,...r},void 0!==e&&(r.url=e),y.default.urlInstance(r.url)&&(r.url=new i.URL(r.url.toString()))}if(!1===r.cache&&(r.cache=void 0),!1===r.dnsCache&&(r.dnsCache=void 0),y.assert.any([y.default.string,y.default.undefined],r.method),y.assert.any([y.default.object,y.default.undefined],r.headers),y.assert.any([y.default.string,y.default.urlInstance,y.default.undefined],r.prefixUrl),y.assert.any([y.default.object,y.default.undefined],r.cookieJar),y.assert.any([y.default.object,y.default.string,y.default.undefined],r.searchParams),y.assert.any([y.default.object,y.default.string,y.default.undefined],r.cache),y.assert.any([y.default.object,y.default.number,y.default.undefined],r.timeout),y.assert.any([y.default.object,y.default.undefined],r.context),y.assert.any([y.default.object,y.default.undefined],r.hooks),y.assert.any([y.default.boolean,y.default.undefined],r.decompress),y.assert.any([y.default.boolean,y.default.undefined],r.ignoreInvalidCookies),y.assert.any([y.default.boolean,y.default.undefined],r.followRedirect),y.assert.any([y.default.number,y.default.undefined],r.maxRedirects),y.assert.any([y.default.boolean,y.default.undefined],r.throwHttpErrors),y.assert.any([y.default.boolean,y.default.undefined],r.http2),y.assert.any([y.default.boolean,y.default.undefined],r.allowGetBody),y.assert.any([y.default.string,y.default.undefined],r.localAddress),y.assert.any([j.isDnsLookupIpVersion,y.default.undefined],r.dnsLookupIpVersion),y.assert.any([y.default.object,y.default.undefined],r.https),y.assert.any([y.default.boolean,y.default.undefined],r.rejectUnauthorized),r.https&&(y.assert.any([y.default.boolean,y.default.undefined],r.https.rejectUnauthorized),y.assert.any([y.default.function_,y.default.undefined],r.https.checkServerIdentity),y.assert.any([y.default.string,y.default.object,y.default.array,y.default.undefined],r.https.certificateAuthority),y.assert.any([y.default.string,y.default.object,y.default.array,y.default.undefined],r.https.key),y.assert.any([y.default.string,y.default.object,y.default.array,y.default.undefined],r.https.certificate),y.assert.any([y.default.string,y.default.undefined],r.https.passphrase),y.assert.any([y.default.string,y.default.buffer,y.default.array,y.default.undefined],r.https.pfx)),y.assert.any([y.default.object,y.default.undefined],r.cacheOptions),y.default.string(r.method)?r.method=r.method.toUpperCase():r.method="GET",r.headers===(null==o?void 0:o.headers)?r.headers={...r.headers}:r.headers=m({...null==o?void 0:o.headers,...r.headers}),"slashes"in r)throw new TypeError("The legacy `url.Url` has been deprecated. Use `URL` instead.");if("auth"in r)throw new TypeError("Parameter `auth` is deprecated. Use `username` / `password` instead.");if("searchParams"in r&&r.searchParams&&r.searchParams!==(null==o?void 0:o.searchParams)){let e;if(y.default.string(r.searchParams)||r.searchParams instanceof i.URLSearchParams)e=new i.URLSearchParams(r.searchParams);else{!function(e){for(const t in e){const r=e[t];if(!(y.default.string(r)||y.default.number(r)||y.default.boolean(r)||y.default.null_(r)||y.default.undefined(r)))throw new TypeError(`The \`searchParams\` value '${String(r)}' must be a string, number, boolean or null`)}}(r.searchParams),e=new i.URLSearchParams;for(const t in r.searchParams){const n=r.searchParams[t];null===n?e.append(t,""):void 0!==n&&e.append(t,n)}}null===(s=null==o?void 0:o.searchParams)||void 0===s||s.forEach((t,r)=>{e.has(r)||e.append(r,t)}),r.searchParams=e}if(r.username=null!==(a=r.username)&&void 0!==a?a:"",r.password=null!==(c=r.password)&&void 0!==c?c:"",y.default.undefined(r.prefixUrl)?r.prefixUrl=null!==(u=null==o?void 0:o.prefixUrl)&&void 0!==u?u:"":(r.prefixUrl=r.prefixUrl.toString(),""===r.prefixUrl||r.prefixUrl.endsWith("/")||(r.prefixUrl+="/")),y.default.string(r.url)){if(r.url.startsWith("/"))throw new Error("`input` must not start with a slash when using `prefixUrl`");r.url=x.default(r.prefixUrl+r.url,r)}else(y.default.undefined(r.url)&&""!==r.prefixUrl||r.protocol)&&(r.url=x.default(r.prefixUrl,r));if(r.url){"port"in r&&delete r.port;let{prefixUrl:e}=r;Object.defineProperty(r,"prefixUrl",{set:t=>{const n=r.url;if(!n.href.startsWith(t))throw new Error(`Cannot change \`prefixUrl\` from ${e} to ${t}: ${n.href}`);r.url=new i.URL(t+n.href.slice(e.length)),e=t},get:()=>e});let{protocol:t}=r.url;if("unix:"===t&&(t="http:",r.url=new i.URL(`http://unix${r.url.pathname}${r.url.search}`)),r.searchParams&&(r.url.search=r.searchParams.toString()),"http:"!==t&&"https:"!==t)throw new se(r);""===r.username?r.username=r.url.username:r.url.username=r.username,""===r.password?r.password=r.url.password:r.url.password=r.password}const{cookieJar:d}=r;if(d){let{setCookie:e,getCookieString:t}=d;y.assert.function_(e),y.assert.function_(t),4===e.length&&0===t.length&&(e=n.promisify(e.bind(r.cookieJar)),t=n.promisify(t.bind(r.cookieJar)),r.cookieJar={setCookie:e,getCookieString:t})}const{cache:f}=r;if(f&&(J.has(f)||J.set(f,new h((e,t)=>{const r=e[C](e,t);return y.default.promise(r)&&(r.once=(e,t)=>{if("error"===e)r.catch(t);else{if("abort"!==e)throw new Error("Unknown HTTP2 promise event: "+e);(async()=>{try{(await r).once("abort",t)}catch(e){}})()}return r}),r},f))),r.cacheOptions={...r.cacheOptions},!0===r.dnsCache)r.dnsCache=A;else if(!y.default.undefined(r.dnsCache)&&!r.dnsCache.lookup)throw new TypeError("Parameter `dnsCache` must be a CacheableLookup instance or a boolean, got "+y.default(r.dnsCache));y.default.number(r.timeout)?r.timeout={request:r.timeout}:o&&r.timeout!==o.timeout?r.timeout={...o.timeout,...r.timeout}:r.timeout={...r.timeout},r.context||(r.context={});const g=r.hooks===(null==o?void 0:o.hooks);r.hooks={...r.hooks};for(const e of t.knownHookEvents)if(e in r.hooks){if(!y.default.array(r.hooks[e]))throw new TypeError(`Parameter \`${e}\` must be an Array, got ${y.default(r.hooks[e])}`);r.hooks[e]=[...r.hooks[e]]}else r.hooks[e]=[];if(o&&!g)for(const e of t.knownHookEvents){o.hooks[e].length>0&&(r.hooks[e]=[...o.hooks[e],...r.hooks[e]])}if("family"in r&&T.default('"options.family" was never documented, please use "options.dnsLookupIpVersion"'),(null==o?void 0:o.https)&&(r.https={...o.https,...r.https}),"rejectUnauthorized"in r&&T.default('"options.rejectUnauthorized" is now deprecated, please use "options.https.rejectUnauthorized"'),"checkServerIdentity"in r&&T.default('"options.checkServerIdentity" was never documented, please use "options.https.checkServerIdentity"'),"ca"in r&&T.default('"options.ca" was never documented, please use "options.https.certificateAuthority"'),"key"in r&&T.default('"options.key" was never documented, please use "options.https.key"'),"cert"in r&&T.default('"options.cert" was never documented, please use "options.https.certificate"'),"passphrase"in r&&T.default('"options.passphrase" was never documented, please use "options.https.passphrase"'),"pfx"in r&&T.default('"options.pfx" was never documented, please use "options.https.pfx"'),"followRedirects"in r)throw new TypeError("The `followRedirects` option does not exist. Use `followRedirect` instead.");if(r.agent)for(const e in r.agent)if("http"!==e&&"https"!==e&&"http2"!==e)throw new TypeError(`Expected the \`options.agent\` properties to be \`http\`, \`https\` or \`http2\`, got \`${e}\``);return r.maxRedirects=null!==(l=r.maxRedirects)&&void 0!==l?l:0,t.setNonEnumerableProperties([o,p],r),E.default(r,o)}_lockWrite(){const e=()=>{throw new TypeError("The payload has been already provided")};this.write=e,this.end=e}_unlockWrite(){this.write=super.write,this.end=super.end}async _finalizeBody(){const{options:e}=this,{headers:r}=e,n=!y.default.undefined(e.form),s=!y.default.undefined(e.json),a=!y.default.undefined(e.body),c=n||s||a,u=t.withoutBody.has(e.method)&&!("GET"===e.method&&e.allowGetBody);if(this._cannotHaveBody=u,c){if(u)throw new TypeError(`The \`${e.method}\` method cannot be used with a body`);if([a,n,s].filter(e=>e).length>1)throw new TypeError("The `body`, `json` and `form` options are mutually exclusive");if(a&&!(e.body instanceof o.Readable)&&!y.default.string(e.body)&&!y.default.buffer(e.body)&&!v.default(e.body))throw new TypeError("The `body` option must be a stream.Readable, string or Buffer");if(n&&!y.default.object(e.form))throw new TypeError("The `form` option must be an Object");{const t=!y.default.string(r["content-type"]);a?(v.default(e.body)&&t&&(r["content-type"]="multipart/form-data; boundary="+e.body.getBoundary()),this[$]=e.body):n?(t&&(r["content-type"]="application/x-www-form-urlencoded"),this[$]=new i.URLSearchParams(e.form).toString()):(t&&(r["content-type"]="application/json"),this[$]=e.stringifyJson(e.json));const o=await g.default(this[$],e.headers);y.default.undefined(r["content-length"])&&y.default.undefined(r["transfer-encoding"])&&(u||y.default.undefined(o)||(r["content-length"]=String(o)))}}else u?this._lockWrite():this._unlockWrite();this[R]=Number(r["content-length"])||void 0}async _onResponseBase(e){const{options:t}=this,{url:r}=t;this[V]=e,t.decompress&&(e=d(e));const n=e.statusCode,o=e;o.statusMessage=o.statusMessage?o.statusMessage:a.STATUS_CODES[n],o.url=t.url.toString(),o.requestUrl=this.requestUrl,o.redirectUrls=this.redirects,o.request=this,o.isFromCache=e.fromCache||!1,o.ip=this.ip,o.retryCount=this.retryCount,this[M]=o.isFromCache,this[U]=Number(e.headers["content-length"])||void 0,this[I]=e,e.once("end",()=>{this[U]=this[q],this.emit("downloadProgress",this.downloadProgress)}),e.once("error",t=>{e.destroy(),this._beforeError(new oe(t,this))}),e.once("aborted",()=>{this._beforeError(new oe({name:"Error",message:"The server aborted pending request",code:"ECONNRESET"},this))}),this.emit("downloadProgress",this.downloadProgress);const s=e.headers["set-cookie"];if(y.default.object(t.cookieJar)&&s){let e=s.map(async e=>t.cookieJar.setCookie(e,r.toString()));t.ignoreInvalidCookies&&(e=e.map(async e=>e.catch(()=>{})));try{await Promise.all(e)}catch(e){return void this._beforeError(e)}}if(t.followRedirect&&e.headers.location&&Q.has(n)){e.resume(),this[C]&&(this[D](),delete this[C],this[N]());if(!(303===n&&"GET"!==t.method&&"HEAD"!==t.method)&&t.methodRewriting||(t.method="GET","body"in t&&delete t.body,"json"in t&&delete t.json,"form"in t&&delete t.form,this[$]=void 0,delete t.headers["content-length"]),this.redirects.length>=t.maxRedirects)return void this._beforeError(new Z(this));try{const n=Buffer.from(e.headers.location,"binary").toString(),s=new i.URL(n,r),a=s.toString();decodeURI(a),s.hostname!==r.hostname||s.port!==r.port?("host"in t.headers&&delete t.headers.host,"cookie"in t.headers&&delete t.headers.cookie,"authorization"in t.headers&&delete t.headers.authorization,(t.username||t.password)&&(t.username="",t.password="")):(s.username=t.username,s.password=t.password),this.redirects.push(a),t.url=s;for(const e of t.hooks.beforeRedirect)await e(t,o);this.emit("redirect",o,t),await this._makeRequest()}catch(e){return void this._beforeError(e)}}else if(t.isStream&&t.throwHttpErrors&&!P.isResponseOk(o))this._beforeError(new ee(o));else{e.on("readable",()=>{this[F]&&this._read()}),this.on("resume",()=>{e.resume()}),this.on("pause",()=>{e.pause()}),e.once("end",()=>{this.push(null)}),this.emit("response",e);for(const r of this[L])if(!r.headersSent){for(const n in e.headers){const o=!t.decompress||"content-encoding"!==n,s=e.headers[n];o&&r.setHeader(n,s)}r.statusCode=n}}}async _onResponse(e){try{await this._onResponseBase(e)}catch(e){this._beforeError(e)}}_onRequest(e){const{options:t}=this,{timeout:r,url:n}=t;l.default(e),this[D]=_.default(e,r,n);const o=t.cache?"cacheableResponse":"response";e.once(o,e=>{this._onResponse(e)}),e.once("error",t=>{var r;e.destroy(),null===(r=e.res)||void 0===r||r.removeAllListeners("end"),t=t instanceof _.TimeoutError?new ne(t,this.timings,this):new Y(t.message,t,this),this._beforeError(t)}),this[N]=b.default(e,this,ie),this[C]=e,this.emit("uploadProgress",this.uploadProgress);const s=this[$],i=0===this.redirects.length?this:e;y.default.nodeStream(s)?(s.pipe(i),s.once("error",e=>{this._beforeError(new re(e,this))})):(this._unlockWrite(),y.default.undefined(s)?(this._cannotHaveBody||this._noPipe)&&(i.end(),this._lockWrite()):(this._writeRequest(s,void 0,()=>{}),i.end(),this._lockWrite())),this.emit("request",e)}async _createCacheableRequest(e,t){return new Promise((r,n)=>{let o;Object.assign(t,w.default(e)),delete t.url;const s=J.get(t.cache)(t,async e=>{e._readableState.autoDestroy=!1,o&&(await o).emit("cacheableResponse",e),r(e)});t.url=e,s.once("error",n),s.once("request",async e=>{o=e,r(o)})})}async _makeRequest(){var e,t,r,n,o;const{options:s}=this,{headers:i}=s;for(const e in i)if(y.default.undefined(i[e]))delete i[e];else if(y.default.null_(i[e]))throw new TypeError(`Use \`undefined\` instead of \`null\` to delete the \`${e}\` header`);if(s.decompress&&y.default.undefined(i["accept-encoding"])&&(i["accept-encoding"]=K?"gzip, deflate, br":"gzip, deflate"),s.cookieJar){const e=await s.cookieJar.getCookieString(s.url.toString());y.default.nonEmptyString(e)&&(s.headers.cookie=e)}for(const e of s.hooks.beforeRequest){const t=await e(s);if(!y.default.undefined(t)){s.request=()=>t;break}}s.body&&this[$]!==s.body&&(this[$]=s.body);const{agent:c,request:l,timeout:p,url:d}=s;if(s.dnsCache&&!("lookup"in s)&&(s.lookup=s.dnsCache.lookup),"unix"===d.hostname){const e=/(?<socketPath>.+?):(?<path>.+)/.exec(`${d.pathname}${d.search}`);if(null==e?void 0:e.groups){const{socketPath:t,path:r}=e.groups;Object.assign(s,{socketPath:t,path:r,host:""})}}const m="https:"===d.protocol;let g;g=s.http2?f.auto:m?u.request:a.request;const v=null!==(e=s.request)&&void 0!==e?e:g,b=s.cache?this._createCacheableRequest:v;c&&!s.http2&&(s.agent=c[m?"https":"http"]),s[C]=v,delete s.request,delete s.timeout;const _=s;if(_.shared=null===(t=s.cacheOptions)||void 0===t?void 0:t.shared,_.cacheHeuristic=null===(r=s.cacheOptions)||void 0===r?void 0:r.cacheHeuristic,_.immutableMinTimeToLive=null===(n=s.cacheOptions)||void 0===n?void 0:n.immutableMinTimeToLive,_.ignoreCargoCult=null===(o=s.cacheOptions)||void 0===o?void 0:o.ignoreCargoCult,void 0!==s.dnsLookupIpVersion)try{_.family=j.dnsLookupIpVersionToFamily(s.dnsLookupIpVersion)}catch(e){throw new Error("Invalid `dnsLookupIpVersion` option value")}s.https&&("rejectUnauthorized"in s.https&&(_.rejectUnauthorized=s.https.rejectUnauthorized),s.https.checkServerIdentity&&(_.checkServerIdentity=s.https.checkServerIdentity),s.https.certificateAuthority&&(_.ca=s.https.certificateAuthority),s.https.certificate&&(_.cert=s.https.certificate),s.https.key&&(_.key=s.https.key),s.https.passphrase&&(_.passphrase=s.https.passphrase),s.https.pfx&&(_.pfx=s.https.pfx));try{let e=await b(d,_);y.default.undefined(e)&&(e=g(d,_)),s.request=l,s.timeout=p,s.agent=c,s.https&&("rejectUnauthorized"in s.https&&delete _.rejectUnauthorized,s.https.checkServerIdentity&&delete _.checkServerIdentity,s.https.certificateAuthority&&delete _.ca,s.https.certificate&&delete _.cert,s.https.key&&delete _.key,s.https.passphrase&&delete _.passphrase,s.https.pfx&&delete _.pfx),w=e,y.default.object(w)&&!("statusCode"in w)?this._onRequest(e):this.writable?(this.once("finish",()=>{this._onResponse(e)}),this._unlockWrite(),this.end(),this._lockWrite()):this._onResponse(e)}catch(e){if(e instanceof h.CacheError)throw new te(e,this);throw new Y(e.message,e,this)}var w}async _error(e){try{for(const t of this.options.hooks.beforeError)e=await t(e)}catch(t){e=new Y(t.message,t,this)}this.destroy(e)}_beforeError(e){if(this[B])return;const{options:t}=this,r=this.retryCount+1;this[B]=!0,e instanceof Y||(e=new Y(e.message,e,this));const n=e,{response:o}=n;(async()=>{if(o&&!o.body){o.setEncoding(this._readableState.encoding);try{o.rawBody=await S.default(o),o.body=o.rawBody.toString()}catch(e){}}if(0!==this.listenerCount("retry")){let s;try{let e;o&&"retry-after"in o.headers&&(e=Number(o.headers["retry-after"]),Number.isNaN(e)?(e=Date.parse(o.headers["retry-after"])-Date.now(),e<=0&&(e=1)):e*=1e3),s=await t.retry.calculateDelay({attemptCount:r,retryOptions:t.retry,error:n,retryAfter:e,computedValue:O.default({attemptCount:r,retryOptions:t.retry,error:n,retryAfter:e,computedValue:0})})}catch(e){return void this._error(new Y(e.message,e,this))}if(s){const t=async()=>{try{for(const e of this.options.hooks.beforeRetry)await e(this.options,n,r)}catch(t){return void this._error(new Y(t.message,e,this))}this.destroyed||(this.destroy(),this.emit("retry",r,e))};return void(this[W]=setTimeout(t,s))}}this._error(n)})()}_read(){this[F]=!0;const e=this[I];if(e&&!this[B]){let t;for(e.readableLength&&(this[F]=!1);null!==(t=e.read());){this[q]+=t.length,this[z]=!0;const e=this.downloadProgress;e.percent<1&&this.emit("downloadProgress",e),this.push(t)}}}_write(e,t,r){const n=()=>{this._writeRequest(e,t,r)};this.requestInitialized?n():this[G].push(n)}_writeRequest(e,t,r){this[C].destroyed||(this._progressCallbacks.push(()=>{this[H]+=Buffer.byteLength(e,t);const r=this.uploadProgress;r.percent<1&&this.emit("uploadProgress",r)}),this[C].write(e,t,e=>{!e&&this._progressCallbacks.length>0&&this._progressCallbacks.shift()(),r(e)}))}_final(e){const t=()=>{for(;0!==this._progressCallbacks.length;)this._progressCallbacks.shift()();C in this?this[C].destroyed?e():this[C].end(t=>{t||(this[R]=this[H],this.emit("uploadProgress",this.uploadProgress),this[C].emit("upload-complete")),e(t)}):e()};this.requestInitialized?t():this[G].push(t)}_destroy(e,t){var r;this[B]=!0,clearTimeout(this[W]),C in this&&(this[D](),(null===(r=this[I])||void 0===r?void 0:r.complete)||this[C].destroy()),null===e||y.default.undefined(e)||e instanceof Y||(e=new Y(e.message,e,this)),t(e)}get _isAboutToError(){return this[B]}get ip(){var e;return null===(e=this.socket)||void 0===e?void 0:e.remoteAddress}get aborted(){var e,t,r;return(null!==(t=null===(e=this[C])||void 0===e?void 0:e.destroyed)&&void 0!==t?t:this.destroyed)&&!(null===(r=this[V])||void 0===r?void 0:r.complete)}get socket(){var e,t;return null!==(t=null===(e=this[C])||void 0===e?void 0:e.socket)&&void 0!==t?t:void 0}get downloadProgress(){let e;return e=this[U]?this[q]/this[U]:this[U]===this[q]?1:0,{percent:e,transferred:this[q],total:this[U]}}get uploadProgress(){let e;return e=this[R]?this[H]/this[R]:this[R]===this[H]?1:0,{percent:e,transferred:this[H],total:this[R]}}get timings(){var e;return null===(e=this[C])||void 0===e?void 0:e.timings}get isFromCache(){return this[M]}pipe(e,t){if(this[z])throw new Error("Failed to pipe. The response has been emitted already.");return e instanceof c.ServerResponse&&this[L].add(e),super.pipe(e,t)}unpipe(e){return e instanceof c.ServerResponse&&this[L].delete(e),super.unpipe(e),this}}t.default=ae},function(e,t){e.exports=require("util")},function(e,t,r){"use strict";const n={accessScope:"access-scope",apiPermission:"api-permission",applicationCharge:"application-charge",applicationCredit:"application-credit",article:"article",asset:"asset",balance:"balance",blog:"blog",cancellationRequest:"cancellation-request",carrierService:"carrier-service",checkout:"checkout",collect:"collect",collection:"collection",collectionListing:"collection-listing",comment:"comment",country:"country",currency:"currency",customCollection:"custom-collection",customer:"customer",customerAddress:"customer-address",customerSavedSearch:"customer-saved-search",discountCode:"discount-code",discountCodeCreationJob:"discount-code-creation-job",dispute:"dispute",draftOrder:"draft-order",event:"event",fulfillment:"fulfillment",fulfillmentEvent:"fulfillment-event",fulfillmentOrder:"fulfillment-order",fulfillmentRequest:"fulfillment-request",fulfillmentService:"fulfillment-service",giftCard:"gift-card",giftCardAdjustment:"gift-card-adjustment",inventoryItem:"inventory-item",inventoryLevel:"inventory-level",location:"location",marketingEvent:"marketing-event",metafield:"metafield",order:"order",orderRisk:"order-risk",page:"page",payment:"payment",payout:"payout",policy:"policy",priceRule:"price-rule",product:"product",productImage:"product-image",productListing:"product-listing",productResourceFeedback:"product-resource-feedback",productVariant:"product-variant",province:"province",recurringApplicationCharge:"recurring-application-charge",redirect:"redirect",refund:"refund",report:"report",resourceFeedback:"resource-feedback",scriptTag:"script-tag",shippingZone:"shipping-zone",shop:"shop",smartCollection:"smart-collection",storefrontAccessToken:"storefront-access-token",tenderTransaction:"tender-transaction",theme:"theme",transaction:"transaction",usageCharge:"usage-charge",user:"user",webhook:"webhook"};e.exports={registerAll:function(e){Object.keys(n).forEach(t=>{Object.defineProperty(e.prototype,t,{configurable:!0,get:function(){const e=r(307)("./"+n[t]);return Object.defineProperty(this,t,{value:new e(this)})[t]},set:function(e){Object.defineProperty(this,t,{value:e})[t]}})})}}},function(e,t,r){var n=r(106),o=r(30),s=Object.prototype.hasOwnProperty;e.exports=function(e,t,r){var i=e[t];s.call(e,t)&&o(i,r)&&(void 0!==r||t in e)||n(e,t,r)}},function(e,t){e.exports=require("querystring")},function(e,t,r){"use strict";const n=r(43),o=r(62),s=r(14);e.exports=class{constructor(e){if(!(e&&e.sharedSecret&&e.redirectUri&&e.apiKey))throw new Error("Missing or invalid options");this.accessMode="accessMode"in e?e.accessMode:"",this.scopes="scopes"in e?e.scopes:"read_content",this.timeout="timeout"in e?e.timeout:6e4,this.sharedSecret=e.sharedSecret,this.redirectUri=e.redirectUri,this.apiKey=e.apiKey}generateNonce(){return n.randomBytes(16).toString("hex")}generateAuthUrl(e,t,r,n){t||(t=this.scopes),n||(n=this.accessMode);const o={scope:Array.isArray(t)?t.join(","):t,state:r||this.generateNonce(),redirect_uri:this.redirectUri,client_id:this.apiKey};return n&&(o["grant_options[]"]=n),s.format({pathname:"/admin/oauth/authorize",hostname:e.endsWith(".myshopify.com")?e:e+".myshopify.com",protocol:"https:",query:o})}verifyHmac(e){const t=Object.keys(e).filter(e=>"signature"!==e&&"hmac"!==e).map(t=>{const r=Array.isArray(e[t])?`["${e[t].join('", "')}"]`:String(e[t]);return`${n=t,n.replace(/[%&=]/g,encodeURIComponent)}=${(e=>e.replace(/[%&]/g,encodeURIComponent))(r)}`;var n}).sort();return n.createHmac("sha256",this.sharedSecret).update(t.join("&")).digest("hex")===e.hmac}getAccessToken(e,t){return new Promise((r,n)=>{const s=JSON.stringify({client_secret:this.sharedSecret,client_id:this.apiKey,code:t}),i=o.request({headers:{"Content-Length":Buffer.byteLength(s),"Content-Type":"application/json",Accept:"application/json"},path:"/admin/oauth/access_token",hostname:e,method:"POST"});let a=setTimeout(()=>{i.abort(),a=null,n(new Error("Request timed out"))},this.timeout);i.on("response",e=>{const t=e.statusCode;let o="";e.setEncoding("utf8"),e.on("data",e=>o+=e),e.on("end",()=>{let e;if(a){if(clearTimeout(a),200!==t)return e=new Error("Failed to get Shopify access token"),e.responseBody=o,e.statusCode=t,n(e);try{o=JSON.parse(o)}catch(r){return e=new Error("Failed to parse the response body"),e.responseBody=o,e.statusCode=t,n(e)}r(o)}})}),i.on("error",e=>{a&&(clearTimeout(a),n(e))}),i.end(s)})}}},function(e,t){e.exports=require("crypto")},function(e,t,r){var n=r(186),o=r(187),s=r(74),i=r(188);e.exports=function(e,t){return n(e)||o(e,t)||s(e,t)||i()}},function(e,t,r){var n=r(195),o=r(10),s=Object.prototype,i=s.hasOwnProperty,a=s.propertyIsEnumerable,c=n(function(){return arguments}())?n:function(e){return o(e)&&i.call(e,"callee")&&!a.call(e,"callee")};e.exports=c},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){var n=r(199),o=r(49),s=r(50),i=s&&s.isTypedArray,a=i?o(i):n;e.exports=a},function(e,t){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},function(e,t){e.exports=function(e){return function(t){return e(t)}}},function(e,t,r){(function(e){var n=r(78),o=t&&!t.nodeType&&t,s=o&&"object"==typeof e&&e&&!e.nodeType&&e,i=s&&s.exports===o&&n.process,a=function(){try{var e=s&&s.require&&s.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=a}).call(this,r(46)(e))},function(e,t,r){var n=r(17),o=r(9);e.exports=function(e){if(!o(e))return!1;var t=n(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(e,t,r){var n=r(28),o=r(210),s=r(211),i=r(212),a=r(213),c=r(214);function u(e){var t=this.__data__=new n(e);this.size=t.size}u.prototype.clear=o,u.prototype.delete=s,u.prototype.get=i,u.prototype.has=a,u.prototype.set=c,e.exports=u},function(e,t,r){var n=r(12)(r(8),"Map");e.exports=n},function(e,t,r){var n=r(219),o=r(226),s=r(228),i=r(229),a=r(230);function c(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=o,c.prototype.get=s,c.prototype.has=i,c.prototype.set=a,e.exports=c},function(e,t){e.exports=function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}},function(e,t,r){var n=r(241),o=r(86),s=Object.prototype.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(e){return null==e?[]:(e=Object(e),n(i(e),(function(t){return s.call(e,t)})))}:o;e.exports=a},function(e,t,r){var n=r(7),o=r(58),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;e.exports=function(e,t){if(n(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!o(e))||(i.test(e)||!s.test(e)||null!=t&&e in Object(t))}},function(e,t,r){var n=r(17),o=r(10);e.exports=function(e){return"symbol"==typeof e||o(e)&&"[object Symbol]"==n(e)}},function(e,t){e.exports=function(e){return e}},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("http")},function(e,t){e.exports=require("https")},function(e,t){e.exports=require("tls")},function(e,t,r){"use strict";e.exports=e=>{const t={};for(const[r,n]of Object.entries(e))t[r.toLowerCase()]=n;return t}},function(e,t){e.exports=require("http2")},function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty,o=Array.isArray,s=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),i=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r};e.exports={arrayToObject:i,assign:function(e,t){return Object.keys(t).reduce((function(e,r){return e[r]=t[r],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var s=t[n],i=s.obj[s.prop],a=Object.keys(i),c=0;c<a.length;++c){var u=a[c],l=i[u];"object"==typeof l&&null!==l&&-1===r.indexOf(l)&&(t.push({obj:i,prop:u}),r.push(l))}return function(e){for(;e.length>1;){var t=e.pop(),r=t.obj[t.prop];if(o(r)){for(var n=[],s=0;s<r.length;++s)void 0!==r[s]&&n.push(r[s]);t.obj[t.prop]=n}}}(t),e},decode:function(e,t,r){var n=e.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(e){return n}},encode:function(e,t,r){if(0===e.length)return e;var n=e;if("symbol"==typeof e?n=Symbol.prototype.toString.call(e):"string"!=typeof e&&(n=String(e)),"iso-8859-1"===r)return escape(n).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var o="",i=0;i<n.length;++i){var a=n.charCodeAt(i);45===a||46===a||95===a||126===a||a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122?o+=n.charAt(i):a<128?o+=s[a]:a<2048?o+=s[192|a>>6]+s[128|63&a]:a<55296||a>=57344?o+=s[224|a>>12]+s[128|a>>6&63]+s[128|63&a]:(i+=1,a=65536+((1023&a)<<10|1023&n.charCodeAt(i)),o+=s[240|a>>18]+s[128|a>>12&63]+s[128|a>>6&63]+s[128|63&a])}return o},isBuffer:function(e){return!(!e||"object"!=typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(o(e)){for(var r=[],n=0;n<e.length;n+=1)r.push(t(e[n]));return r}return t(e)},merge:function e(t,r,s){if(!r)return t;if("object"!=typeof r){if(o(t))t.push(r);else{if(!t||"object"!=typeof t)return[t,r];(s&&(s.plainObjects||s.allowPrototypes)||!n.call(Object.prototype,r))&&(t[r]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(r);var a=t;return o(t)&&!o(r)&&(a=i(t,s)),o(t)&&o(r)?(r.forEach((function(r,o){if(n.call(t,o)){var i=t[o];i&&"object"==typeof i&&r&&"object"==typeof r?t[o]=e(i,r,s):t.push(r)}else t[o]=r})),t):Object.keys(r).reduce((function(t,o){var i=r[o];return n.call(t,o)?t[o]=e(t[o],i,s):t[o]=i,t}),a)}}},function(e,t,r){var n=r(77),o=r(326),s=r(27);e.exports=function(e){return s(e)?n(e,!0):o(e)}},function(e,t,r){var n=r(83);e.exports=function(e){var t=new e.constructor(e.byteLength);return new n(t).set(new n(e)),t}},function(e,t,r){"use strict";const n=r(22),o={buildUrl(e,t){e||0===e||(e="");let r="/admin";this.shopify.options.apiVersion&&(r+="/api/"+this.shopify.options.apiVersion),r+=`/shopify_payments/${this.name}/${e}`,r=r.replace(/\/+/g,"/").replace(/\/$/,"")+".json";const o={pathname:r,...this.shopify.baseUrl};return t&&(o.search="?"+n.stringify(t,{arrayFormat:"brackets"})),o}};e.exports=o},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.applySession=void 0;const o=r(72),s=r(357),i=n(r(71)),a=e=>JSON.stringify(e,(e,t)=>"cookie"===e?void 0:t),c=(e,t,r,n,s)=>{if(!e.headersSent&&r&&(r.isNew||n)){const n=[o.serialize(t,s?s(r.id):r.id,{path:r.cookie.path,httpOnly:r.cookie.httpOnly,expires:r.cookie.expires,domain:r.cookie.domain,sameSite:r.cookie.sameSite,secure:r.cookie.secure})],i=e.getHeader("set-cookie");i&&(Array.isArray(i)?n.push(...i):n.push(i)),e.setHeader("set-cookie",n)}},u=e=>{const t={};for(const r in e)"isNew"!==r&&(t[r]=e[r]);return t},l=async(e,t)=>t&&e.__set(t.id,u(t));let p;t.applySession=async function(e,t,r={}){var n,h,d,f,m,y;if(e.session)return;const g=function(e){if("__normalized"in e)return e;const t=e;return t.__destroy=function(e){return new Promise((t,r)=>{const n=this.destroy(e,e=>e?r(e):t());n&&"function"==typeof n.then&&n.then(t,r)})},t.__get=function(e){return new Promise((t,r)=>{const n=this.get(e,(e,n)=>e?r(e):t(n));n&&"function"==typeof n.then&&n.then(t,r)})},t.__set=function(e,t){return new Promise((r,n)=>{const o=this.set(e,t,e=>e?n(e):r());o&&"function"==typeof o.then&&o.then(r,n)})},e.touch&&(t.__touch=function(e,t){return new Promise((r,n)=>{const o=this.touch(e,t,e=>e?n(e):r());o&&"function"==typeof o.then&&o.then(r,n)})}),t.__normalized=!0,t}(r.store||(p=p||new i.default));r.rolling&&!("touchAfter"in r)&&(console.warn("The use of options.rolling is deprecated. Setting this to `true` without options.touchAfter causes options.touchAfter to be defaulted to `0` (always)"),r.touchAfter=0);const v=r.name||"sid",b=async()=>{c(t,v,e.session,k,r.encode),await l(g,e.session)},_=async()=>{await g.__destroy(e.session.id),e.session=null};let w=e.headers&&e.headers.cookie?o.parse(e.headers.cookie)[v]:null;w&&r.decode&&(w=r.decode(w)),e.session=w?await g.__get(w):null,e.session?(e.session.commit=b,e.session.destroy=_,e.session.isNew=!1,e.session.id=w,"string"==typeof e.session.cookie.expires&&(e.session.cookie.expires=new Date(e.session.cookie.expires))):e.session={cookie:{path:(null===(n=r.cookie)||void 0===n?void 0:n.path)||"/",httpOnly:(null===(h=r.cookie)||void 0===h?void 0:h.httpOnly)||!0,domain:(null===(d=r.cookie)||void 0===d?void 0:d.domain)||void 0,sameSite:null===(f=r.cookie)||void 0===f?void 0:f.sameSite,secure:(null===(m=r.cookie)||void 0===m?void 0:m.secure)||!1,...(null===(y=r.cookie)||void 0===y?void 0:y.maxAge)?{maxAge:r.cookie.maxAge,expires:new Date}:{maxAge:null}},commit:b,destroy:_,isNew:!0,id:(r.genid||s.nanoid)()};const x=!1!==r.autoCommit?e.session.isNew?"{}":a(e.session):void 0;let k=!1;if(e.session.cookie.maxAge&&(e.session.isNew||"number"==typeof r.touchAfter&&-1!==r.touchAfter&&(k=1e3*e.session.cookie.maxAge-(e.session.cookie.expires.getTime()-Date.now())>=r.touchAfter))&&(e.session.cookie.expires=new Date(Date.now()+1e3*e.session.cookie.maxAge)),!1!==r.autoCommit){const n=t.writeHead;t.writeHead=function(...o){return c(t,v,e.session,k,r.encode),n.apply(this,o)};const o=t.end;t.end=async function(...t){a(e.session)!==x?await l(g,e.session):e.session&&k&&g.__touch&&await g.__touch(e.session.id,u(e.session)),o.apply(this,t)}}e.sessionStore=g}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(13);class o extends n.EventEmitter{constructor(){super(),this.sessions={}}get(e){const t=this,r=this.sessions[e];if(r){const n=JSON.parse(r);return n.cookie.expires=n.cookie.expires?new Date(n.cookie.expires):null,!n.cookie.expires||Date.now()<n.cookie.expires.getTime()?Promise.resolve(n):(t.destroy(e),Promise.resolve(null))}return Promise.resolve(null)}set(e,t){return this.sessions[e]=JSON.stringify(t),Promise.resolve()}touch(e,t){return this.set(e,t)}all(){return Promise.resolve(Object.values(this.sessions))}destroy(e){return delete this.sessions[e],Promise.resolve()}}t.default=o},function(e,t,r){"use strict";
/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */t.parse=function(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var r={},o=t||{},i=e.split(s),c=o.decode||n,u=0;u<i.length;u++){var l=i[u],p=l.indexOf("=");if(!(p<0)){var h=l.substr(0,p).trim(),d=l.substr(++p,l.length).trim();'"'==d[0]&&(d=d.slice(1,-1)),null==r[h]&&(r[h]=a(d,c))}}return r},t.serialize=function(e,t,r){var n=r||{},s=n.encode||o;if("function"!=typeof s)throw new TypeError("option encode is invalid");if(!i.test(e))throw new TypeError("argument name is invalid");var a=s(t);if(a&&!i.test(a))throw new TypeError("argument val is invalid");var c=e+"="+a;if(null!=n.maxAge){var u=n.maxAge-0;if(isNaN(u)||!isFinite(u))throw new TypeError("option maxAge is invalid");c+="; Max-Age="+Math.floor(u)}if(n.domain){if(!i.test(n.domain))throw new TypeError("option domain is invalid");c+="; Domain="+n.domain}if(n.path){if(!i.test(n.path))throw new TypeError("option path is invalid");c+="; Path="+n.path}if(n.expires){if("function"!=typeof n.expires.toUTCString)throw new TypeError("option expires is invalid");c+="; Expires="+n.expires.toUTCString()}n.httpOnly&&(c+="; HttpOnly");n.secure&&(c+="; Secure");if(n.sameSite){switch("string"==typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:c+="; SameSite=Strict";break;case"lax":c+="; SameSite=Lax";break;case"strict":c+="; SameSite=Strict";break;case"none":c+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return c};var n=decodeURIComponent,o=encodeURIComponent,s=/; */,i=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function a(e,t){try{return t(e)}catch(t){return e}}},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}},function(e,t,r){var n=r(73);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}},function(e,t){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}},function(e,t,r){var n=r(9),o=Object.create,s=function(){function e(){}return function(t){if(!n(t))return{};if(o)return o(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();e.exports=s},function(e,t,r){var n=r(194),o=r(45),s=r(7),i=r(24),a=r(25),c=r(47),u=Object.prototype.hasOwnProperty;e.exports=function(e,t){var r=s(e),l=!r&&o(e),p=!r&&!l&&i(e),h=!r&&!l&&!p&&c(e),d=r||l||p||h,f=d?n(e.length,String):[],m=f.length;for(var y in e)!t&&!u.call(e,y)||d&&("length"==y||p&&("offset"==y||"parent"==y)||h&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||a(y,m))||f.push(y);return f}},function(e,t){var r="object"==typeof global&&global&&global.Object===Object&&global;e.exports=r},function(e,t){e.exports=function(e,t){return function(r){return e(t(r))}}},function(e,t){var r=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return r.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t,r){var n=r(231),o=r(10);e.exports=function e(t,r,s,i,a){return t===r||(null==t||null==r||!o(t)&&!o(r)?t!=t&&r!=r:n(t,r,s,i,e,a))}},function(e,t,r){var n=r(232),o=r(235),s=r(236);e.exports=function(e,t,r,i,a,c){var u=1&r,l=e.length,p=t.length;if(l!=p&&!(u&&p>l))return!1;var h=c.get(e),d=c.get(t);if(h&&d)return h==t&&d==e;var f=-1,m=!0,y=2&r?new n:void 0;for(c.set(e,t),c.set(t,e);++f<l;){var g=e[f],v=t[f];if(i)var b=u?i(v,g,f,t,e,c):i(g,v,f,e,t,c);if(void 0!==b){if(b)continue;m=!1;break}if(y){if(!o(t,(function(e,t){if(!s(y,t)&&(g===e||a(g,e,r,i,c)))return y.push(t)}))){m=!1;break}}else if(g!==v&&!a(g,v,r,i,c)){m=!1;break}}return c.delete(e),c.delete(t),m}},function(e,t,r){var n=r(8).Uint8Array;e.exports=n},function(e,t,r){var n=r(85),o=r(56),s=r(16);e.exports=function(e){return n(e,s,o)}},function(e,t,r){var n=r(55),o=r(7);e.exports=function(e,t,r){var s=t(e);return o(e)?s:n(s,r(e))}},function(e,t){e.exports=function(){return[]}},function(e,t,r){var n=r(9);e.exports=function(e){return e==e&&!n(e)}},function(e,t){e.exports=function(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}}},function(e,t){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}},function(e,t,r){var n=r(254),o=r(255);e.exports=function(e,t){return null!=e&&o(e,t,n)}},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.defaultHandler=void 0;const s=r(11),i=r(92),a=r(303),c=r(37),u=r(304),l={RequestError:i.RequestError,CacheError:i.CacheError,ReadError:i.ReadError,HTTPError:i.HTTPError,MaxRedirectsError:i.MaxRedirectsError,TimeoutError:i.TimeoutError,ParseError:i.ParseError,CancelError:i.CancelError,UnsupportedProtocolError:i.UnsupportedProtocolError,UploadError:i.UploadError},p=async e=>new Promise(t=>{setTimeout(t,e)}),{normalizeArguments:h}=c.default,d=(...e)=>{let t;for(const r of e)t=h(void 0,r,t);return t},f=e=>e.isStream?new c.default(void 0,e):i.default(e),m=e=>"defaults"in e&&"options"in e.defaults,y=["get","post","put","patch","head","delete"];t.defaultHandler=(e,t)=>t(e);const g=(e,t)=>{if(e)for(const r of e)r(t)},v=e=>{e._rawHandlers=e.handlers,e.handlers=e.handlers.map(e=>(t,r)=>{let n;const o=e(t,e=>(n=r(e),n));if(o!==n&&!t.isStream&&n){const e=o,{then:t,catch:r,finally:s}=e;Object.setPrototypeOf(e,Object.getPrototypeOf(n)),Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)),e.then=t,e.catch=r,e.finally=s}return o});const r=(t,r={},n)=>{var o,u;let l=0;const p=t=>e.handlers[l++](t,l===e.handlers.length?f:p);if(s.default.plainObject(t)){const e={...t,...r};c.setNonEnumerableProperties([t,r],e),r=e,t=void 0}try{let s;try{g(e.options.hooks.init,r),g(null===(o=r.hooks)||void 0===o?void 0:o.init,r)}catch(e){s=e}const a=h(t,r,null!=n?n:e.options);if(a[c.kIsNormalizedAlready]=!0,s)throw new i.RequestError(s.message,s,a);return p(a)}catch(t){if(r.isStream)throw t;return a.default(t,e.options.hooks.beforeError,null===(u=r.hooks)||void 0===u?void 0:u.beforeError)}};r.extend=(...r)=>{const n=[e.options];let o,s=[...e._rawHandlers];for(const e of r)m(e)?(n.push(e.defaults.options),s.push(...e.defaults._rawHandlers),o=e.defaults.mutableDefaults):(n.push(e),"handlers"in e&&s.push(...e.handlers),o=e.mutableDefaults);return s=s.filter(e=>e!==t.defaultHandler),0===s.length&&s.push(t.defaultHandler),v({options:d(...n),handlers:s,mutableDefaults:Boolean(o)})};const n=async function*(t,n){let o=h(t,n,e.options);o.resolveBodyOnly=!1;const i=o.pagination;if(!s.default.object(i))throw new TypeError("`options.pagination` must be implemented");const a=[];let{countLimit:c}=i,u=0;for(;u<i.requestLimit;){0!==u&&await p(i.backoff);const e=await r(void 0,void 0,o),t=await i.transform(e),n=[];for(const e of t)if(i.filter(e,a,n)){if(!i.shouldContinue(e,a,n))return;if(yield e,i.stackAllItems&&a.push(e),n.push(e),--c<=0)return}const s=i.paginate(e,a,n);if(!1===s)return;s===e.request.options?o=e.request.options:void 0!==s&&(o=h(void 0,s,o)),u++}};(r.paginate=n).all=async(e,t)=>{const r=[];for await(const o of n(e,t))r.push(o);return r},r.paginate.each=n,r.stream=(e,t)=>r(e,{...t,isStream:!0});for(const e of y)r[e]=(t,n)=>r(t,{...n,method:e}),r.stream[e]=(t,n)=>r(t,{...n,method:e,isStream:!0});return Object.assign(r,l),Object.defineProperty(r,"defaults",{value:e.mutableDefaults?e:u.default(e),writable:e.mutableDefaults,configurable:e.mutableDefaults,enumerable:!0}),r.mergeOptions=d,r};t.default=v,o(r(305),t)},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0});const s=r(13),i=r(11),a=r(261),c=r(36),u=r(302),l=r(37),p=r(101),h=r(102),d=r(103),f=["request","response","redirect","uploadProgress","downloadProgress"];t.default=function e(t){let r,n;const o=new s.EventEmitter,m=new a((s,a,y)=>{const g=v=>{const b=new l.default(void 0,t);b.retryCount=v,b._noPipe=!0,y(()=>b.destroy()),y.shouldReject=!1,y(()=>a(new c.CancelError(b))),r=b,b.once("response",async t=>{var r;if(t.retryCount=v,t.request.aborted)return;let o;try{o=await h.default(b),t.rawBody=o}catch(e){return}if(b._isAboutToError)return;const i=(null!==(r=t.headers["content-encoding"])&&void 0!==r?r:"").toLowerCase(),a=["gzip","deflate","br"].includes(i),{options:p}=b;if(a&&!p.decompress)t.body=o;else try{t.body=u.default(t,p.responseType,p.parseJson,p.encoding)}catch(e){if(t.body=o.toString(),d.isResponseOk(t))return void b._beforeError(e)}try{for(const[r,n]of p.hooks.afterResponse.entries())t=await n(t,async t=>{const n=l.default.normalizeArguments(void 0,{...t,retry:{calculateDelay:()=>0},throwHttpErrors:!1,resolveBodyOnly:!1},p);n.hooks.afterResponse=n.hooks.afterResponse.slice(0,r);for(const e of n.hooks.beforeRetry)await e(n);const o=e(n);return y(()=>{o.catch(()=>{}),o.cancel()}),o})}catch(e){return void b._beforeError(new c.RequestError(e.message,e,b))}d.isResponseOk(t)?(n=t,s(b.options.resolveBodyOnly?t.body:t)):b._beforeError(new c.HTTPError(t))});const _=e=>{if(m.isCanceled)return;const{options:t}=b;if(e instanceof c.HTTPError&&!t.throwHttpErrors){const{response:t}=e;s(b.options.resolveBodyOnly?t.body:t)}else a(e)};b.once("error",_);const w=b.options.body;b.once("retry",(e,t)=>{var r,n;w===(null===(r=t.request)||void 0===r?void 0:r.options.body)&&i.default.nodeStream(null===(n=t.request)||void 0===n?void 0:n.options.body)?_(t):g(e)}),p.default(b,o,f)};g(0)});m.on=(e,t)=>(o.on(e,t),m);const y=e=>{const t=(async()=>{await m;const{options:t}=n.request;return u.default(n,e,t.parseJson,t.encoding)})();return Object.defineProperties(t,Object.getOwnPropertyDescriptors(m)),t};return m.json=()=>{const{headers:e}=r.options;return r.writableFinished||void 0!==e.accept||(e.accept="application/json"),y("json")},m.buffer=()=>y("buffer"),m.text=()=>y("text"),m},o(r(36),t)},function(e,t,r){var n=r(272);function o(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function s(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}e.exports=n(o),e.exports.strict=n(s),o.proto=o((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return o(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return s(this)},configurable:!0})}))},function(e,t,r){"use strict";const n=r(13),o=r(63),s=r(65),i=r(95),a=Symbol("currentStreamsCount"),c=Symbol("request"),u=Symbol("cachedOriginSet"),l=Symbol("gracefullyClosing"),p=["maxDeflateDynamicTableSize","maxSessionMemory","maxHeaderListPairs","maxOutstandingPings","maxReservedRemoteStreams","maxSendHeaderBlockLength","paddingStrategy","localAddress","path","rejectUnauthorized","minDHSize","ca","cert","clientCertEngine","ciphers","key","pfx","servername","minVersion","maxVersion","secureProtocol","crl","honorCipherOrder","ecdhCurve","dhparam","secureOptions","sessionIdContext"],h=(e,t)=>e.remoteSettings.maxConcurrentStreams>t.remoteSettings.maxConcurrentStreams,d=(e,t)=>{for(const r of e)r[u].length<t[u].length&&r[u].every(e=>t[u].includes(e))&&r[a]+t[a]<=t.remoteSettings.maxConcurrentStreams&&m(r)},f=({agent:e,isFree:t})=>{const r={};for(const n in e.sessions){const o=e.sessions[n].filter(e=>{const r=e[y.kCurrentStreamsCount]<e.remoteSettings.maxConcurrentStreams;return t?r:!r});0!==o.length&&(r[n]=o)}return r},m=e=>{e[l]=!0,0===e[a]&&e.close()};class y extends n{constructor({timeout:e=6e4,maxSessions:t=1/0,maxFreeSessions:r=10,maxCachedTlsSessions:n=100}={}){super(),this.sessions={},this.queue={},this.timeout=e,this.maxSessions=t,this.maxFreeSessions=r,this._freeSessionsCount=0,this._sessionsCount=0,this.settings={enablePush:!1},this.tlsSessionCache=new i({maxSize:n})}static normalizeOrigin(e,t){return"string"==typeof e&&(e=new URL(e)),t&&e.hostname!==t&&(e.hostname=t),e.origin}normalizeOptions(e){let t="";if(e)for(const r of p)e[r]&&(t+=":"+e[r]);return t}_tryToCreateNewSession(e,t){if(!(e in this.queue)||!(t in this.queue[e]))return;const r=this.queue[e][t];this._sessionsCount<this.maxSessions&&!r.completed&&(r.completed=!0,r())}getSession(e,t,r){return new Promise((n,o)=>{Array.isArray(r)?(r=[...r],n()):r=[{resolve:n,reject:o}];const i=this.normalizeOptions(t),p=y.normalizeOrigin(e,t&&t.servername);if(void 0===p){for(const{reject:e}of r)e(new TypeError("The `origin` argument needs to be a string or an URL object"));return}if(i in this.sessions){const e=this.sessions[i];let t,n=-1,o=-1;for(const r of e){const e=r.remoteSettings.maxConcurrentStreams;if(e<n)break;if(r[u].includes(p)){const s=r[a];if(s>=e||r[l]||r.destroyed)continue;t||(n=e),s>o&&(t=r,o=s)}}if(t){if(1!==r.length){for(const{reject:e}of r){e(new Error(`Expected the length of listeners to be 1, got ${r.length}.\nPlease report this to https://github.com/szmarczak/http2-wrapper/`))}return}return void r[0].resolve(t)}}if(i in this.queue){if(p in this.queue[i])return this.queue[i][p].listeners.push(...r),void this._tryToCreateNewSession(i,p)}else this.queue[i]={};const f=()=>{i in this.queue&&this.queue[i][p]===g&&(delete this.queue[i][p],0===Object.keys(this.queue[i]).length&&delete this.queue[i])},g=()=>{const n=`${p}:${i}`;let o=!1;try{const y=s.connect(e,{createConnection:this.createConnection,settings:this.settings,session:this.tlsSessionCache.get(n),...t});y[a]=0,y[l]=!1;const v=()=>y[a]<y.remoteSettings.maxConcurrentStreams;let b=!0;y.socket.once("session",e=>{this.tlsSessionCache.set(n,e)}),y.once("error",e=>{for(const{reject:t}of r)t(e);this.tlsSessionCache.delete(n)}),y.setTimeout(this.timeout,()=>{y.destroy()}),y.once("close",()=>{if(o){b&&this._freeSessionsCount--,this._sessionsCount--;const e=this.sessions[i];e.splice(e.indexOf(y),1),0===e.length&&delete this.sessions[i]}else{const e=new Error("Session closed without receiving a SETTINGS frame");e.code="HTTP2WRAPPER_NOSETTINGS";for(const{reject:t}of r)t(e);f()}this._tryToCreateNewSession(i,p)});const _=()=>{if(i in this.queue&&v())for(const e of y[u])if(e in this.queue[i]){const{listeners:t}=this.queue[i][e];for(;0!==t.length&&v();)t.shift().resolve(y);const r=this.queue[i];if(0===r[e].listeners.length&&(delete r[e],0===Object.keys(r).length)){delete this.queue[i];break}if(!v())break}};y.on("origin",()=>{y[u]=y.originSet,v()&&(_(),d(this.sessions[i],y))}),y.once("remoteSettings",()=>{if(y.ref(),y.unref(),this._sessionsCount++,g.destroyed){const e=new Error("Agent has been destroyed");for(const t of r)t.reject(e);y.destroy()}else{y[u]=y.originSet;{const e=this.sessions;if(i in e){const t=e[i];t.splice(((e,t,r)=>{let n=0,o=e.length;for(;n<o;){const s=n+o>>>1;r(e[s],t)?n=s+1:o=s}return n})(t,y,h),0,y)}else e[i]=[y]}this._freeSessionsCount+=1,o=!0,this.emit("session",y),_(),f(),0===y[a]&&this._freeSessionsCount>this.maxFreeSessions&&y.close(),0!==r.length&&(this.getSession(p,t,r),r.length=0),y.on("remoteSettings",()=>{_(),d(this.sessions[i],y)})}}),y[c]=y.request,y.request=(e,t)=>{if(y[l])throw new Error("The session is gracefully closing. No new streams are allowed.");const r=y[c](e,t);return y.ref(),++y[a],y[a]===y.remoteSettings.maxConcurrentStreams&&this._freeSessionsCount--,r.once("close",()=>{if(b=v(),--y[a],!y.destroyed&&!y.closed&&(((e,t)=>{for(const r of e)t[u].length<r[u].length&&t[u].every(e=>r[u].includes(e))&&t[a]+r[a]<=r.remoteSettings.maxConcurrentStreams&&m(t)})(this.sessions[i],y),v()&&!y.closed)){b||(this._freeSessionsCount++,b=!0);const e=0===y[a];e&&y.unref(),e&&(this._freeSessionsCount>this.maxFreeSessions||y[l])?y.close():(d(this.sessions[i],y),_())}}),r}}catch(e){for(const t of r)t.reject(e);f()}};g.listeners=r,g.completed=!1,g.destroyed=!1,this.queue[i][p]=g,this._tryToCreateNewSession(i,p)})}request(e,t,r,n){return new Promise((o,s)=>{this.getSession(e,t,[{reject:s,resolve:e=>{try{o(e.request(r,n))}catch(e){s(e)}}}])})}createConnection(e,t){return y.connect(e,t)}static connect(e,t){t.ALPNProtocols=["h2"];const r=e.port||443,n=e.hostname||e.host;return void 0===t.servername&&(t.servername=n),o.connect(r,n,t)}closeFreeSessions(){for(const e of Object.values(this.sessions))for(const t of e)0===t[a]&&t.close()}destroy(e){for(const t of Object.values(this.sessions))for(const r of t)r.destroy(e);for(const e of Object.values(this.queue))for(const t of Object.values(e))t.destroyed=!0;this.queue={}}get freeSessions(){return f({agent:this,isFree:!0})}get busySessions(){return f({agent:this,isFree:!1})}}y.kCurrentStreamsCount=a,y.kGracefullyClosing=l,e.exports={Agent:y,globalAgent:new y}},function(e,t,r){"use strict";class n{constructor(e={}){if(!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=e.maxSize,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(e,t){if(this.cache.set(e,t),this._size++,this._size>=this.maxSize){if(this._size=0,"function"==typeof this.onEviction)for(const[e,t]of this.oldCache.entries())this.onEviction(e,t);this.oldCache=this.cache,this.cache=new Map}}get(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e)){const t=this.oldCache.get(e);return this.oldCache.delete(e),this._set(e,t),t}}set(e,t){return this.cache.has(e)?this.cache.set(e,t):this._set(e,t),this}has(e){return this.cache.has(e)||this.oldCache.has(e)}peek(e){return this.cache.has(e)?this.cache.get(e):this.oldCache.has(e)?this.oldCache.get(e):void 0}delete(e){const t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[Symbol.iterator](){for(const e of this.cache)yield e;for(const e of this.oldCache){const[t]=e;this.cache.has(t)||(yield e)}}get size(){let e=0;for(const t of this.oldCache.keys())this.cache.has(t)||e++;return Math.min(this._size+e,this.maxSize)}}e.exports=n},function(e,t,r){"use strict";const n=r(65),{Writable:o}=r(15),{Agent:s,globalAgent:i}=r(94),a=r(97),c=r(98),u=r(286),l=r(287),{ERR_INVALID_ARG_TYPE:p,ERR_INVALID_PROTOCOL:h,ERR_HTTP_HEADERS_SENT:d,ERR_INVALID_HTTP_TOKEN:f,ERR_HTTP_INVALID_HEADER_VALUE:m,ERR_INVALID_CHAR:y}=r(288),{HTTP2_HEADER_STATUS:g,HTTP2_HEADER_METHOD:v,HTTP2_HEADER_PATH:b,HTTP2_METHOD_CONNECT:_}=n.constants,w=Symbol("headers"),x=Symbol("origin"),k=Symbol("session"),S=Symbol("options"),j=Symbol("flushedHeaders"),P=Symbol("jobs"),T=/^[\^`\-\w!#$%&*+.|~]+$/,E=/[^\t\u0020-\u007E\u0080-\u00FF]/;e.exports=class extends o{constructor(e,t,r){super({autoDestroy:!1});const n="string"==typeof e||e instanceof URL;if(n&&(e=c(e instanceof URL?e:new URL(e))),"function"==typeof t||void 0===t?(r=t,t=n?e:{...e}):t={...e,...t},t.h2session)this[k]=t.h2session;else if(!1===t.agent)this.agent=new s({maxFreeSessions:0});else if(void 0===t.agent||null===t.agent)"function"==typeof t.createConnection?(this.agent=new s({maxFreeSessions:0}),this.agent.createConnection=t.createConnection):this.agent=i;else{if("function"!=typeof t.agent.request)throw new p("options.agent",["Agent-like Object","undefined","false"],t.agent);this.agent=t.agent}if(t.protocol&&"https:"!==t.protocol)throw new h(t.protocol,"https:");const o=t.port||t.defaultPort||this.agent&&this.agent.defaultPort||443,a=t.hostname||t.host||"localhost";delete t.hostname,delete t.host,delete t.port;const{timeout:u}=t;if(t.timeout=void 0,this[w]=Object.create(null),this[P]=[],this.socket=null,this.connection=null,this.method=t.method||"GET",this.path=t.path,this.res=null,this.aborted=!1,this.reusedSocket=!1,t.headers)for(const[e,r]of Object.entries(t.headers))this.setHeader(e,r);t.auth&&!("authorization"in this[w])&&(this[w].authorization="Basic "+Buffer.from(t.auth).toString("base64")),t.session=t.tlsSession,t.path=t.socketPath,this[S]=t,443===o?(this[x]="https://"+a,":authority"in this[w]||(this[w][":authority"]=a)):(this[x]=`https://${a}:${o}`,":authority"in this[w]||(this[w][":authority"]=`${a}:${o}`)),u&&this.setTimeout(u),r&&this.once("response",r),this[j]=!1}get method(){return this[w][v]}set method(e){e&&(this[w][v]=e.toUpperCase())}get path(){return this[w][b]}set path(e){e&&(this[w][b]=e)}get _mustNotHaveABody(){return"GET"===this.method||"HEAD"===this.method||"DELETE"===this.method}_write(e,t,r){if(this._mustNotHaveABody)return void r(new Error("The GET, HEAD and DELETE methods must NOT have a body"));this.flushHeaders();const n=()=>this._request.write(e,t,r);this._request?n():this[P].push(n)}_final(e){if(this.destroyed)return;this.flushHeaders();const t=()=>{this._mustNotHaveABody?e():this._request.end(e)};this._request?t():this[P].push(t)}abort(){this.res&&this.res.complete||(this.aborted||process.nextTick(()=>this.emit("abort")),this.aborted=!0,this.destroy())}_destroy(e,t){this.res&&this.res._dump(),this._request&&this._request.destroy(),t(e)}async flushHeaders(){if(this[j]||this.destroyed)return;this[j]=!0;const e=this.method===_,t=t=>{if(this._request=t,this.destroyed)return void t.destroy();e||u(t,this,["timeout","continue","close","error"]);const r=e=>(...t)=>{this.writable||this.destroyed?this.once("finish",()=>{e(...t)}):e(...t)};t.once("response",r((r,n,o)=>{const s=new a(this.socket,t.readableHighWaterMark);this.res=s,s.req=this,s.statusCode=r[g],s.headers=r,s.rawHeaders=o,s.once("end",()=>{this.aborted?(s.aborted=!0,s.emit("aborted")):(s.complete=!0,s.socket=null,s.connection=null)}),e?(s.upgrade=!0,this.emit("connect",s,t,Buffer.alloc(0))?this.emit("close"):t.destroy()):(t.on("data",e=>{s._dumped||s.push(e)||t.pause()}),t.once("end",()=>{s.push(null)}),this.emit("response",s)||s._dump())})),t.once("headers",r(e=>this.emit("information",{statusCode:e[g]}))),t.once("trailers",r((e,t,r)=>{const{res:n}=this;n.trailers=e,n.rawTrailers=r}));const{socket:n}=t.session;this.socket=n,this.connection=n;for(const e of this[P])e();this.emit("socket",this.socket)};if(this[k])try{t(this[k].request(this[w]))}catch(e){this.emit("error",e)}else{this.reusedSocket=!0;try{t(await this.agent.request(this[x],this[S],this[w]))}catch(e){this.emit("error",e)}}}getHeader(e){if("string"!=typeof e)throw new p("name","string",e);return this[w][e.toLowerCase()]}get headersSent(){return this[j]}removeHeader(e){if("string"!=typeof e)throw new p("name","string",e);if(this.headersSent)throw new d("remove");delete this[w][e.toLowerCase()]}setHeader(e,t){if(this.headersSent)throw new d("set");if("string"!=typeof e||!T.test(e)&&!l(e))throw new f("Header name",e);if(void 0===t)throw new m(t,e);if(E.test(t))throw new y("header content",e);this[w][e.toLowerCase()]=t}setNoDelay(){}setSocketKeepAlive(){}setTimeout(e,t){const r=()=>this._request.setTimeout(e,t);return this._request?r():this[P].push(r),this}get maxHeadersCount(){if(!this.destroyed&&this._request)return this._request.session.localSettings.maxHeaderListSize}set maxHeadersCount(e){}}},function(e,t,r){"use strict";const{Readable:n}=r(15);e.exports=class extends n{constructor(e,t){super({highWaterMark:t,autoDestroy:!1}),this.statusCode=null,this.statusMessage="",this.httpVersion="2.0",this.httpVersionMajor=2,this.httpVersionMinor=0,this.headers={},this.trailers={},this.req=null,this.aborted=!1,this.complete=!1,this.upgrade=null,this.rawHeaders=[],this.rawTrailers=[],this.socket=e,this.connection=e,this._dumped=!1}_destroy(e){this.req._request.destroy(e)}setTimeout(e,t){return this.req.setTimeout(e,t),this}_dump(){this._dumped||(this._dumped=!0,this.removeAllListeners("data"),this.resume())}_read(){this.req&&this.req._request.resume()}}},function(e,t,r){"use strict";e.exports=e=>{const t={protocol:e.protocol,hostname:"string"==typeof e.hostname&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,host:e.host,hash:e.hash,search:e.search,pathname:e.pathname,href:e.href,path:`${e.pathname||""}${e.search||""}`};return"string"==typeof e.port&&0!==e.port.length&&(t.port=Number(e.port)),(e.username||e.password)&&(t.auth=`${e.username||""}:${e.password||""}`),t}},function(e,t){e.exports=require("net")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(11);t.default=e=>n.default.nodeStream(e)&&n.default.function_(e.getBoundary)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){const n={};for(const o of r)n[o]=(...e)=>{t.emit(o,...e)},e.on(o,n[o]);return()=>{for(const t of r)e.off(t,n[t])}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=async e=>{const t=[];let r=0;for await(const n of e)t.push(n),r+=Buffer.byteLength(n);return Buffer.isBuffer(t[0])?Buffer.concat(t,r):Buffer.from(t.join(""))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isResponseOk=void 0,t.isResponseOk=e=>{const{statusCode:t}=e,r=e.request.options.followRedirect?299:399;return t>=200&&t<=r||304===t}},function(e,t,r){"use strict";function n(e){this.shopify=e,this.name="access_scopes"}n.prototype.list=function(){const e={pathname:`/admin/oauth/${this.name}.json`,...this.shopify.baseUrl};return this.shopify.request(e,"GET",this.name)},e.exports=n},function(e,t,r){"use strict";const n=r(0),o=r(4),s=r(1);function i(e){this.shopify=e,this.name="api_permissions",this.key="api_permission"}n(i.prototype,o(s,"buildUrl")),i.prototype.delete=function(){const e=this.buildUrl("current");return this.shopify.request(e,"DELETE")},e.exports=i},function(e,t,r){var n=r(107);e.exports=function(e,t,r){"__proto__"==t&&n?n(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}},function(e,t,r){var n=r(12),o=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},function(e,t,r){var n=r(310),o=Math.max;e.exports=function(e,t,r){return t=o(void 0===t?e.length-1:t,0),function(){for(var s=arguments,i=-1,a=o(s.length-t,0),c=Array(a);++i<a;)c[i]=s[t+i];i=-1;for(var u=Array(t+1);++i<t;)u[i]=s[i];return u[t]=r(c),n(e,this,u)}}},function(e,t,r){var n=r(311),o=r(313)(n);e.exports=o},function(e,t,r){var n=r(318),o=r(108),s=r(109);e.exports=function(e){return s(o(e,void 0,n),e+"")}},function(e,t,r){"use strict";var n=String.prototype.replace,o=/%20/g,s=r(66),i={RFC1738:"RFC1738",RFC3986:"RFC3986"};e.exports=s.assign({default:i.RFC3986,formatters:{RFC1738:function(e){return n.call(e,o,"+")},RFC3986:function(e){return String(e)}}},i)},function(e,t,r){"use strict";const n=r(0),o=r(2),s=r(1);function i(e){this.shopify=e,this.name="application_charges",this.key="application_charge"}n(i.prototype,o(s,["count","delete","update"])),i.prototype.activate=function(e,t){const r=this.buildUrl(e+"/activate");return this.shopify.request(r,"POST",this.key,t)},e.exports=i},function(e,t,r){var n=r(55),o=r(35),s=r(56),i=r(86),a=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)n(t,s(e)),e=o(e);return t}:i;e.exports=a},function(e,t,r){var n=r(85),o=r(113),s=r(67);e.exports=function(e){return n(e,s,o)}},function(e,t,r){"use strict";const n=r(0),o=r(2),s=r(1);function i(e){this.shopify=e,this.name="application_credits",this.key="application_credit"}n(i.prototype,o(s,["count","delete","update"])),e.exports=i},function(e,t,r){"use strict";const n=r(0),o=r(22),s=r(5),i=r(1);function a(e){this.shopify=e,this.parentName="blogs",this.name="articles",this.key="article"}n(a.prototype,s),a.prototype.authors=function(){const e=i.buildUrl.call(this,"authors");return this.shopify.request(e,"GET","authors")},a.prototype.tags=function(e,t){let r="/admin";t||"object"!=typeof e||(t=e,e=void 0),(e||0===e)&&(r+="/blogs/"+e),r+=`/${this.name}/tags.json`;const s={pathname:r};return t&&(s.search="?"+o.stringify(t,{arrayFormat:"brackets"})),this.shopify.request(n(s,this.shopify.baseUrl),"GET","tags")},e.exports=a},function(e,t,r){"use strict";const n=r(0),o=r(4),s=r(5);function i(e){this.shopify=e,this.parentName="themes",this.name="assets",this.key="asset"}n(i.prototype,o(s,["list","buildUrl"])),i.prototype.get=function(e,t){const r=this.buildUrl(e,void 0,t);return this.shopify.request(r,"GET",this.key)},i.prototype.create=function(e,t){const r=this.buildUrl(e);return this.shopify.request(r,"PUT",this.key,t)},i.prototype.update=i.prototype.create,i.prototype.delete=function(e,t){const r=this.buildUrl(e,void 0,t);return this.shopify.request(r,"DELETE")},e.exports=i},function(e,t,r){"use strict";const n=r(69),o=r(1);function s(e){this.shopify=e,this.name="balance"}s.prototype.list=o.list,s.prototype.buildUrl=n.buildUrl,s.prototype.transactions=function(e){const t=this.buildUrl("transactions",e);return this.shopify.request(t,"GET","transactions")},e.exports=s},function(e,t,r){"use strict";const n=r(0),o=r(1);function s(e){this.shopify=e,this.name="blogs",this.key="blog"}n(s.prototype,o),e.exports=s},function(e,t,r){"use strict";const n=r(0),o=r(4),s=r(5);function i(e){this.shopify=e,this.parentName="fulfillment_orders",this.key=this.name="cancellation_request"}n(i.prototype,o(s,"buildUrl")),i.prototype.create=function(e,t=""){const r=this.buildUrl(e);return this.shopify.request(r,"POST",void 0,{[this.key]:{message:t}}).then(e=>e.fulfillment_order)},i.prototype.accept=function(e,t=""){const r=this.buildUrl(e,"accept");return this.shopify.request(r,"POST",void 0,{[this.key]:{message:t}}).then(e=>e.fulfillment_order)},i.prototype.reject=function(e,t=""){const r=this.buildUrl(e,"reject");return this.shopify.request(r,"POST",void 0,{[this.key]:{message:t}}).then(e=>e.fulfillment_order)},e.exports=i},function(e,t,r){"use strict";const n=r(0),o=r(2),s=r(1);function i(e){this.shopify=e,this.name="carrier_services",this.key="carrier_service"}n(i.prototype,o(s,["count"])),e.exports=i},function(e,t,r){"use strict";const n=r(0),o=r(2),s=r(1);function i(e){this.shopify=e,this.name="checkouts",this.key="checkout"}n(i.prototype,o(s,"delete")),i.prototype.complete=function(e){const t=this.buildUrl(e+"/complete");return this.shopify.request(t,"POST",void 0,{}).then(e=>e[this.key])},i.prototype.shippingRates=function(e){const t=this.buildUrl(e+"/shipping_rates");return this.shopify.request(t,"GET","shipping_rates")},e.exports=i},function(e,t,r){"use strict";const n=r(0),o=r(2),s=r(1);function i(e){this.shopify=e,this.name="collects",this.key="collect"}n(i.prototype,o(s,["update"])),e.exports=i},function(e,t,r){"use strict";const n=r(0),o=r(4),s=r(1);function i(e){this.shopify=e,this.name="collections",this.key="collection"}n(i.prototype,o(s,["get","buildUrl"])),i.prototype.products=function(e,t){const r=this.buildUrl(e+"/products",t);return this.shopify.request(r,"GET","products")},e.exports=i},function(e,t,r){"use strict";const n=r(0),o=r(4),s=r(1);function i(e){this.shopify=e,this.name="collection_listings",this.key="collection_listing"}n(i.prototype,o(s,["get","list","buildUrl"])),i.prototype.productIds=function(e,t){const r=this.buildUrl(e+"/product_ids",t);return this.shopify.request(r,"GET","product_ids")},e.exports=i},function(e,t,r){"use strict";const n=r(0),o=r(2),s=r(1);function i(e){this.shopify=e,this.name="comments",this.key="comment"}n(i.prototype,o(s,["delete"])),i.prototype.spam=function(e){const t=this.buildUrl(e+"/spam");return this.shopify.request(t,"POST",void 0,{})},i.prototype.notSpam=function(e){const t=this.buildUrl(e+"/not_spam");return this.shopify.request(t,"POST",void 0,{})},i.prototype.approve=function(e){const t=this.buildUrl(e+"/approve");return this.shopify.request(t,"POST",void 0,{})},i.prototype.remove=function(e){const t=this.buildUrl(e+"/remove");return this.shopify.request(t,"POST",void 0,{})},i.prototype.restore=function(e){const t=this.buildUrl(e+"/restore");return this.shopify.request(t,"POST",void 0,{})},e.exports=i},function(e,t,r){"use strict";const n=r(0),o=r(1);function s(e){this.shopify=e,this.name="countries",this.key="country"}n(s.prototype,o),e.exports=s},function(e,t,r){"use strict";const n=r(0),o=r(4),s=r(1);function i(e){this.shopify=e,this.name="currencies"}n(i.prototype,o(s,["list","buildUrl"])),e.exports=i},function(e,t,r){"use strict";const n=r(0),o=r(1);function s(e){this.shopify=e,this.name="custom_collections",this.key="custom_collection"}n(s.prototype,o),e.exports=s},function(e,t,r){"use strict";const n=r(0),o=r(1);function s(e){this.shopify=e,this.name="customers",this.key="customer"}n(s.prototype,o),s.prototype.search=function(e){const t=this.buildUrl("search",e);return this.shopify.request(t,"GET",this.name)},s.prototype.accountActivationUrl=function(e){const t=this.buildUrl(e+"/account_activation_url");return this.shopify.request(t,"POST",void 0,{customer:{id:e}}).then(e=>e.account_activation_url)},s.prototype.sendInvite=function(e,t){const r=this.buildUrl(e+"/send_invite");return this.shopify.request(r,"POST","customer_invite",t||{})},s.prototype.orders=function(e,t){const r=this.buildUrl(e+"/orders",t);return this.shopify.request(r,"GET","orders")},e.exports=s},function(e,t,r){"use strict";const n=r(0),o=r(4),s=r(5);function i(e){this.shopify=e,this.parentName="customers",this.name="addresses",this.key="customer_address"}n(i.prototype,o(s,["buildUrl","delete","get"])),i.prototype.list=function(e,t){const r=this.buildUrl(e,void 0,t);return this.shopify.request(r,"GET",this.name)},i.prototype.create=function(e,t){const r=this.buildUrl(e);return this.shopify.request(r,"POST",void 0,{address:t}).then(e=>e[this.key])},i.prototype.update=function(e,t,r){const n=this.buildUrl(e,t);return this.shopify.request(n,"PUT",void 0,{address:r}).then(e=>e[this.key])},i.prototype.set=function(e,t){const r=this.buildUrl(e,"set",t);return this.shopify.request(r,"PUT")},i.prototype.default=function(e,t){const r=this.buildUrl(e,t+"/default");return this.shopify.request(r,"PUT",this.key)},e.exports=i},function(e,t,r){"use strict";const n=r(0),o=r(1);function s(e){this.shopify=e,this.name="customer_saved_searches",this.key="customer_saved_search"}n(s.prototype,o),s.prototype.customers=function(e,t){const r=this.buildUrl(e+"/customers",t);return this.shopify.request(r,"GET","customers")},e.exports=s},function(e,t,r){"use strict";const n=r(0),o=r(2),s=r(5),i=r(1);function a(e){this.shopify=e,this.parentName="price_rules",this.name="discount_codes",this.key="discount_code"}n(a.prototype,o(s,"count")),a.prototype.lookup=function(e){const t=i.buildUrl.call(this,"lookup",e);return this.shopify.request(t,"GET",this.key)},e.exports=a},function(e,t,r){"use strict";const n=r(0),o=r(4),s=r(5);function i(e){this.shopify=e,this.parentName="price_rules",this.name="batch",this.key="discount_code_creation"}n(i.prototype,o(s,["buildUrl","get"])),i.prototype.create=function(e,t){const r=this.buildUrl(e);return this.shopify.request(r,"POST",void 0,{discount_codes:t}).then(e=>e[this.key])},i.prototype.discountCodes=function(e,t){const r=this.buildUrl(e,t+"/discount_codes");return this.shopify.request(r,"GET","discount_codes")},e.exports=i},function(e,t,r){"use strict";const n=r(0),o=r(4),s=r(69),i=r(1);function a(e){this.shopify=e,this.name="disputes",this.key="dispute"}n(a.prototype,o(i,["get","list"])),a.prototype.buildUrl=s.buildUrl,e.exports=a},function(e,t,r){"use strict";const n=r(0),o=r(1);function s(e){this.shopify=e,this.name="draft_orders",this.key="draft_order"}n(s.prototype,o),s.prototype.complete=function(e,t){const r=this.buildUrl(e+"/complete",t);return this.shopify.request(r,"PUT",this.key)},s.prototype.sendInvoice=function(e,t){const r=this.buildUrl(e+"/send_invoice");return this.shopify.request(r,"POST","draft_order_invoice",t)},e.exports=s},function(e,t,r){"use strict";const n=r(0),o=r(2),s=r(1);function i(e){this.shopify=e,this.name="events",this.key="event"}n(i.prototype,o(s,["create","delete","update"])),e.exports=i},function(e,t,r){"use strict";const n=r(0),o=r(2),s=r(1),i=r(5);function a(e){this.shopify=e,this.parentName="orders",this.name="fulfillments",this.key="fulfillment"}n(a.prototype,o(i,["delete"])),a.prototype.complete=function(e,t){const r=this.buildUrl(e,t+"/complete");return this.shopify.request(r,"POST",void 0,{}).then(e=>e[this.key])},a.prototype.open=function(e,t){const r=this.buildUrl(e,t+"/open");return this.shopify.request(r,"POST",void 0,{}).then(e=>e[this.key])},a.prototype.cancel=function(e,t){const r=this.buildUrl(e,t+"/cancel");return this.shopify.request(r,"POST",void 0,{}).then(e=>e[this.key])},a.prototype.createV2=function(e){const t=s.buildUrl.call(this);return this.shopify.request(t,"POST",this.key,e)},a.prototype.updateTracking=function(e,t){const r=s.buildUrl.call(this,e+"/update_tracking");return this.shopify.request(r,"POST",this.key,t)},e.exports=a},function(e,t,r){"use strict";const n=r(22);function o(e){this.shopify=e,this.parentName="fulfillments",this.key="fulfillment_event",this.name="events"}o.prototype.list=function(e,t,r){const n=this.buildUrl(e,t,void 0,r);return this.shopify.request(n,"GET",this.key+"s")},o.prototype.get=function(e,t,r){const n=this.buildUrl(e,t,r);return this.shopify.request(n,"GET",this.key)},o.prototype.create=function(e,t,r){const n=this.buildUrl(e,t);return this.shopify.request(n,"POST",void 0,{event:r}).then(e=>e[this.key])},o.prototype.update=function(e,t,r,n){const o=this.buildUrl(e,t,r);return this.shopify.request(o,"PUT",void 0,{event:n}).then(e=>e[this.key])},o.prototype.delete=function(e,t,r){const n=this.buildUrl(e,t,r);return this.shopify.request(n,"DELETE")},o.prototype.buildUrl=function(e,t,r,o){r||0===r||(r="");let s=["admin"];this.shopify.options.apiVersion&&s.push("api/"+this.shopify.options.apiVersion),s.push("orders",e,this.parentName,t,this.name,r),s=s.join("/").replace(/\/+/g,"/").replace(/\/$/,"")+".json";const i={pathname:s,...this.shopify.baseUrl};return o&&(i.search="?"+n.stringify(o,{arrayFormat:"brackets"})),i},e.exports=o},function(e,t,r){"use strict";const n=r(0),o=r(4),s=r(1);function i(e){this.shopify=e,this.name="fulfillment_orders",this.key="fulfillment_order"}n(i.prototype,o(s,["get","buildUrl"])),i.prototype.list=function(e){const t=s.buildUrl.call({...this,name:"assigned_fulfillment_orders"},void 0,e);return this.shopify.request(t,"GET",this.name)},i.prototype.cancel=function(e,t){const r=this.buildUrl(e+"/cancel");return this.shopify.request(r,"POST",this.key,t)},i.prototype.close=function(e,t=""){const r=this.buildUrl(e+"/close");return this.shopify.request(r,"POST",this.key,{message:t})},i.prototype.move=function(e,t){const r=this.buildUrl(e+"/move");return this.shopify.request(r,"POST",void 0,{fulfillment_order:{new_location_id:t}}).then(e=>e.original_fulfillment_order)},i.prototype.locationsForMove=function(e){const t=this.buildUrl(e+"/locations_for_move");return this.shopify.request(t,"GET","locations_for_move")},e.exports=i},function(e,t,r){"use strict";const n=r(0),o=r(4),s=r(5);function i(e){this.shopify=e,this.parentName="fulfillment_orders",this.key=this.name="fulfillment_request"}n(i.prototype,o(s,"buildUrl")),i.prototype.create=function(e,t){const r=this.buildUrl(e);return this.shopify.request(r,"POST",void 0,{[this.key]:t}).then(e=>e.original_fulfillment_order)},i.prototype.accept=function(e,t=""){const r=this.buildUrl(e,"accept");return this.shopify.request(r,"POST",void 0,{[this.key]:{message:t}}).then(e=>e.fulfillment_order)},i.prototype.reject=function(e,t=""){const r=this.buildUrl(e,"reject");return this.shopify.request(r,"POST",void 0,{[this.key]:{message:t}}).then(e=>e.fulfillment_order)},e.exports=i},function(e,t,r){"use strict";const n=r(0),o=r(2),s=r(1);function i(e){this.shopify=e,this.name="fulfillment_services",this.key="fulfillment_service"}n(i.prototype,o(s,["count"])),e.exports=i},function(e,t,r){"use strict";const n=r(0),o=r(2),s=r(1);function i(e){this.shopify=e,this.name="gift_cards",this.key="gift_card"}n(i.prototype,o(s,["delete"])),i.prototype.disable=function(e){const t=this.buildUrl(e+"/disable");return this.shopify.request(t,"POST",this.key,{id:e})},i.prototype.search=function(e){const t=this.buildUrl("search",e);return this.shopify.request(t,"GET",this.name)},e.exports=i},function(e,t,r){"use strict";const n=r(0),o=r(2),s=r(5);function i(e){this.shopify=e,this.parentName="gift_cards",this.name="adjustments",this.key="adjustment"}n(i.prototype,o(s,["count","delete","update"])),e.exports=i},function(e,t,r){"use strict";const n=r(0),o=r(2),s=r(1);function i(e){this.shopify=e,this.name="inventory_items",this.key="inventory_item"}n(i.prototype,o(s,["count","create","delete"])),e.exports=i},function(e,t,r){"use strict";const n=r(0),o=r(4),s=r(1);function i(e){this.shopify=e,this.name="inventory_levels",this.key="inventory_level"}n(i.prototype,o(s,["list","buildUrl"])),i.prototype.adjust=function(e){const t=this.buildUrl("adjust");return this.shopify.request(t,"POST",void 0,e).then(e=>e[this.key])},i.prototype.connect=function(e){const t=this.buildUrl("connect");return this.shopify.request(t,"POST",void 0,e).then(e=>e[this.key])},i.prototype.delete=function(e){const t=this.buildUrl(void 0,e);return this.shopify.request(t,"DELETE")},i.prototype.set=function(e){const t=this.buildUrl("set");return this.shopify.request(t,"POST",void 0,e).then(e=>e[this.key])},e.exports=i},function(e,t,r){"use strict";const n=r(0),o=r(2),s=r(1);function i(e){this.shopify=e,this.name="locations",this.key="location"}n(i.prototype,o(s,["create","delete","update"])),i.prototype.inventoryLevels=function(e,t){const r="inventory_levels",n=this.buildUrl(`${e}/${r}`,t);return this.shopify.request(n,"GET",r)},e.exports=i},function(e,t,r){"use strict";const n=r(0),o=r(1);function s(e){this.shopify=e,this.name="marketing_events",this.key="marketing_event"}n(s.prototype,o),s.prototype.engagements=function(e,t){const r=this.buildUrl(e+"/engagements");return this.shopify.request(r,"POST","engagements",t)},e.exports=s},function(e,t,r){"use strict";const n=r(0),o=r(1);function s(e){this.shopify=e,this.name="metafields",this.key="metafield"}n(s.prototype,o),e.exports=s},function(e,t,r){"use strict";const n=r(0),o=r(1);function s(e){this.shopify=e,this.name="orders",this.key="order"}n(s.prototype,o),s.prototype.close=function(e){const t=this.buildUrl(e+"/close");return this.shopify.request(t,"POST",void 0,{}).then(e=>e[this.key])},s.prototype.open=function(e){const t=this.buildUrl(e+"/open");return this.shopify.request(t,"POST",void 0,{}).then(e=>e[this.key])},s.prototype.cancel=function(e,t){const r=this.buildUrl(e+"/cancel");return this.shopify.request(r,"POST",void 0,t).then(e=>e[this.key])},s.prototype.fulfillmentOrders=function(e){const t=this.buildUrl(e+"/fulfillment_orders");return this.shopify.request(t,"GET","fulfillment_orders")},e.exports=s},function(e,t,r){"use strict";const n=r(0),o=r(2),s=r(5);function i(e){this.shopify=e,this.parentName="orders",this.name="risks",this.key="risk"}n(i.prototype,o(s,["count"])),e.exports=i},function(e,t,r){"use strict";const n=r(0),o=r(1);function s(e){this.shopify=e,this.name="pages",this.key="page"}n(s.prototype,o),e.exports=s},function(e,t,r){"use strict";const n=r(0),o=r(2),s=r(5);function i(e){this.shopify=e,this.parentName="checkouts",this.name="payments",this.key="payment"}n(i.prototype,o(s,["delete","update"])),e.exports=i},function(e,t,r){"use strict";const n=r(0),o=r(4),s=r(69),i=r(1);function a(e){this.shopify=e,this.name="payouts",this.key="payout"}n(a.prototype,o(i,["get","list"])),a.prototype.buildUrl=s.buildUrl,e.exports=a},function(e,t,r){"use strict";const n=r(0),o=r(4),s=r(1);function i(e){this.shopify=e,this.name=this.key="policies"}n(i.prototype,o(s,["list","buildUrl"])),e.exports=i},function(e,t,r){"use strict";const n=r(0),o=r(2),s=r(1);function i(e){this.shopify=e,this.name="price_rules",this.key="price_rule"}n(i.prototype,o(s,"count")),e.exports=i},function(e,t,r){"use strict";const n=r(0),o=r(4),s=r(1);function i(e){this.shopify=e,this.name="products",this.key="product"}n(i.prototype,o(s,["buildUrl","delete","count"])),i.prototype.get=function(e,t){const r=this.buildUrl(e,t),n={};return this.shopify.options.presentmentPrices&&(n["X-Shopify-Api-Features"]="include-presentment-prices"),this.shopify.request(r,"GET",this.key,void 0,n)},i.prototype.create=function(e){const t=this.buildUrl(),r={};return this.shopify.options.presentmentPrices&&(r["X-Shopify-Api-Features"]="include-presentment-prices"),this.shopify.request(t,"POST",this.key,e,r)},i.prototype.list=function(e){const t=this.buildUrl(void 0,e),r={};return this.shopify.options.presentmentPrices&&(r["X-Shopify-Api-Features"]="include-presentment-prices"),this.shopify.request(t,"GET",this.name,void 0,r)},i.prototype.update=function(e,t){const r=this.buildUrl(e),n={};return this.shopify.options.presentmentPrices&&(n["X-Shopify-Api-Features"]="include-presentment-prices"),this.shopify.request(r,"PUT",this.key,t,n)},e.exports=i},function(e,t,r){"use strict";const n=r(0),o=r(5);function s(e){this.shopify=e,this.parentName="products",this.name="images",this.key="image"}n(s.prototype,o),e.exports=s},function(e,t,r){"use strict";const n=r(0),o=r(4),s=r(1);function i(e){this.shopify=e,this.name="product_listings",this.key="product_listing"}n(i.prototype,o(s,["count","buildUrl","delete"])),i.prototype.get=function(e,t){const r=this.buildUrl(e,t),n={};return this.shopify.options.presentmentPrices&&(n["X-Shopify-Api-Features"]="include-presentment-prices"),this.shopify.request(r,"GET",this.key,void 0,n)},i.prototype.list=function(e){const t=this.buildUrl(void 0,e),r={};return this.shopify.options.presentmentPrices&&(r["X-Shopify-Api-Features"]="include-presentment-prices"),this.shopify.request(t,"GET",this.name,void 0,r)},i.prototype.create=function(e,t){t||(t={product_id:e});const r=this.buildUrl(e),n={};return this.shopify.options.presentmentPrices&&(n["X-Shopify-Api-Features"]="include-presentment-prices"),this.shopify.request(r,"PUT",this.key,t,n)},i.prototype.productIds=function(e){const t="product_ids",r=this.buildUrl(t,e);return this.shopify.request(r,"GET",t)},e.exports=i},function(e,t,r){"use strict";const n=r(0),o=r(4),s=r(5);function i(e){this.shopify=e,this.parentName="products",this.key=this.name="resource_feedback"}n(i.prototype,o(s,["buildUrl","create","list"])),e.exports=i},function(e,t,r){"use strict";const n=r(0),o=r(4),s=r(5),i=r(1);function a(e){this.shopify=e,this.parentName="products",this.name="variants",this.key="variant"}n(a.prototype,o(s,["buildUrl","count","delete"])),a.prototype.get=function(e,t){const r=i.buildUrl.call(this,e,t),n={};return this.shopify.options.presentmentPrices&&(n["X-Shopify-Api-Features"]="include-presentment-prices"),this.shopify.request(r,"GET",this.key,void 0,n)},a.prototype.create=function(e,t){const r=this.buildUrl(e),n={};return this.shopify.options.presentmentPrices&&(n["X-Shopify-Api-Features"]="include-presentment-prices"),this.shopify.request(r,"POST",this.key,t,n)},a.prototype.list=function(e,t){const r=this.buildUrl(e,void 0,t),n={};return this.shopify.options.presentmentPrices&&(n["X-Shopify-Api-Features"]="include-presentment-prices"),this.shopify.request(r,"GET",this.name,void 0,n)},a.prototype.update=function(e,t){const r=i.buildUrl.call(this,e),n={};return this.shopify.options.presentmentPrices&&(n["X-Shopify-Api-Features"]="include-presentment-prices"),this.shopify.request(r,"PUT",this.key,t,n)},e.exports=a},function(e,t,r){"use strict";const n=r(0),o=r(2),s=r(5);function i(e){this.shopify=e,this.parentName="countries",this.name="provinces",this.key="province"}n(i.prototype,o(s,["create","delete"])),e.exports=i},function(e,t,r){"use strict";const n=r(0),o=r(2),s=r(1);function i(e){this.shopify=e,this.name="recurring_application_charges",this.key="recurring_application_charge"}n(i.prototype,o(s,["count","update"])),i.prototype.activate=function(e,t){const r=this.buildUrl(e+"/activate");return this.shopify.request(r,"POST",void 0,{[this.key]:t}).then(e=>e[this.key])},i.prototype.customize=function(e,t){const r=this.buildUrl(e+"/customize",{[this.key]:t});return this.shopify.request(r,"PUT",this.key)},e.exports=i},function(e,t,r){"use strict";const n=r(0),o=r(1);function s(e){this.shopify=e,this.name="redirects",this.key="redirect"}n(s.prototype,o),e.exports=s},function(e,t,r){"use strict";const n=r(0),o=r(2),s=r(5);function i(e){this.shopify=e,this.parentName="orders",this.name="refunds",this.key="refund"}n(i.prototype,o(s,["count","delete","update"])),i.prototype.calculate=function(e,t){const r=this.buildUrl(e,"calculate");return this.shopify.request(r,"POST",this.key,t)},e.exports=i},function(e,t,r){"use strict";const n=r(0),o=r(2),s=r(1);function i(e){this.shopify=e,this.name="reports",this.key="report"}n(i.prototype,o(s,"count")),e.exports=i},function(e,t,r){"use strict";const n=r(0),o=r(2),s=r(1);function i(e){this.shopify=e,this.name="resource_feedback",this.key="resource_feedback"}n(i.prototype,o(s,["count","delete","get","update"])),e.exports=i},function(e,t,r){"use strict";const n=r(0),o=r(1);function s(e){this.shopify=e,this.name="script_tags",this.key="script_tag"}n(s.prototype,o),e.exports=s},function(e,t,r){"use strict";const n=r(0),o=r(4),s=r(1);function i(e){this.shopify=e,this.name=this.key="shipping_zones"}n(i.prototype,o(s,["list","buildUrl"])),e.exports=i},function(e,t,r){"use strict";const n=r(0),o=r(4),s=r(1);function i(e){this.shopify=e,this.name=this.key="shop"}n(i.prototype,o(s,"buildUrl")),i.prototype.get=function(e){const t=this.buildUrl(void 0,e);return this.shopify.request(t,"GET",this.key)},e.exports=i},function(e,t,r){"use strict";const n=r(0),o=r(1);function s(e){this.shopify=e,this.name="smart_collections",this.key="smart_collection"}n(s.prototype,o),s.prototype.order=function(e,t){const r=this.buildUrl(e+"/order",t);return this.shopify.request(r,"PUT",void 0,{})},s.prototype.products=function(e,t){const r=this.buildUrl(e+"/products",t);return this.shopify.request(r,"GET","products")},e.exports=s},function(e,t,r){"use strict";const n=r(0),o=r(2),s=r(1);function i(e){this.shopify=e,this.name="storefront_access_tokens",this.key="storefront_access_token"}n(i.prototype,o(s,["count","get","update"])),e.exports=i},function(e,t,r){"use strict";const n=r(0),o=r(4),s=r(1);function i(e){this.shopify=e,this.name="tender_transactions"}n(i.prototype,o(s,["list","buildUrl"])),e.exports=i},function(e,t,r){"use strict";const n=r(0),o=r(2),s=r(1);function i(e){this.shopify=e,this.name="themes",this.key="theme"}n(i.prototype,o(s,["count"])),e.exports=i},function(e,t,r){"use strict";const n=r(0),o=r(2),s=r(5);function i(e){this.shopify=e,this.parentName="orders",this.name="transactions",this.key="transaction"}n(i.prototype,o(s,["delete","update"])),e.exports=i},function(e,t,r){"use strict";const n=r(0),o=r(2),s=r(5);function i(e){this.shopify=e,this.parentName="recurring_application_charges",this.name="usage_charges",this.key="usage_charge"}n(i.prototype,o(s,["count","delete","update"])),e.exports=i},function(e,t,r){"use strict";const n=r(0),o=r(4),s=r(1);function i(e){this.shopify=e,this.name="users",this.key="user"}n(i.prototype,o(s,["get","list","buildUrl"])),i.prototype.current=function(){return this.get("current")},e.exports=i},function(e,t,r){"use strict";const n=r(0),o=r(1);function s(e){this.shopify=e,this.name="webhooks",this.key="webhook"}n(s.prototype,o),e.exports=s},function(e,t,r){var n=r(183),o=r(184),s=r(74),i=r(185);e.exports=function(e){return n(e)||o(e)||s(e)||i()}},function(e,t){e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},function(e,t){function r(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=r=function(e){return typeof e}:e.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(t)}e.exports=r},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SessionStore=t.MemoryStore=t.expressSession=t.promisifyStore=t.applySession=t.session=t.withSession=void 0;var o=r(349);Object.defineProperty(t,"withSession",{enumerable:!0,get:function(){return n(o).default}});var s=r(353);Object.defineProperty(t,"session",{enumerable:!0,get:function(){return n(s).default}});var i=r(70);Object.defineProperty(t,"applySession",{enumerable:!0,get:function(){return i.applySession}});var a=r(354);Object.defineProperty(t,"promisifyStore",{enumerable:!0,get:function(){return a.promisifyStore}}),Object.defineProperty(t,"expressSession",{enumerable:!0,get:function(){return a.expressSession}});var c=r(71);Object.defineProperty(t,"MemoryStore",{enumerable:!0,get:function(){return n(c).default}});var u=r(355);Object.defineProperty(t,"SessionStore",{enumerable:!0,get:function(){return u.SessionStore}})},function(e,t,r){var n=r(73);e.exports=function(e){if(Array.isArray(e))return n(e)}},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,s=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,s=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw s}}return r}}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,r){var n=function(e){"use strict";var t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",s=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function a(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{a({},"")}catch(e){a=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var o=t&&t.prototype instanceof p?t:p,s=Object.create(o.prototype),i=new k(n||[]);return s._invoke=function(e,t,r){var n="suspendedStart";return function(o,s){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw s;return j()}for(r.method=o,r.arg=s;;){var i=r.delegate;if(i){var a=_(i,r);if(a){if(a===l)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(e,r,i),s}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var l={};function p(){}function h(){}function d(){}var f={};f[o]=function(){return this};var m=Object.getPrototypeOf,y=m&&m(m(S([])));y&&y!==t&&r.call(y,o)&&(f=y);var g=d.prototype=p.prototype=Object.create(f);function v(e){["next","throw","return"].forEach((function(t){a(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var n;this._invoke=function(o,s){function i(){return new t((function(n,i){!function n(o,s,i,a){var c=u(e[o],e,s);if("throw"!==c.type){var l=c.arg,p=l.value;return p&&"object"==typeof p&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,i,a)}),(function(e){n("throw",e,i,a)})):t.resolve(p).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,a)}))}a(c.arg)}(o,s,n,i)}))}return n=n?n.then(i,i):i()}}function _(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function S(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,s=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return s.next=s}}return{next:j}}function j(){return{value:void 0,done:!0}}return h.prototype=g.constructor=d,d.constructor=h,h.displayName=a(d,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,a(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},v(b.prototype),b.prototype[s]=function(){return this},e.AsyncIterator=b,e.async=function(t,r,n,o,s){void 0===s&&(s=Promise);var i=new b(c(t,r,n,o),s);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(g),a(g,i,"Generator"),g[o]=function(){return this},g.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=S,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],i=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var a=r.call(s,"catchLoc"),c=r.call(s,"finallyLoc");if(a&&c){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(a){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var s=o;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var i=s?s.completion:{};return i.type=e,i.arg=t,s?(this.method="next",this.next=s.finallyLoc,l):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:S(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}(e.exports);try{regeneratorRuntime=n}catch(e){Function("r","regeneratorRuntime = r")(n)}},function(e,t,r){var n=r(75),o=r(76),s=r(191),i=r(202),a=r(35),c=r(7),u=r(24),l=r(51),p=r(9),h=r(47);e.exports=function(e,t,r){var d=c(e),f=d||u(e)||h(e);if(t=i(t,4),null==r){var m=e&&e.constructor;r=f?d?new m:[]:p(e)&&l(m)?o(a(e)):{}}return(f?n:s)(e,(function(e,n,o){return t(r,e,n,o)})),r}},function(e,t,r){var n=r(192),o=r(16);e.exports=function(e,t){return e&&n(e,t,o)}},function(e,t,r){var n=r(193)();e.exports=n},function(e,t){e.exports=function(e){return function(t,r,n){for(var o=-1,s=Object(t),i=n(t),a=i.length;a--;){var c=i[e?a:++o];if(!1===r(s[c],c,s))break}return t}}},function(e,t){e.exports=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}},function(e,t,r){var n=r(17),o=r(10);e.exports=function(e){return o(e)&&"[object Arguments]"==n(e)}},function(e,t,r){var n=r(18),o=Object.prototype,s=o.hasOwnProperty,i=o.toString,a=n?n.toStringTag:void 0;e.exports=function(e){var t=s.call(e,a),r=e[a];try{e[a]=void 0;var n=!0}catch(e){}var o=i.call(e);return n&&(t?e[a]=r:delete e[a]),o}},function(e,t){var r=Object.prototype.toString;e.exports=function(e){return r.call(e)}},function(e,t){e.exports=function(){return!1}},function(e,t,r){var n=r(17),o=r(48),s=r(10),i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1,e.exports=function(e){return s(e)&&o(e.length)&&!!i[n(e)]}},function(e,t,r){var n=r(26),o=r(201),s=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return o(e);var t=[];for(var r in Object(e))s.call(e,r)&&"constructor"!=r&&t.push(r);return t}},function(e,t,r){var n=r(79)(Object.keys,Object);e.exports=n},function(e,t,r){var n=r(203),o=r(247),s=r(59),i=r(7),a=r(256);e.exports=function(e){return"function"==typeof e?e:null==e?s:"object"==typeof e?i(e)?o(e[0],e[1]):n(e):a(e)}},function(e,t,r){var n=r(204),o=r(246),s=r(88);e.exports=function(e){var t=o(e);return 1==t.length&&t[0][2]?s(t[0][0],t[0][1]):function(r){return r===e||n(r,e,t)}}},function(e,t,r){var n=r(52),o=r(81);e.exports=function(e,t,r,s){var i=r.length,a=i,c=!s;if(null==e)return!a;for(e=Object(e);i--;){var u=r[i];if(c&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++i<a;){var l=(u=r[i])[0],p=e[l],h=u[1];if(c&&u[2]){if(void 0===p&&!(l in e))return!1}else{var d=new n;if(s)var f=s(p,h,l,e,t,d);if(!(void 0===f?o(h,p,3,s,d):f))return!1}}return!0}},function(e,t){e.exports=function(){this.__data__=[],this.size=0}},function(e,t,r){var n=r(29),o=Array.prototype.splice;e.exports=function(e){var t=this.__data__,r=n(t,e);return!(r<0)&&(r==t.length-1?t.pop():o.call(t,r,1),--this.size,!0)}},function(e,t,r){var n=r(29);e.exports=function(e){var t=this.__data__,r=n(t,e);return r<0?void 0:t[r][1]}},function(e,t,r){var n=r(29);e.exports=function(e){return n(this.__data__,e)>-1}},function(e,t,r){var n=r(29);e.exports=function(e,t){var r=this.__data__,o=n(r,e);return o<0?(++this.size,r.push([e,t])):r[o][1]=t,this}},function(e,t,r){var n=r(28);e.exports=function(){this.__data__=new n,this.size=0}},function(e,t){e.exports=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}},function(e,t){e.exports=function(e){return this.__data__.get(e)}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t,r){var n=r(28),o=r(53),s=r(54);e.exports=function(e,t){var r=this.__data__;if(r instanceof n){var i=r.__data__;if(!o||i.length<199)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new s(i)}return r.set(e,t),this.size=r.size,this}},function(e,t,r){var n=r(51),o=r(216),s=r(9),i=r(80),a=/^\[object .+?Constructor\]$/,c=Function.prototype,u=Object.prototype,l=c.toString,p=u.hasOwnProperty,h=RegExp("^"+l.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!s(e)||o(e))&&(n(e)?h:a).test(i(e))}},function(e,t,r){var n,o=r(217),s=(n=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";e.exports=function(e){return!!s&&s in e}},function(e,t,r){var n=r(8)["__core-js_shared__"];e.exports=n},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t,r){var n=r(220),o=r(28),s=r(53);e.exports=function(){this.size=0,this.__data__={hash:new n,map:new(s||o),string:new n}}},function(e,t,r){var n=r(221),o=r(222),s=r(223),i=r(224),a=r(225);function c(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=o,c.prototype.get=s,c.prototype.has=i,c.prototype.set=a,e.exports=c},function(e,t,r){var n=r(31);e.exports=function(){this.__data__=n?n(null):{},this.size=0}},function(e,t){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},function(e,t,r){var n=r(31),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(n){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return o.call(t,e)?t[e]:void 0}},function(e,t,r){var n=r(31),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return n?void 0!==t[e]:o.call(t,e)}},function(e,t,r){var n=r(31);e.exports=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=n&&void 0===t?"__lodash_hash_undefined__":t,this}},function(e,t,r){var n=r(32);e.exports=function(e){var t=n(this,e).delete(e);return this.size-=t?1:0,t}},function(e,t){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},function(e,t,r){var n=r(32);e.exports=function(e){return n(this,e).get(e)}},function(e,t,r){var n=r(32);e.exports=function(e){return n(this,e).has(e)}},function(e,t,r){var n=r(32);e.exports=function(e,t){var r=n(this,e),o=r.size;return r.set(e,t),this.size+=r.size==o?0:1,this}},function(e,t,r){var n=r(52),o=r(82),s=r(237),i=r(240),a=r(33),c=r(7),u=r(24),l=r(47),p="[object Object]",h=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,d,f,m){var y=c(e),g=c(t),v=y?"[object Array]":a(e),b=g?"[object Array]":a(t),_=(v="[object Arguments]"==v?p:v)==p,w=(b="[object Arguments]"==b?p:b)==p,x=v==b;if(x&&u(e)){if(!u(t))return!1;y=!0,_=!1}if(x&&!_)return m||(m=new n),y||l(e)?o(e,t,r,d,f,m):s(e,t,v,r,d,f,m);if(!(1&r)){var k=_&&h.call(e,"__wrapped__"),S=w&&h.call(t,"__wrapped__");if(k||S){var j=k?e.value():e,P=S?t.value():t;return m||(m=new n),f(j,P,r,d,m)}}return!!x&&(m||(m=new n),i(e,t,r,d,f,m))}},function(e,t,r){var n=r(54),o=r(233),s=r(234);function i(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new n;++t<r;)this.add(e[t])}i.prototype.add=i.prototype.push=o,i.prototype.has=s,e.exports=i},function(e,t){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}},function(e,t){e.exports=function(e,t){return e.has(t)}},function(e,t,r){var n=r(18),o=r(83),s=r(30),i=r(82),a=r(238),c=r(239),u=n?n.prototype:void 0,l=u?u.valueOf:void 0;e.exports=function(e,t,r,n,u,p,h){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!p(new o(e),new o(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return s(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var d=a;case"[object Set]":var f=1&n;if(d||(d=c),e.size!=t.size&&!f)return!1;var m=h.get(e);if(m)return m==t;n|=2,h.set(e,t);var y=i(d(e),d(t),n,u,p,h);return h.delete(e),y;case"[object Symbol]":if(l)return l.call(e)==l.call(t)}return!1}},function(e,t){e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}},function(e,t){e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}},function(e,t,r){var n=r(84),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,s,i,a){var c=1&r,u=n(e),l=u.length;if(l!=n(t).length&&!c)return!1;for(var p=l;p--;){var h=u[p];if(!(c?h in t:o.call(t,h)))return!1}var d=a.get(e),f=a.get(t);if(d&&f)return d==t&&f==e;var m=!0;a.set(e,t),a.set(t,e);for(var y=c;++p<l;){var g=e[h=u[p]],v=t[h];if(s)var b=c?s(v,g,h,t,e,a):s(g,v,h,e,t,a);if(!(void 0===b?g===v||i(g,v,r,s,a):b)){m=!1;break}y||(y="constructor"==h)}if(m&&!y){var _=e.constructor,w=t.constructor;_==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof _&&_ instanceof _&&"function"==typeof w&&w instanceof w||(m=!1)}return a.delete(e),a.delete(t),m}},function(e,t){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,o=0,s=[];++r<n;){var i=e[r];t(i,r,e)&&(s[o++]=i)}return s}},function(e,t,r){var n=r(12)(r(8),"DataView");e.exports=n},function(e,t,r){var n=r(12)(r(8),"Promise");e.exports=n},function(e,t,r){var n=r(12)(r(8),"Set");e.exports=n},function(e,t,r){var n=r(12)(r(8),"WeakMap");e.exports=n},function(e,t,r){var n=r(87),o=r(16);e.exports=function(e){for(var t=o(e),r=t.length;r--;){var s=t[r],i=e[s];t[r]=[s,i,n(i)]}return t}},function(e,t,r){var n=r(81),o=r(248),s=r(90),i=r(57),a=r(87),c=r(88),u=r(20);e.exports=function(e,t){return i(e)&&a(t)?c(u(e),t):function(r){var i=o(r,e);return void 0===i&&i===t?s(r,e):n(t,i,3)}}},function(e,t,r){var n=r(34);e.exports=function(e,t,r){var o=null==e?void 0:n(e,t);return void 0===o?r:o}},function(e,t,r){var n=r(250),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,i=n((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(o,(function(e,r,n,o){t.push(n?o.replace(s,"$1"):r||e)})),t}));e.exports=i},function(e,t,r){var n=r(251);e.exports=function(e){var t=n(e,(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}},function(e,t,r){var n=r(54);function o(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],s=r.cache;if(s.has(o))return s.get(o);var i=e.apply(this,n);return r.cache=s.set(o,i)||s,i};return r.cache=new(o.Cache||n),r}o.Cache=n,e.exports=o},function(e,t,r){var n=r(253);e.exports=function(e){return null==e?"":n(e)}},function(e,t,r){var n=r(18),o=r(89),s=r(7),i=r(58),a=n?n.prototype:void 0,c=a?a.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(s(t))return o(t,e)+"";if(i(t))return c?c.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r}},function(e,t){e.exports=function(e,t){return null!=e&&t in Object(e)}},function(e,t,r){var n=r(19),o=r(45),s=r(7),i=r(25),a=r(48),c=r(20);e.exports=function(e,t,r){for(var u=-1,l=(t=n(t,e)).length,p=!1;++u<l;){var h=c(t[u]);if(!(p=null!=e&&r(e,h)))break;e=e[h]}return p||++u!=l?p:!!(l=null==e?0:e.length)&&a(l)&&i(h,l)&&(s(e)||o(e))}},function(e,t,r){var n=r(257),o=r(258),s=r(57),i=r(20);e.exports=function(e){return s(e)?n(i(e)):o(e)}},function(e,t){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},function(e,t,r){var n=r(34);e.exports=function(e){return function(t){return n(t,e)}}},function(e,t,r){"use strict";class n{constructor(e){this.tokens=this.capacity=e.bucketSize,this.interval=e.interval,this.limit=e.limit,this.last=Date.now()}refill(){const e=Date.now(),t=Math.floor((e-this.last)*this.limit/this.interval);this.tokens+=t,this.last+=Math.ceil(t*this.interval/this.limit),this.tokens>this.capacity&&(this.tokens=this.capacity,this.last=e)}consume(){return this.refill(),this.tokens?(this.tokens--,0):Math.ceil(this.interval/this.limit-(Date.now()-this.last))}}e.exports=function(e,t){t=Object.assign({queueSize:Math.pow(2,32)-1,bucketSize:40,interval:1e3,limit:2},t);const r=new n(t),o=[];let s=null;function i(){for(clearTimeout(s);o.length;){const t=r.consume();if(t>0){s=setTimeout(i,t);break}const n=o.shift();n[2](e.apply(n[0],n[1]))}}function a(){const e=arguments;return new Promise((r,n)=>{if(o.length===t.queueSize)return n(new Error("Queue is full"));o.push([this,e,r]),i()})}return Object.defineProperty(a,"size",{get:()=>o.length}),a}},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0});const s=r(14),i=r(91),a={options:{method:"GET",retry:{limit:2,methods:["GET","PUT","HEAD","DELETE","OPTIONS","TRACE"],statusCodes:[408,413,429,500,502,503,504,521,522,524],errorCodes:["ETIMEDOUT","ECONNRESET","EADDRINUSE","ECONNREFUSED","EPIPE","ENOTFOUND","ENETUNREACH","EAI_AGAIN"],maxRetryAfter:void 0,calculateDelay:({computedValue:e})=>e},timeout:{},headers:{"user-agent":"got (https://github.com/sindresorhus/got)"},hooks:{init:[],beforeRequest:[],beforeRedirect:[],beforeRetry:[],beforeError:[],afterResponse:[]},cache:void 0,dnsCache:void 0,decompress:!0,throwHttpErrors:!0,followRedirect:!0,isStream:!1,responseType:"text",resolveBodyOnly:!1,maxRedirects:10,prefixUrl:"",methodRewriting:!0,ignoreInvalidCookies:!1,context:{},http2:!1,allowGetBody:!1,https:void 0,pagination:{transform:e=>"json"===e.request.options.responseType?e.body:JSON.parse(e.body),paginate:e=>{if(!Reflect.has(e.headers,"link"))return!1;const t=e.headers.link.split(",");let r;for(const e of t){const t=e.split(";");if(t[1].includes("next")){r=t[0].trimStart().trim(),r=r.slice(1,-1);break}}if(r){return{url:new s.URL(r)}}return!1},filter:()=>!0,shouldContinue:()=>!0,countLimit:1/0,backoff:0,requestLimit:1e4,stackAllItems:!0},parseJson:e=>JSON.parse(e),stringifyJson:e=>JSON.stringify(e),cacheOptions:{}},handlers:[i.defaultHandler],mutableDefaults:!1},c=i.default(a);t.default=c,e.exports=c,e.exports.default=c,e.exports.__esModule=!0,o(r(91),t),o(r(92),t)},function(e,t,r){"use strict";class n extends Error{constructor(e){super(e||"Promise was canceled"),this.name="CancelError"}get isCanceled(){return!0}}class o{static fn(e){return(...t)=>new o((r,n,o)=>{t.push(o),e(...t).then(r,n)})}constructor(e){this._cancelHandlers=[],this._isPending=!0,this._isCanceled=!1,this._rejectOnCancel=!0,this._promise=new Promise((t,r)=>{this._reject=r;const n=e=>{if(!this._isPending)throw new Error("The `onCancel` handler was attached after the promise settled.");this._cancelHandlers.push(e)};return Object.defineProperties(n,{shouldReject:{get:()=>this._rejectOnCancel,set:e=>{this._rejectOnCancel=e}}}),e(e=>{this._isPending=!1,t(e)},e=>{this._isPending=!1,r(e)},n)})}then(e,t){return this._promise.then(e,t)}catch(e){return this._promise.catch(e)}finally(e){return this._promise.finally(e)}cancel(e){if(this._isPending&&!this._isCanceled){if(this._cancelHandlers.length>0)try{for(const e of this._cancelHandlers)e()}catch(e){this._reject(e)}this._isCanceled=!0,this._rejectOnCancel&&this._reject(new n(e))}}get isCanceled(){return this._isCanceled}}Object.setPrototypeOf(o.prototype,Promise.prototype),e.exports=o,e.exports.CancelError=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(263),o=Number(process.versions.node.split(".")[0]),s=e=>{const t={start:Date.now(),socket:void 0,lookup:void 0,connect:void 0,secureConnect:void 0,upload:void 0,response:void 0,end:void 0,error:void 0,abort:void 0,phases:{wait:void 0,dns:void 0,tcp:void 0,tls:void 0,request:void 0,firstByte:void 0,download:void 0,total:void 0}};e.timings=t;const r=e=>{const r=e.emit.bind(e);e.emit=(n,...o)=>("error"===n&&(t.error=Date.now(),t.phases.total=t.error-t.start,e.emit=r),r(n,...o))};r(e),e.prependOnceListener("abort",()=>{t.abort=Date.now(),(!t.response||o>=13)&&(t.phases.total=Date.now()-t.start)});const s=e=>{t.socket=Date.now(),t.phases.wait=t.socket-t.start;const r=()=>{t.lookup=Date.now(),t.phases.dns=t.lookup-t.socket};e.prependOnceListener("lookup",r),n.default(e,{connect:()=>{t.connect=Date.now(),void 0===t.lookup&&(e.removeListener("lookup",r),t.lookup=t.connect,t.phases.dns=t.lookup-t.socket),t.phases.tcp=t.connect-t.lookup},secureConnect:()=>{t.secureConnect=Date.now(),t.phases.tls=t.secureConnect-t.connect}})};e.socket?s(e.socket):e.prependOnceListener("socket",s);const i=()=>{var e;t.upload=Date.now(),t.phases.request=t.upload-(null!=(e=t.secureConnect)?e:t.connect)};return("boolean"==typeof e.writableFinished?!e.writableFinished:!e.finished||0!==e.outputSize||e.socket&&0!==e.socket.writableLength)?e.prependOnceListener("finish",i):i(),e.prependOnceListener("response",e=>{t.response=Date.now(),t.phases.firstByte=t.response-t.upload,e.timings=t,r(e),e.prependOnceListener("end",()=>{t.end=Date.now(),t.phases.download=t.end-t.response,t.phases.total=t.end-t.start})}),t};t.default=s,e.exports=s,e.exports.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(63),o=(e,t)=>{let r;if("function"==typeof t){r={connect:t}}else r=t;const o="function"==typeof r.connect,s="function"==typeof r.secureConnect,i="function"==typeof r.close,a=()=>{o&&r.connect(),e instanceof n.TLSSocket&&s&&(e.authorized?r.secureConnect():e.authorizationError||e.once("secureConnect",r.secureConnect)),i&&e.once("close",r.close)};e.writable&&!e.connecting?a():e.connecting?e.once("connect",a):e.destroyed&&i&&r.close(e._hadError)};t.default=o,e.exports=o,e.exports.default=o},function(e,t,r){"use strict";const{V4MAPPED:n,ADDRCONFIG:o,ALL:s,promises:{Resolver:i},lookup:a}=r(265),{promisify:c}=r(38),u=r(266),l=Symbol("cacheableLookupCreateConnection"),p=Symbol("cacheableLookupInstance"),h=Symbol("expires"),d="number"==typeof s,f=e=>{if(!e||"function"!=typeof e.createConnection)throw new Error("Expected an Agent instance as the first argument")},m=()=>{let e=!1,t=!1;for(const r of Object.values(u.networkInterfaces()))for(const n of r)if(!n.internal&&("IPv6"===n.family?t=!0:e=!0,e&&t))return{has4:e,has6:t};return{has4:e,has6:t}},y={ttl:!0},g={all:!0};class v{constructor({cache:e=new Map,maxTtl:t=1/0,fallbackDuration:r=3600,errorTtl:n=.15,resolver:o=new i,lookup:s=a}={}){if(this.maxTtl=t,this.errorTtl=n,this._cache=e,this._resolver=o,this._dnsLookup=c(s),this._resolver instanceof i?(this._resolve4=this._resolver.resolve4.bind(this._resolver),this._resolve6=this._resolver.resolve6.bind(this._resolver)):(this._resolve4=c(this._resolver.resolve4.bind(this._resolver)),this._resolve6=c(this._resolver.resolve6.bind(this._resolver))),this._iface=m(),this._pending={},this._nextRemovalTime=!1,this._hostnamesToFallback=new Set,r<1)this._fallback=!1;else{this._fallback=!0;const e=setInterval(()=>{this._hostnamesToFallback.clear()},1e3*r);e.unref&&e.unref()}this.lookup=this.lookup.bind(this),this.lookupAsync=this.lookupAsync.bind(this)}set servers(e){this.clear(),this._resolver.setServers(e)}get servers(){return this._resolver.getServers()}lookup(e,t,r){if("function"==typeof t?(r=t,t={}):"number"==typeof t&&(t={family:t}),!r)throw new Error("Callback must be a function.");this.lookupAsync(e,t).then(e=>{t.all?r(null,e):r(null,e.address,e.family,e.expires,e.ttl)},r)}async lookupAsync(e,t={}){"number"==typeof t&&(t={family:t});let r=await this.query(e);if(6===t.family){const e=r.filter(e=>6===e.family);t.hints&n&&(d&&t.hints&s||0===e.length)?(e=>{for(const t of e)6!==t.family&&(t.address="::ffff:"+t.address,t.family=6)})(r):r=e}else 4===t.family&&(r=r.filter(e=>4===e.family));if(t.hints&o){const{_iface:e}=this;r=r.filter(t=>6===t.family?e.has6:e.has4)}if(0===r.length){const t=new Error("cacheableLookup ENOTFOUND "+e);throw t.code="ENOTFOUND",t.hostname=e,t}return t.all?r:r[0]}async query(e){let t=await this._cache.get(e);if(!t){const r=this._pending[e];if(r)t=await r;else{const r=this.queryAndCache(e);this._pending[e]=r;try{t=await r}finally{delete this._pending[e]}}}return t=t.map(e=>({...e})),t}async _resolve(e){const[t,r]=await Promise.all([this._resolve4(e,y),this._resolve6(e,y)].map(e=>(async e=>{try{return await e}catch(e){if("ENODATA"===e.code||"ENOTFOUND"===e.code)return[];throw e}})(e)));let n=0,o=0,s=0;const i=Date.now();for(const e of t)e.family=4,e.expires=i+1e3*e.ttl,n=Math.max(n,e.ttl);for(const e of r)e.family=6,e.expires=i+1e3*e.ttl,o=Math.max(o,e.ttl);return s=t.length>0?r.length>0?Math.min(n,o):n:o,{entries:[...t,...r],cacheTtl:s}}async _lookup(e){try{return{entries:await this._dnsLookup(e,{all:!0}),cacheTtl:0}}catch(e){return{entries:[],cacheTtl:0}}}async _set(e,t,r){if(this.maxTtl>0&&r>0){r=1e3*Math.min(r,this.maxTtl),t[h]=Date.now()+r;try{await this._cache.set(e,t,r)}catch(e){this.lookupAsync=async()=>{const t=new Error("Cache Error. Please recreate the CacheableLookup instance.");throw t.cause=e,t}}n=this._cache,Symbol.iterator in n&&this._tick(r)}var n}async queryAndCache(e){if(this._hostnamesToFallback.has(e))return this._dnsLookup(e,g);let t=await this._resolve(e);0===t.entries.length&&this._fallback&&(t=await this._lookup(e),0!==t.entries.length&&this._hostnamesToFallback.add(e));const r=0===t.entries.length?this.errorTtl:t.cacheTtl;return await this._set(e,t.entries,r),t.entries}_tick(e){const t=this._nextRemovalTime;(!t||e<t)&&(clearTimeout(this._removalTimeout),this._nextRemovalTime=e,this._removalTimeout=setTimeout(()=>{this._nextRemovalTime=!1;let e=1/0;const t=Date.now();for(const[r,n]of this._cache){const o=n[h];t>=o?this._cache.delete(r):o<e&&(e=o)}e!==1/0&&this._tick(e-t)},e),this._removalTimeout.unref&&this._removalTimeout.unref())}install(e){if(f(e),l in e)throw new Error("CacheableLookup has been already installed");e[l]=e.createConnection,e[p]=this,e.createConnection=(t,r)=>("lookup"in t||(t.lookup=this.lookup),e[l](t,r))}uninstall(e){if(f(e),e[l]){if(e[p]!==this)throw new Error("The agent is not owned by this CacheableLookup instance");e.createConnection=e[l],delete e[l],delete e[p]}}updateInterfaceInfo(){const{_iface:e}=this;this._iface=m(),(e.has4&&!this._iface.has4||e.has6&&!this._iface.has6)&&this._cache.clear()}clear(e){e?this._cache.delete(e):this._cache.clear()}}e.exports=v,e.exports.default=v},function(e,t){e.exports=require("dns")},function(e,t){e.exports=require("os")},function(e,t,r){"use strict";const n=r(13),o=r(14),s=r(268),i=r(269),a=r(275),c=r(276),u=r(64),l=r(277),p=r(279);class h{constructor(e,t){if("function"!=typeof e)throw new TypeError("Parameter `request` must be a function");return this.cache=new p({uri:"string"==typeof t&&t,store:"string"!=typeof t&&t,namespace:"cacheable-request"}),this.createCacheableRequest(e)}createCacheableRequest(e){return(t,r)=>{let p;if("string"==typeof t)p=f(o.parse(t)),t={};else if(t instanceof o.URL)p=f(o.parse(t.toString())),t={};else{const[e,...r]=(t.path||"").split("?"),n=r.length>0?"?"+r.join("?"):"";p=f({...t,pathname:e,search:n})}(t={headers:{},method:"GET",cache:!0,strictTtl:!1,automaticFailover:!1,...t,...d(p)}).headers=u(t.headers);const m=new n,y=s(o.format(p),{stripWWW:!1,removeTrailingSlash:!1,stripAuthentication:!1}),g=`${t.method}:${y}`;let v=!1,b=!1;const _=t=>{b=!0;let n,o=!1;const s=new Promise(e=>{n=()=>{o||(o=!0,e())}}),u=e=>{if(v&&!t.forceRefresh){e.status=e.statusCode;const r=a.fromObject(v.cachePolicy).revalidatedPolicy(t,e);if(!r.modified){const t=r.policy.responseHeaders();(e=new c(v.statusCode,t,v.body,v.url)).cachePolicy=r.policy,e.fromCache=!0}}let n;e.fromCache||(e.cachePolicy=new a(t,e,t),e.fromCache=!1),t.cache&&e.cachePolicy.storable()?(n=l(e),(async()=>{try{const r=i.buffer(e);if(await Promise.race([s,new Promise(t=>e.once("end",t))]),o)return;const n=await r,a={cachePolicy:e.cachePolicy.toObject(),url:e.url,statusCode:e.fromCache?v.statusCode:e.statusCode,body:n};let c=t.strictTtl?e.cachePolicy.timeToLive():void 0;t.maxTtl&&(c=c?Math.min(c,t.maxTtl):t.maxTtl),await this.cache.set(g,a,c)}catch(e){m.emit("error",new h.CacheError(e))}})()):t.cache&&v&&(async()=>{try{await this.cache.delete(g)}catch(e){m.emit("error",new h.CacheError(e))}})(),m.emit("response",n||e),"function"==typeof r&&r(n||e)};try{const r=e(t,u);r.once("error",n),r.once("abort",n),m.emit("request",r)}catch(e){m.emit("error",new h.RequestError(e))}};return(async()=>{const e=async e=>{await Promise.resolve();const t=e.cache?await this.cache.get(g):void 0;if(void 0===t)return _(e);const n=a.fromObject(t.cachePolicy);if(n.satisfiesWithoutRevalidation(e)&&!e.forceRefresh){const e=n.responseHeaders(),o=new c(t.statusCode,e,t.body,t.url);o.cachePolicy=n,o.fromCache=!0,m.emit("response",o),"function"==typeof r&&r(o)}else v=t,e.headers=n.revalidationHeaders(e),_(e)},n=e=>m.emit("error",new h.CacheError(e));this.cache.once("error",n),m.on("response",()=>this.cache.removeListener("error",n));try{await e(t)}catch(e){t.automaticFailover&&!b&&_(t),m.emit("error",new h.CacheError(e))}})(),m}}}function d(e){const t={...e};return t.path=`${e.pathname||"/"}${e.search||""}`,delete t.pathname,delete t.search,t}function f(e){return{protocol:e.protocol,auth:e.auth,hostname:e.hostname||e.host||"localhost",port:e.port,pathname:e.pathname,search:e.search}}h.RequestError=class extends Error{constructor(e){super(e.message),this.name="RequestError",Object.assign(this,e)}},h.CacheError=class extends Error{constructor(e){super(e.message),this.name="CacheError",Object.assign(this,e)}},e.exports=h},function(e,t,r){"use strict";const n="undefined"==typeof URL?r(14).URL:URL,o=(e,t)=>t.some(t=>t instanceof RegExp?t.test(e):t===e),s=(e,t)=>{if(t={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...t},Reflect.has(t,"normalizeHttps"))throw new Error("options.normalizeHttps is renamed to options.forceHttp");if(Reflect.has(t,"normalizeHttp"))throw new Error("options.normalizeHttp is renamed to options.forceHttps");if(Reflect.has(t,"stripFragment"))throw new Error("options.stripFragment is renamed to options.stripHash");if(e=e.trim(),/^data:/i.test(e))return((e,{stripHash:t})=>{const r=e.match(/^data:(.*?),(.*?)(?:#(.*))?$/);if(!r)throw new Error("Invalid URL: "+e);const n=r[1].split(";"),o=r[2],s=t?"":r[3];let i=!1;"base64"===n[n.length-1]&&(n.pop(),i=!0);const a=(n.shift()||"").toLowerCase(),c=[...n.map(e=>{let[t,r=""]=e.split("=").map(e=>e.trim());return"charset"===t&&(r=r.toLowerCase(),"us-ascii"===r)?"":`${t}${r?"="+r:""}`}).filter(Boolean)];return i&&c.push("base64"),(0!==c.length||a&&"text/plain"!==a)&&c.unshift(a),`data:${c.join(";")},${i?o.trim():o}${s?"#"+s:""}`})(e,t);const r=e.startsWith("//");!r&&/^\.*\//.test(e)||(e=e.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,t.defaultProtocol));const s=new n(e);if(t.forceHttp&&t.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(t.forceHttp&&"https:"===s.protocol&&(s.protocol="http:"),t.forceHttps&&"http:"===s.protocol&&(s.protocol="https:"),t.stripAuthentication&&(s.username="",s.password=""),t.stripHash&&(s.hash=""),s.pathname&&(s.pathname=s.pathname.replace(/((?!:).|^)\/{2,}/g,(e,t)=>/^(?!\/)/g.test(t)?t+"/":"/")),s.pathname&&(s.pathname=decodeURI(s.pathname)),!0===t.removeDirectoryIndex&&(t.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(t.removeDirectoryIndex)&&t.removeDirectoryIndex.length>0){let e=s.pathname.split("/");const r=e[e.length-1];o(r,t.removeDirectoryIndex)&&(e=e.slice(0,e.length-1),s.pathname=e.slice(1).join("/")+"/")}if(s.hostname&&(s.hostname=s.hostname.replace(/\.$/,""),t.stripWWW&&/^www\.([a-z\-\d]{2,63})\.([a-z.]{2,5})$/.test(s.hostname)&&(s.hostname=s.hostname.replace(/^www\./,""))),Array.isArray(t.removeQueryParameters))for(const e of[...s.searchParams.keys()])o(e,t.removeQueryParameters)&&s.searchParams.delete(e);return t.sortQueryParameters&&s.searchParams.sort(),t.removeTrailingSlash&&(s.pathname=s.pathname.replace(/\/$/,"")),e=s.toString(),!t.removeTrailingSlash&&"/"!==s.pathname||""!==s.hash||(e=e.replace(/\/$/,"")),r&&!t.normalizeProtocol&&(e=e.replace(/^http:\/\//,"//")),t.stripProtocol&&(e=e.replace(/^(?:https?:)?\/\//,"")),e};e.exports=s,e.exports.default=s},function(e,t,r){"use strict";const{constants:n}=r(270),o=r(271),s=r(274);class i extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}}async function a(e,t){if(!e)return Promise.reject(new Error("Expected a stream"));t={maxBuffer:1/0,...t};const{maxBuffer:r}=t;let a;return await new Promise((c,u)=>{const l=e=>{e&&a.getBufferedLength()<=n.MAX_LENGTH&&(e.bufferedData=a.getBufferedValue()),u(e)};a=o(e,s(t),e=>{e?l(e):c()}),a.on("data",()=>{a.getBufferedLength()>r&&l(new i)})}),a.getBufferedValue()}e.exports=a,e.exports.default=a,e.exports.buffer=(e,t)=>a(e,{...t,encoding:"buffer"}),e.exports.array=(e,t)=>a(e,{...t,array:!0}),e.exports.MaxBufferError=i},function(e,t){e.exports=require("buffer")},function(e,t,r){var n=r(93),o=r(273),s=r(60),i=function(){},a=/^v?\.0/.test(process.version),c=function(e){return"function"==typeof e},u=function(e,t,r,u){u=n(u);var l=!1;e.on("close",(function(){l=!0})),o(e,{readable:t,writable:r},(function(e){if(e)return u(e);l=!0,u()}));var p=!1;return function(t){if(!l&&!p)return p=!0,function(e){return!!a&&(!!s&&((e instanceof(s.ReadStream||i)||e instanceof(s.WriteStream||i))&&c(e.close)))}(e)?e.close(i):function(e){return e.setHeader&&c(e.abort)}(e)?e.abort():c(e.destroy)?e.destroy():void u(t||new Error("stream was destroyed"))}},l=function(e){e()},p=function(e,t){return e.pipe(t)};e.exports=function(){var e,t=Array.prototype.slice.call(arguments),r=c(t[t.length-1]||i)&&t.pop()||i;if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new Error("pump requires two streams per minimum");var n=t.map((function(o,s){var i=s<t.length-1;return u(o,i,s>0,(function(t){e||(e=t),t&&n.forEach(l),i||(n.forEach(l),r(e))}))}));return t.reduce(p)}},function(e,t){e.exports=function e(t,r){if(t&&r)return e(t)(r);if("function"!=typeof t)throw new TypeError("need wrapper function");return Object.keys(t).forEach((function(e){n[e]=t[e]})),n;function n(){for(var e=new Array(arguments.length),r=0;r<e.length;r++)e[r]=arguments[r];var n=t.apply(this,e),o=e[e.length-1];return"function"==typeof n&&n!==o&&Object.keys(o).forEach((function(e){n[e]=o[e]})),n}}},function(e,t,r){var n=r(93),o=function(){},s=function(e,t,r){if("function"==typeof t)return s(e,null,t);t||(t={}),r=n(r||o);var i=e._writableState,a=e._readableState,c=t.readable||!1!==t.readable&&e.readable,u=t.writable||!1!==t.writable&&e.writable,l=!1,p=function(){e.writable||h()},h=function(){u=!1,c||r.call(e)},d=function(){c=!1,u||r.call(e)},f=function(t){r.call(e,t?new Error("exited with error code: "+t):null)},m=function(t){r.call(e,t)},y=function(){process.nextTick(g)},g=function(){if(!l)return(!c||a&&a.ended&&!a.destroyed)&&(!u||i&&i.ended&&!i.destroyed)?void 0:r.call(e,new Error("premature close"))},v=function(){e.req.on("finish",h)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(e)?u&&!i&&(e.on("end",p),e.on("close",p)):(e.on("complete",h),e.on("abort",y),e.req?v():e.on("request",v)),function(e){return e.stdio&&Array.isArray(e.stdio)&&3===e.stdio.length}(e)&&e.on("exit",f),e.on("end",d),e.on("finish",h),!1!==t.error&&e.on("error",m),e.on("close",y),function(){l=!0,e.removeListener("complete",h),e.removeListener("abort",y),e.removeListener("request",v),e.req&&e.req.removeListener("finish",h),e.removeListener("end",p),e.removeListener("close",p),e.removeListener("finish",h),e.removeListener("exit",f),e.removeListener("end",d),e.removeListener("error",m),e.removeListener("close",y)}};e.exports=s},function(e,t,r){"use strict";const{PassThrough:n}=r(15);e.exports=e=>{e={...e};const{array:t}=e;let{encoding:r}=e;const o="buffer"===r;let s=!1;t?s=!(r||o):r=r||"utf8",o&&(r=null);const i=new n({objectMode:s});r&&i.setEncoding(r);let a=0;const c=[];return i.on("data",e=>{c.push(e),s?a=c.length:a+=e.length}),i.getBufferedValue=()=>t?c:o?Buffer.concat(c,a):c.join(""),i.getBufferedLength=()=>a,i}},function(e,t,r){"use strict";const n=new Set([200,203,204,206,300,301,404,405,410,414,501]),o=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),s=new Set([500,502,503,504]),i={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},a={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function c(e){const t=parseInt(e,10);return isFinite(t)?t:0}function u(e){const t={};if(!e)return t;const r=e.trim().split(/\s*,\s*/);for(const e of r){const[r,n]=e.split(/\s*=\s*/,2);t[r]=void 0===n||n.replace(/^"|"$/g,"")}return t}function l(e){let t=[];for(const r in e){const n=e[r];t.push(!0===n?r:r+"="+n)}if(t.length)return t.join(", ")}e.exports=class{constructor(e,t,{shared:r,cacheHeuristic:n,immutableMinTimeToLive:o,ignoreCargoCult:s,_fromObject:i}={}){if(i)this._fromObject(i);else{if(!t||!t.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(e),this._responseTime=this.now(),this._isShared=!1!==r,this._cacheHeuristic=void 0!==n?n:.1,this._immutableMinTtl=void 0!==o?o:864e5,this._status="status"in t?t.status:200,this._resHeaders=t.headers,this._rescc=u(t.headers["cache-control"]),this._method="method"in e?e.method:"GET",this._url=e.url,this._host=e.headers.host,this._noAuthorization=!e.headers.authorization,this._reqHeaders=t.headers.vary?e.headers:null,this._reqcc=u(e.headers["cache-control"]),s&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":l(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),null==t.headers["cache-control"]&&/no-cache/.test(t.headers.pragma)&&(this._rescc["no-cache"]=!0)}}now(){return Date.now()}storable(){return!(this._reqcc["no-store"]||!("GET"===this._method||"HEAD"===this._method||"POST"===this._method&&this._hasExplicitExpiration())||!o.has(this._status)||this._rescc["no-store"]||this._isShared&&this._rescc.private||this._isShared&&!this._noAuthorization&&!this._allowsStoringAuthenticated()||!(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||n.has(this._status)))}_hasExplicitExpiration(){return this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires}_assertRequestHasHeaders(e){if(!e||!e.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(e){this._assertRequestHasHeaders(e);const t=u(e.headers["cache-control"]);if(t["no-cache"]||/no-cache/.test(e.headers.pragma))return!1;if(t["max-age"]&&this.age()>t["max-age"])return!1;if(t["min-fresh"]&&this.timeToLive()<1e3*t["min-fresh"])return!1;if(this.stale()){if(!(t["max-stale"]&&!this._rescc["must-revalidate"]&&(!0===t["max-stale"]||t["max-stale"]>this.age()-this.maxAge())))return!1}return this._requestMatches(e,!1)}_requestMatches(e,t){return(!this._url||this._url===e.url)&&this._host===e.headers.host&&(!e.method||this._method===e.method||t&&"HEAD"===e.method)&&this._varyMatches(e)}_allowsStoringAuthenticated(){return this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"]}_varyMatches(e){if(!this._resHeaders.vary)return!0;if("*"===this._resHeaders.vary)return!1;const t=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(const r of t)if(e.headers[r]!==this._reqHeaders[r])return!1;return!0}_copyWithoutHopByHopHeaders(e){const t={};for(const r in e)i[r]||(t[r]=e[r]);if(e.connection){const r=e.connection.trim().split(/\s*,\s*/);for(const e of r)delete t[e]}if(t.warning){const e=t.warning.split(/,/).filter(e=>!/^\s*1[0-9][0-9]/.test(e));e.length?t.warning=e.join(",").trim():delete t.warning}return t}responseHeaders(){const e=this._copyWithoutHopByHopHeaders(this._resHeaders),t=this.age();return t>86400&&!this._hasExplicitExpiration()&&this.maxAge()>86400&&(e.warning=(e.warning?e.warning+", ":"")+'113 - "rfc7234 5.5.4"'),e.age=""+Math.round(t),e.date=new Date(this.now()).toUTCString(),e}date(){const e=Date.parse(this._resHeaders.date);return isFinite(e)?e:this._responseTime}age(){return this._ageValue()+(this.now()-this._responseTime)/1e3}_ageValue(){return c(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"])return 0;if(this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable)return 0;if("*"===this._resHeaders.vary)return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return c(this._rescc["s-maxage"])}if(this._rescc["max-age"])return c(this._rescc["max-age"]);const e=this._rescc.immutable?this._immutableMinTtl:0,t=this.date();if(this._resHeaders.expires){const r=Date.parse(this._resHeaders.expires);return Number.isNaN(r)||r<t?0:Math.max(e,(r-t)/1e3)}if(this._resHeaders["last-modified"]){const r=Date.parse(this._resHeaders["last-modified"]);if(isFinite(r)&&t>r)return Math.max(e,(t-r)/1e3*this._cacheHeuristic)}return e}timeToLive(){const e=this.maxAge()-this.age(),t=e+c(this._rescc["stale-if-error"]),r=e+c(this._rescc["stale-while-revalidate"]);return 1e3*Math.max(0,e,t,r)}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+c(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){return this.maxAge()+c(this._rescc["stale-while-revalidate"])>this.age()}static fromObject(e){return new this(void 0,void 0,{_fromObject:e})}_fromObject(e){if(this._responseTime)throw Error("Reinitialized");if(!e||1!==e.v)throw Error("Invalid serialization");this._responseTime=e.t,this._isShared=e.sh,this._cacheHeuristic=e.ch,this._immutableMinTtl=void 0!==e.imm?e.imm:864e5,this._status=e.st,this._resHeaders=e.resh,this._rescc=e.rescc,this._method=e.m,this._url=e.u,this._host=e.h,this._noAuthorization=e.a,this._reqHeaders=e.reqh,this._reqcc=e.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(e){this._assertRequestHasHeaders(e);const t=this._copyWithoutHopByHopHeaders(e.headers);if(delete t["if-range"],!this._requestMatches(e,!0)||!this.storable())return delete t["if-none-match"],delete t["if-modified-since"],t;this._resHeaders.etag&&(t["if-none-match"]=t["if-none-match"]?`${t["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag);if(t["accept-ranges"]||t["if-match"]||t["if-unmodified-since"]||this._method&&"GET"!=this._method){if(delete t["if-modified-since"],t["if-none-match"]){const e=t["if-none-match"].split(/,/).filter(e=>!/^\s*W\//.test(e));e.length?t["if-none-match"]=e.join(",").trim():delete t["if-none-match"]}}else this._resHeaders["last-modified"]&&!t["if-modified-since"]&&(t["if-modified-since"]=this._resHeaders["last-modified"]);return t}revalidatedPolicy(e,t){if(this._assertRequestHasHeaders(e),this._useStaleIfError()&&function(e){return!e||s.has(e.status)}(t))return{modified:!1,matches:!1,policy:this};if(!t||!t.headers)throw Error("Response headers missing");let r=!1;if(void 0!==t.status&&304!=t.status?r=!1:t.headers.etag&&!/^\s*W\//.test(t.headers.etag)?r=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===t.headers.etag:this._resHeaders.etag&&t.headers.etag?r=this._resHeaders.etag.replace(/^\s*W\//,"")===t.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?r=this._resHeaders["last-modified"]===t.headers["last-modified"]:this._resHeaders.etag||this._resHeaders["last-modified"]||t.headers.etag||t.headers["last-modified"]||(r=!0),!r)return{policy:new this.constructor(e,t),modified:304!=t.status,matches:!1};const n={};for(const e in this._resHeaders)n[e]=e in t.headers&&!a[e]?t.headers[e]:this._resHeaders[e];const o=Object.assign({},t,{status:this._status,method:this._method,headers:n});return{policy:new this.constructor(e,o,{shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl}),modified:!1,matches:!0}}}},function(e,t,r){"use strict";const n=r(15).Readable,o=r(64);e.exports=class extends n{constructor(e,t,r,n){if("number"!=typeof e)throw new TypeError("Argument `statusCode` should be a number");if("object"!=typeof t)throw new TypeError("Argument `headers` should be an object");if(!(r instanceof Buffer))throw new TypeError("Argument `body` should be a buffer");if("string"!=typeof n)throw new TypeError("Argument `url` should be a string");super(),this.statusCode=e,this.headers=o(t),this.body=r,this.url=n}_read(){this.push(this.body),this.push(null)}}},function(e,t,r){"use strict";const n=r(15).PassThrough,o=r(278);e.exports=e=>{if(!e||!e.pipe)throw new TypeError("Parameter `response` must be a response stream.");const t=new n;return o(e,t),e.pipe(t)}},function(e,t,r){"use strict";const n=["destroy","setTimeout","socket","headers","trailers","rawHeaders","statusCode","httpVersion","httpVersionMinor","httpVersionMajor","rawTrailers","statusMessage"];e.exports=(e,t)=>{const r=new Set(Object.keys(e).concat(n));for(const n of r)n in t||(t[n]="function"==typeof e[n]?e[n].bind(e):e[n])}},function(e,t,r){"use strict";const n=r(13),o=r(280);e.exports=class extends n{constructor(e,t){if(super(),this.opts=Object.assign({namespace:"keyv",serialize:o.stringify,deserialize:o.parse},"string"==typeof e?{uri:e}:e,t),!this.opts.store){const e=Object.assign({},this.opts);this.opts.store=(e=>{const t={redis:"@keyv/redis",mongodb:"@keyv/mongo",mongo:"@keyv/mongo",sqlite:"@keyv/sqlite",postgresql:"@keyv/postgres",postgres:"@keyv/postgres",mysql:"@keyv/mysql"};if(e.adapter||e.uri){const n=e.adapter||/^[^:]*/.exec(e.uri)[0];return new(r(281)(t[n]))(e)}return new Map})(e)}"function"==typeof this.opts.store.on&&this.opts.store.on("error",e=>this.emit("error",e)),this.opts.store.namespace=this.opts.namespace}_getKeyPrefix(e){return`${this.opts.namespace}:${e}`}get(e,t){const r=this._getKeyPrefix(e),{store:n}=this.opts;return Promise.resolve().then(()=>n.get(r)).then(e=>"string"==typeof e?this.opts.deserialize(e):e).then(r=>{if(void 0!==r){if(!("number"==typeof r.expires&&Date.now()>r.expires))return t&&t.raw?r:r.value;this.delete(e)}})}set(e,t,r){const n=this._getKeyPrefix(e);void 0===r&&(r=this.opts.ttl),0===r&&(r=void 0);const{store:o}=this.opts;return Promise.resolve().then(()=>{const e="number"==typeof r?Date.now()+r:null;return t={value:t,expires:e},this.opts.serialize(t)}).then(e=>o.set(n,e,r)).then(()=>!0)}delete(e){const t=this._getKeyPrefix(e),{store:r}=this.opts;return Promise.resolve().then(()=>r.delete(t))}clear(){const{store:e}=this.opts;return Promise.resolve().then(()=>e.clear())}}},function(e,t){t.stringify=function e(t){if(void 0===t)return t;if(t&&Buffer.isBuffer(t))return JSON.stringify(":base64:"+t.toString("base64"));if(t&&t.toJSON&&(t=t.toJSON()),t&&"object"==typeof t){var r="",n=Array.isArray(t);r=n?"[":"{";var o=!0;for(var s in t){var i="function"==typeof t[s]||!n&&void 0===t[s];Object.hasOwnProperty.call(t,s)&&!i&&(o||(r+=","),o=!1,n?null==t[s]?r+="null":r+=e(t[s]):void 0!==t[s]&&(r+=e(s)+":"+e(t[s])))}return r+=n?"]":"}"}return"string"==typeof t?JSON.stringify(/^:/.test(t)?":"+t:t):void 0===t?"null":JSON.stringify(t)},t.parse=function(e){return JSON.parse(e,(function(e,t){return"string"==typeof t?/^:base64:/.test(t)?Buffer.from(t.substring(8),"base64"):/^:/.test(t)?t.substring(1):t:t}))}},function(e,t){function r(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id=281},function(e,t,r){"use strict";const{Transform:n,PassThrough:o}=r(15),s=r(283),i=r(284);e.exports=e=>{const t=(e.headers["content-encoding"]||"").toLowerCase();if(!["gzip","deflate","br"].includes(t))return e;const r="br"===t;if(r&&"function"!=typeof s.createBrotliDecompress)return e.destroy(new Error("Brotli is not supported on Node.js < 12")),e;let a=!0;const c=new n({transform(e,t,r){a=!1,r(null,e)},flush(e){e()}}),u=new o({autoDestroy:!1,destroy(t,r){e.destroy(),r(t)}}),l=r?s.createBrotliDecompress():s.createUnzip();return l.once("error",t=>{!a||e.readable?u.destroy(t):u.end()}),i(e,u),e.pipe(c).pipe(l).pipe(u),u}},function(e,t){e.exports=require("zlib")},function(e,t,r){"use strict";const n=["aborted","complete","headers","httpVersion","httpVersionMinor","httpVersionMajor","method","rawHeaders","rawTrailers","setTimeout","socket","statusCode","statusMessage","trailers","url"];e.exports=(e,t)=>{if(t._readableState.autoDestroy)throw new Error("The second stream must have the `autoDestroy` option set to `false`");const r=new Set(Object.keys(e).concat(n)),o={};for(const n of r)n in t||(o[n]={get(){const t=e[n];return"function"==typeof t?t.bind(e):t},set(t){e[n]=t},enumerable:!0,configurable:!1});return Object.defineProperties(t,o),e.once("aborted",()=>{t.destroy(),t.emit("aborted")}),e.once("close",()=>{e.complete&&t.readable?t.once("end",()=>{t.emit("close")}):t.emit("close")}),t}},function(e,t,r){"use strict";const n=r(65),o=r(94),s=r(96),i=r(97),a=r(289);e.exports={...n,ClientRequest:s,IncomingMessage:i,...o,request:(e,t,r)=>new s(e,t,r),get:(e,t,r)=>{const n=new s(e,t,r);return n.end(),n},auto:a}},function(e,t,r){"use strict";e.exports=(e,t,r)=>{for(const n of r)e.on(n,(...e)=>t.emit(n,...e))}},function(e,t,r){"use strict";e.exports=e=>{switch(e){case":method":case":scheme":case":authority":case":path":return!0;default:return!1}}},function(e,t,r){"use strict";const n=(t,r,n)=>{e.exports[r]=class extends t{constructor(...e){super("string"==typeof n?n:n(e)),this.name=`${super.name} [${r}]`,this.code=r}}};n(TypeError,"ERR_INVALID_ARG_TYPE",e=>{const t=e[0].includes(".")?"property":"argument";let r=e[1];const n=Array.isArray(r);return n&&(r=`${r.slice(0,-1).join(", ")} or ${r.slice(-1)}`),`The "${e[0]}" ${t} must be ${n?"one of":"of"} type ${r}. Received ${typeof e[2]}`}),n(TypeError,"ERR_INVALID_PROTOCOL",e=>`Protocol "${e[0]}" not supported. Expected "${e[1]}"`),n(Error,"ERR_HTTP_HEADERS_SENT",e=>`Cannot ${e[0]} headers after they are sent to the client`),n(TypeError,"ERR_INVALID_HTTP_TOKEN",e=>`${e[0]} must be a valid HTTP token [${e[1]}]`),n(TypeError,"ERR_HTTP_INVALID_HEADER_VALUE",e=>`Invalid value "${e[0]} for header "${e[1]}"`),n(TypeError,"ERR_INVALID_CHAR",e=>`Invalid character in ${e[0]} [${e[1]}]`)},function(e,t,r){"use strict";const n=r(61),o=r(62),s=r(290),i=r(95),a=r(96),c=r(291),u=r(98),l=new i({maxSize:100}),p=new Map,h=(e,t,r)=>{t._httpMessage={shouldKeepAlive:!0};const n=()=>{e.emit("free",t,r)};t.on("free",n);const o=()=>{e.removeSocket(t,r)};t.on("close",o);const s=()=>{e.removeSocket(t,r),t.off("close",o),t.off("free",n),t.off("agentRemove",s)};t.on("agentRemove",s),e.emit("free",t,r)};e.exports=async(e,t,r)=>{if(("string"==typeof e||e instanceof URL)&&(e=u(new URL(e))),"function"==typeof t&&(r=t,t=void 0),t={ALPNProtocols:["h2","http/1.1"],...e,...t,resolveSocket:!0},!Array.isArray(t.ALPNProtocols)||0===t.ALPNProtocols.length)throw new Error("The `ALPNProtocols` option must be an Array with at least one entry");t.protocol=t.protocol||"https:";const i="https:"===t.protocol;t.host=t.hostname||t.host||"localhost",t.session=t.tlsSession,t.servername=t.servername||c(t),t.port=t.port||(i?443:80),t._defaultAgent=i?o.globalAgent:n.globalAgent;const d=t.agent;if(d){if(d.addRequest)throw new Error("The `options.agent` object can contain only `http`, `https` or `http2` properties");t.agent=d[i?"https":"http"]}if(i){if("h2"===await(async e=>{const t=`${e.host}:${e.port}:${e.ALPNProtocols.sort()}`;if(!l.has(t)){if(p.has(t)){return(await p.get(t)).alpnProtocol}const{path:r,agent:n}=e;e.path=e.socketPath;const i=s(e);p.set(t,i);try{const{socket:s,alpnProtocol:a}=await i;if(l.set(t,a),e.path=r,"h2"===a)s.destroy();else{const{globalAgent:t}=o,r=o.Agent.prototype.createConnection;n?n.createConnection===r?h(n,s,e):s.destroy():t.createConnection===r?h(t,s,e):s.destroy()}return p.delete(t),a}catch(e){throw p.delete(t),e}}return l.get(t)})(t))return d&&(t.agent=d.http2),new a(t,r)}return n.request(t,r)},e.exports.protocolCache=l},function(e,t,r){"use strict";const n=r(63);e.exports=(e={})=>new Promise((t,r)=>{const o=n.connect(e,()=>{e.resolveSocket?(o.off("error",r),t({alpnProtocol:o.alpnProtocol,socket:o})):(o.destroy(),t({alpnProtocol:o.alpnProtocol}))});o.on("error",r)})},function(e,t,r){"use strict";const n=r(99);e.exports=e=>{let t=e.host;const r=e.headers&&e.headers.host;if(r)if(r.startsWith("[")){t=-1===r.indexOf("]")?r:r.slice(1,-1)}else t=r.split(":",1)[0];return n.isIP(t)?"":t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(60),o=r(38),s=r(11),i=r(100),a=o.promisify(n.stat);t.default=async(e,t)=>{if(t&&"content-length"in t)return Number(t["content-length"]);if(!e)return 0;if(s.default.string(e))return Buffer.byteLength(e);if(s.default.buffer(e))return e.length;if(i.default(e))return o.promisify(e.getLength.bind(e))();if(e instanceof n.ReadStream){const{size:t}=await a(e.path);if(0===t)return;return t}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TimeoutError=void 0;const n=r(99),o=r(294),s=Symbol("reentry"),i=()=>{};class a extends Error{constructor(e,t){super(`Timeout awaiting '${t}' for ${e}ms`),this.event=t,this.name="TimeoutError",this.code="ETIMEDOUT"}}t.TimeoutError=a,t.default=(e,t,r)=>{if(s in e)return i;e[s]=!0;const c=[],{once:u,unhandleAll:l}=o.default(),p=(e,t,r)=>{var n;const o=setTimeout(t,e,e,r);null===(n=o.unref)||void 0===n||n.call(o);const s=()=>{clearTimeout(o)};return c.push(s),s},{host:h,hostname:d}=r,f=(t,r)=>{e.destroy(new a(t,r))},m=()=>{for(const e of c)e();l()};if(e.once("error",t=>{if(m(),0===e.listenerCount("error"))throw t}),e.once("close",m),u(e,"response",e=>{u(e,"end",m)}),void 0!==t.request&&p(t.request,f,"request"),void 0!==t.socket){const r=()=>{f(t.socket,"socket")};e.setTimeout(t.socket,r),c.push(()=>{e.removeListener("timeout",r)})}return u(e,"socket",o=>{var s;const{socketPath:i}=e;if(o.connecting){const e=Boolean(null!=i?i:0!==n.isIP(null!==(s=null!=d?d:h)&&void 0!==s?s:""));if(void 0!==t.lookup&&!e&&void 0===o.address().address){const e=p(t.lookup,f,"lookup");u(o,"lookup",e)}if(void 0!==t.connect){const r=()=>p(t.connect,f,"connect");e?u(o,"connect",r()):u(o,"lookup",e=>{null===e&&u(o,"connect",r())})}void 0!==t.secureConnect&&"https:"===r.protocol&&u(o,"connect",()=>{const e=p(t.secureConnect,f,"secureConnect");u(o,"secureConnect",e)})}if(void 0!==t.send){const r=()=>p(t.send,f,"send");o.connecting?u(o,"connect",()=>{u(e,"upload-complete",r())}):u(e,"upload-complete",r())}}),void 0!==t.response&&u(e,"upload-complete",()=>{const r=p(t.response,f,"response");u(e,"response",r)}),m}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=()=>{const e=[];return{once(t,r,n){t.once(r,n),e.push({origin:t,event:r,fn:n})},unhandleAll(){for(const t of e){const{origin:e,event:r,fn:n}=t;e.removeListener(r,n)}e.length=0}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(11);t.default=e=>{const t={protocol:(e=e).protocol,hostname:n.default.string(e.hostname)&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,host:e.host,hash:e.hash,search:e.search,pathname:e.pathname,href:e.href,path:`${e.pathname||""}${e.search||""}`};return n.default.string(e.port)&&e.port.length>0&&(t.port=Number(e.port)),(e.username||e.password)&&(t.auth=`${e.username||""}:${e.password||""}`),t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(14),o=["protocol","host","hostname","port","pathname","search"];t.default=(e,t)=>{var r,s;if(t.path){if(t.pathname)throw new TypeError("Parameters `path` and `pathname` are mutually exclusive.");if(t.search)throw new TypeError("Parameters `path` and `search` are mutually exclusive.");if(t.searchParams)throw new TypeError("Parameters `path` and `searchParams` are mutually exclusive.")}if(t.search&&t.searchParams)throw new TypeError("Parameters `search` and `searchParams` are mutually exclusive.");if(!e){if(!t.protocol)throw new TypeError("No URL protocol specified");e=`${t.protocol}//${null!==(s=null!==(r=t.hostname)&&void 0!==r?r:t.host)&&void 0!==s?s:""}`}const i=new n.URL(e);if(t.path){const e=t.path.indexOf("?");-1===e?t.pathname=t.path:(t.pathname=t.path.slice(0,e),t.search=t.path.slice(e+1)),delete t.path}for(const e of o)t[e]&&(i[e]=t[e].toString());return i}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.weakMap=new WeakMap,this.map=new Map}set(e,t){"object"==typeof e?this.weakMap.set(e,t):this.map.set(e,t)}get(e){return"object"==typeof e?this.weakMap.get(e):this.map.get(e)}has(e){return"object"==typeof e?this.weakMap.has(e):this.map.has(e)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dnsLookupIpVersionToFamily=t.isDnsLookupIpVersion=void 0;const n={auto:0,ipv4:4,ipv6:6};t.isDnsLookupIpVersion=e=>e in n,t.dnsLookupIpVersionToFamily=e=>{if(t.isDnsLookupIpVersion(e))return n[e];throw new Error("Invalid DNS lookup IP version")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=new Set;t.default=e=>{n.has(e)||(n.add(e),process.emitWarning("Got: "+e,{type:"DeprecationWarning"}))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(11);t.default=(e,t)=>{if(n.default.null_(e.encoding))throw new TypeError("To get a Buffer, set `options.responseType` to `buffer` instead");n.assert.any([n.default.string,n.default.undefined],e.encoding),n.assert.any([n.default.boolean,n.default.undefined],e.resolveBodyOnly),n.assert.any([n.default.boolean,n.default.undefined],e.methodRewriting),n.assert.any([n.default.boolean,n.default.undefined],e.isStream),n.assert.any([n.default.string,n.default.undefined],e.responseType),void 0===e.responseType&&(e.responseType="text");const{retry:r}=e;if(e.retry=t?{...t.retry}:{calculateDelay:e=>e.computedValue,limit:0,methods:[],statusCodes:[],errorCodes:[],maxRetryAfter:void 0},n.default.object(r)?(e.retry={...e.retry,...r},e.retry.methods=[...new Set(e.retry.methods.map(e=>e.toUpperCase()))],e.retry.statusCodes=[...new Set(e.retry.statusCodes)],e.retry.errorCodes=[...new Set(e.retry.errorCodes)]):n.default.number(r)&&(e.retry.limit=r),n.default.undefined(e.retry.maxRetryAfter)&&(e.retry.maxRetryAfter=Math.min(...[e.timeout.request,e.timeout.connect].filter(n.default.number))),n.default.object(e.pagination)){t&&(e.pagination={...t.pagination,...e.pagination});const{pagination:r}=e;if(!n.default.function_(r.transform))throw new Error("`options.pagination.transform` must be implemented");if(!n.default.function_(r.shouldContinue))throw new Error("`options.pagination.shouldContinue` must be implemented");if(!n.default.function_(r.filter))throw new TypeError("`options.pagination.filter` must be implemented");if(!n.default.function_(r.paginate))throw new Error("`options.pagination.paginate` must be implemented")}return"json"===e.responseType&&void 0===e.headers.accept&&(e.headers.accept="application/json"),e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.retryAfterStatusCodes=void 0,t.retryAfterStatusCodes=new Set([413,429,503]);t.default=({attemptCount:e,retryOptions:t,error:r,retryAfter:n})=>{if(e>t.limit)return 0;const o=t.methods.includes(r.options.method),s=t.errorCodes.includes(r.code),i=r.response&&t.statusCodes.includes(r.response.statusCode);if(!o||!s&&!i)return 0;if(r.response){if(n)return void 0===t.maxRetryAfter||n>t.maxRetryAfter?0:n;if(413===r.response.statusCode)return 0}return 2**(e-1)*1e3+100*Math.random()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(36);t.default=(e,t,r,o)=>{const{rawBody:s}=e;try{if("text"===t)return s.toString(o);if("json"===t)return 0===s.length?"":r(s.toString());if("buffer"===t)return s;throw new n.ParseError({message:`Unknown body type '${t}'`,name:"Error"},e)}catch(t){throw new n.ParseError(t,e)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(36);t.default=function(e,...t){const r=(async()=>{if(e instanceof n.RequestError)try{for(const r of t)if(r)for(const t of r)e=await t(e)}catch(t){e=t}throw e})(),o=()=>r;return r.json=o,r.text=o,r.buffer=o,r.on=o,r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(11);t.default=function e(t){for(const r of Object.values(t))(n.default.plainObject(r)||n.default.array(r))&&e(r);return Object.freeze(t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e){e.exports=JSON.parse('{"name":"shopify-api-node","version":"3.6.0","description":"Shopify API bindings for Node.js","main":"index.js","directories":{"test":"test"},"engines":{"node":">=10.0.0"},"files":["resources","mixins","index.js","index.d.ts"],"dependencies":{"got":"^11.1.4","lodash":"^4.17.10","qs":"^6.5.2","stopcock":"^1.0.0"},"devDependencies":{"c8":"^7.3.0","chai":"^4.1.2","eslint":"^7.0.0","eslint-config-prettier":"^6.7.0","eslint-plugin-prettier":"^3.1.2","husky":"^4.2.1","lint-staged":"^10.0.2","mocha":"^8.0.1","nock":"^13.0.1","prettier":"^2.0.2"},"scripts":{"test":"npm run lint && c8 --reporter=lcov --reporter=text mocha","watch":"mocha -w","lint":"eslint --ignore-path .gitignore . && prettier --check --ignore-path .gitignore \\"**/*.{json,md,ts,yaml,yml}\\""},"repository":"MONEI/Shopify-api-node","keywords":["Shopify","API","Client"],"author":"alexandre saiz <a@alexandresaiz.com>","license":"MIT","bugs":{"url":"https://github.com/MONEI/Shopify-api-node/issues"},"homepage":"https://github.com/MONEI/Shopify-api-node"}')},function(e,t,r){var n={"./":39,"./access-scope":104,"./access-scope.js":104,"./api-permission":105,"./api-permission.js":105,"./application-charge":112,"./application-charge.js":112,"./application-credit":115,"./application-credit.js":115,"./article":116,"./article.js":116,"./asset":117,"./asset.js":117,"./balance":118,"./balance.js":118,"./blog":119,"./blog.js":119,"./cancellation-request":120,"./cancellation-request.js":120,"./carrier-service":121,"./carrier-service.js":121,"./checkout":122,"./checkout.js":122,"./collect":123,"./collect.js":123,"./collection":124,"./collection-listing":125,"./collection-listing.js":125,"./collection.js":124,"./comment":126,"./comment.js":126,"./country":127,"./country.js":127,"./currency":128,"./currency.js":128,"./custom-collection":129,"./custom-collection.js":129,"./customer":130,"./customer-address":131,"./customer-address.js":131,"./customer-saved-search":132,"./customer-saved-search.js":132,"./customer.js":130,"./discount-code":133,"./discount-code-creation-job":134,"./discount-code-creation-job.js":134,"./discount-code.js":133,"./dispute":135,"./dispute.js":135,"./draft-order":136,"./draft-order.js":136,"./event":137,"./event.js":137,"./fulfillment":138,"./fulfillment-event":139,"./fulfillment-event.js":139,"./fulfillment-order":140,"./fulfillment-order.js":140,"./fulfillment-request":141,"./fulfillment-request.js":141,"./fulfillment-service":142,"./fulfillment-service.js":142,"./fulfillment.js":138,"./gift-card":143,"./gift-card-adjustment":144,"./gift-card-adjustment.js":144,"./gift-card.js":143,"./index":39,"./index.js":39,"./inventory-item":145,"./inventory-item.js":145,"./inventory-level":146,"./inventory-level.js":146,"./location":147,"./location.js":147,"./marketing-event":148,"./marketing-event.js":148,"./metafield":149,"./metafield.js":149,"./order":150,"./order-risk":151,"./order-risk.js":151,"./order.js":150,"./page":152,"./page.js":152,"./payment":153,"./payment.js":153,"./payout":154,"./payout.js":154,"./policy":155,"./policy.js":155,"./price-rule":156,"./price-rule.js":156,"./product":157,"./product-image":158,"./product-image.js":158,"./product-listing":159,"./product-listing.js":159,"./product-resource-feedback":160,"./product-resource-feedback.js":160,"./product-variant":161,"./product-variant.js":161,"./product.js":157,"./province":162,"./province.js":162,"./recurring-application-charge":163,"./recurring-application-charge.js":163,"./redirect":164,"./redirect.js":164,"./refund":165,"./refund.js":165,"./report":166,"./report.js":166,"./resource-feedback":167,"./resource-feedback.js":167,"./script-tag":168,"./script-tag.js":168,"./shipping-zone":169,"./shipping-zone.js":169,"./shop":170,"./shop.js":170,"./smart-collection":171,"./smart-collection.js":171,"./storefront-access-token":172,"./storefront-access-token.js":172,"./tender-transaction":173,"./tender-transaction.js":173,"./theme":174,"./theme.js":174,"./transaction":175,"./transaction.js":175,"./usage-charge":176,"./usage-charge.js":176,"./user":177,"./user.js":177,"./webhook":178,"./webhook.js":178};function o(e){var t=s(e);return r(t)}function s(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=s,e.exports=o,o.id=307},function(e,t,r){var n=r(309),o=r(314);e.exports=function(e){return n((function(t,r){var n=-1,s=r.length,i=s>1?r[s-1]:void 0,a=s>2?r[2]:void 0;for(i=e.length>3&&"function"==typeof i?(s--,i):void 0,a&&o(r[0],r[1],a)&&(i=s<3?void 0:i,s=1),t=Object(t);++n<s;){var c=r[n];c&&e(t,c,n,i)}return t}))}},function(e,t,r){var n=r(59),o=r(108),s=r(109);e.exports=function(e,t){return s(o(e,t,n),e+"")}},function(e,t){e.exports=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}},function(e,t,r){var n=r(312),o=r(107),s=r(59),i=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:s;e.exports=i},function(e,t){e.exports=function(e){return function(){return e}}},function(e,t){var r=Date.now;e.exports=function(e){var t=0,n=0;return function(){var o=r(),s=16-(o-n);if(n=o,s>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},function(e,t,r){var n=r(30),o=r(27),s=r(25),i=r(9);e.exports=function(e,t,r){if(!i(r))return!1;var a=typeof t;return!!("number"==a?o(r)&&s(t,r.length):"string"==a&&t in r)&&n(r[t],e)}},function(e,t,r){var n=r(316),o=r(90);e.exports=function(e,t){return n(e,t,(function(t,r){return o(e,r)}))}},function(e,t,r){var n=r(34),o=r(317),s=r(19);e.exports=function(e,t,r){for(var i=-1,a=t.length,c={};++i<a;){var u=t[i],l=n(e,u);r(l,u)&&o(c,s(u,e),l)}return c}},function(e,t,r){var n=r(40),o=r(19),s=r(25),i=r(9),a=r(20);e.exports=function(e,t,r,c){if(!i(e))return e;for(var u=-1,l=(t=o(t,e)).length,p=l-1,h=e;null!=h&&++u<l;){var d=a(t[u]),f=r;if("__proto__"===d||"constructor"===d||"prototype"===d)return e;if(u!=p){var m=h[d];void 0===(f=c?c(m,d,h):void 0)&&(f=i(m)?m:s(t[u+1])?[]:{})}n(h,d,f),h=h[d]}return e}},function(e,t,r){var n=r(319);e.exports=function(e){return(null==e?0:e.length)?n(e,1):[]}},function(e,t,r){var n=r(55),o=r(320);e.exports=function e(t,r,s,i,a){var c=-1,u=t.length;for(s||(s=o),a||(a=[]);++c<u;){var l=t[c];r>0&&s(l)?r>1?e(l,r-1,s,i,a):n(a,l):i||(a[a.length]=l)}return a}},function(e,t,r){var n=r(18),o=r(45),s=r(7),i=n?n.isConcatSpreadable:void 0;e.exports=function(e){return s(e)||o(e)||!!(i&&e&&e[i])}},function(e,t,r){"use strict";var n=r(66),o=r(111),s=Object.prototype.hasOwnProperty,i={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},a=Array.isArray,c=Array.prototype.push,u=function(e,t){c.apply(e,a(t)?t:[t])},l=Date.prototype.toISOString,p=o.default,h={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:n.encode,encodeValuesOnly:!1,format:p,formatter:o.formatters[p],indices:!1,serializeDate:function(e){return l.call(e)},skipNulls:!1,strictNullHandling:!1},d=function e(t,r,o,s,i,c,l,p,d,f,m,y,g){var v,b=t;if("function"==typeof l?b=l(r,b):b instanceof Date?b=f(b):"comma"===o&&a(b)&&(b=n.maybeMap(b,(function(e){return e instanceof Date?f(e):e})).join(",")),null===b){if(s)return c&&!y?c(r,h.encoder,g,"key"):r;b=""}if("string"==typeof(v=b)||"number"==typeof v||"boolean"==typeof v||"symbol"==typeof v||"bigint"==typeof v||n.isBuffer(b))return c?[m(y?r:c(r,h.encoder,g,"key"))+"="+m(c(b,h.encoder,g,"value"))]:[m(r)+"="+m(String(b))];var _,w=[];if(void 0===b)return w;if(a(l))_=l;else{var x=Object.keys(b);_=p?x.sort(p):x}for(var k=0;k<_.length;++k){var S=_[k],j=b[S];if(!i||null!==j){var P=a(b)?"function"==typeof o?o(r,S):r:r+(d?"."+S:"["+S+"]");u(w,e(j,P,o,s,i,c,l,p,d,f,m,y,g))}}return w};e.exports=function(e,t){var r,n=e,c=function(e){if(!e)return h;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||h.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=o.default;if(void 0!==e.format){if(!s.call(o.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var n=o.formatters[r],i=h.filter;return("function"==typeof e.filter||a(e.filter))&&(i=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:h.addQueryPrefix,allowDots:void 0===e.allowDots?h.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:h.charsetSentinel,delimiter:void 0===e.delimiter?h.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:h.encode,encoder:"function"==typeof e.encoder?e.encoder:h.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:h.encodeValuesOnly,filter:i,formatter:n,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:h.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:h.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:h.strictNullHandling}}(t);"function"==typeof c.filter?n=(0,c.filter)("",n):a(c.filter)&&(r=c.filter);var l,p=[];if("object"!=typeof n||null===n)return"";l=t&&t.arrayFormat in i?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var f=i[l];r||(r=Object.keys(n)),c.sort&&r.sort(c.sort);for(var m=0;m<r.length;++m){var y=r[m];c.skipNulls&&null===n[y]||u(p,d(n[y],y,f,c.strictNullHandling,c.skipNulls,c.encode?c.encoder:null,c.filter,c.sort,c.allowDots,c.serializeDate,c.formatter,c.encodeValuesOnly,c.charset))}var g=p.join(c.delimiter),v=!0===c.addQueryPrefix?"?":"";return c.charsetSentinel&&("iso-8859-1"===c.charset?v+="utf8=%26%2310003%3B&":v+="utf8=%E2%9C%93&"),g.length>0?v+g:""}},function(e,t,r){"use strict";var n=r(66),o=Object.prototype.hasOwnProperty,s=Array.isArray,i={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:n.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},a=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},c=function(e,t){return e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},u=function(e,t,r,n){if(e){var s=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,i=/(\[[^[\]]*])/g,a=r.depth>0&&/(\[[^[\]]*])/.exec(s),u=a?s.slice(0,a.index):s,l=[];if(u){if(!r.plainObjects&&o.call(Object.prototype,u)&&!r.allowPrototypes)return;l.push(u)}for(var p=0;r.depth>0&&null!==(a=i.exec(s))&&p<r.depth;){if(p+=1,!r.plainObjects&&o.call(Object.prototype,a[1].slice(1,-1))&&!r.allowPrototypes)return;l.push(a[1])}return a&&l.push("["+s.slice(a.index)+"]"),function(e,t,r,n){for(var o=n?t:c(t,r),s=e.length-1;s>=0;--s){var i,a=e[s];if("[]"===a&&r.parseArrays)i=[].concat(o);else{i=r.plainObjects?Object.create(null):{};var u="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,l=parseInt(u,10);r.parseArrays||""!==u?!isNaN(l)&&a!==u&&String(l)===u&&l>=0&&r.parseArrays&&l<=r.arrayLimit?(i=[])[l]=o:i[u]=o:i={0:o}}o=i}return o}(l,t,r,n)}};e.exports=function(e,t){var r=function(e){if(!e)return i;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?i.charset:e.charset;return{allowDots:void 0===e.allowDots?i.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:i.allowPrototypes,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:i.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:i.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:i.comma,decoder:"function"==typeof e.decoder?e.decoder:i.decoder,delimiter:"string"==typeof e.delimiter||n.isRegExp(e.delimiter)?e.delimiter:i.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:i.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:i.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:i.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:i.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:i.strictNullHandling}}(t);if(""===e||null==e)return r.plainObjects?Object.create(null):{};for(var l="string"==typeof e?function(e,t){var r,u={},l=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,p=t.parameterLimit===1/0?void 0:t.parameterLimit,h=l.split(t.delimiter,p),d=-1,f=t.charset;if(t.charsetSentinel)for(r=0;r<h.length;++r)0===h[r].indexOf("utf8=")&&("utf8=%E2%9C%93"===h[r]?f="utf-8":"utf8=%26%2310003%3B"===h[r]&&(f="iso-8859-1"),d=r,r=h.length);for(r=0;r<h.length;++r)if(r!==d){var m,y,g=h[r],v=g.indexOf("]="),b=-1===v?g.indexOf("="):v+1;-1===b?(m=t.decoder(g,i.decoder,f,"key"),y=t.strictNullHandling?null:""):(m=t.decoder(g.slice(0,b),i.decoder,f,"key"),y=n.maybeMap(c(g.slice(b+1),t),(function(e){return t.decoder(e,i.decoder,f,"value")}))),y&&t.interpretNumericEntities&&"iso-8859-1"===f&&(y=a(y)),g.indexOf("[]=")>-1&&(y=s(y)?[y]:y),o.call(u,m)?u[m]=n.combine(u[m],y):u[m]=y}return u}(e,r):e,p=r.plainObjects?Object.create(null):{},h=Object.keys(l),d=0;d<h.length;++d){var f=h[d],m=u(f,l[f],r,"string"==typeof e);p=n.merge(p,m,r)}return n.compact(p)}},function(e,t,r){var n=r(52),o=r(75),s=r(40),i=r(324),a=r(325),c=r(328),u=r(329),l=r(330),p=r(331),h=r(84),d=r(114),f=r(33),m=r(332),y=r(333),g=r(338),v=r(7),b=r(24),_=r(339),w=r(9),x=r(341),k=r(16),S=r(67),j={};j["[object Arguments]"]=j["[object Array]"]=j["[object ArrayBuffer]"]=j["[object DataView]"]=j["[object Boolean]"]=j["[object Date]"]=j["[object Float32Array]"]=j["[object Float64Array]"]=j["[object Int8Array]"]=j["[object Int16Array]"]=j["[object Int32Array]"]=j["[object Map]"]=j["[object Number]"]=j["[object Object]"]=j["[object RegExp]"]=j["[object Set]"]=j["[object String]"]=j["[object Symbol]"]=j["[object Uint8Array]"]=j["[object Uint8ClampedArray]"]=j["[object Uint16Array]"]=j["[object Uint32Array]"]=!0,j["[object Error]"]=j["[object Function]"]=j["[object WeakMap]"]=!1,e.exports=function e(t,r,P,T,E,O){var A,C=1&r,I=2&r,U=4&r;if(P&&(A=E?P(t,T,E,O):P(t)),void 0!==A)return A;if(!w(t))return t;var q=v(t);if(q){if(A=m(t),!C)return u(t,A)}else{var R=f(t),H="[object Function]"==R||"[object GeneratorFunction]"==R;if(b(t))return c(t,C);if("[object Object]"==R||"[object Arguments]"==R||H&&!E){if(A=I||H?{}:g(t),!C)return I?p(t,a(A,t)):l(t,i(A,t))}else{if(!j[R])return E?t:{};A=y(t,R,C)}}O||(O=new n);var L=O.get(t);if(L)return L;O.set(t,A),x(t)?t.forEach((function(n){A.add(e(n,r,P,n,t,O))})):_(t)&&t.forEach((function(n,o){A.set(o,e(n,r,P,o,t,O))}));var N=q?void 0:(U?I?d:h:I?S:k)(t);return o(N||t,(function(n,o){N&&(n=t[o=n]),s(A,o,e(n,r,P,o,t,O))})),A}},function(e,t,r){var n=r(21),o=r(16);e.exports=function(e,t){return e&&n(t,o(t),e)}},function(e,t,r){var n=r(21),o=r(67);e.exports=function(e,t){return e&&n(t,o(t),e)}},function(e,t,r){var n=r(9),o=r(26),s=r(327),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return s(e);var t=o(e),r=[];for(var a in e)("constructor"!=a||!t&&i.call(e,a))&&r.push(a);return r}},function(e,t){e.exports=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}},function(e,t,r){(function(e){var n=r(8),o=t&&!t.nodeType&&t,s=o&&"object"==typeof e&&e&&!e.nodeType&&e,i=s&&s.exports===o?n.Buffer:void 0,a=i?i.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var r=e.length,n=a?a(r):new e.constructor(r);return e.copy(n),n}}).call(this,r(46)(e))},function(e,t){e.exports=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}},function(e,t,r){var n=r(21),o=r(56);e.exports=function(e,t){return n(e,o(e),t)}},function(e,t,r){var n=r(21),o=r(113);e.exports=function(e,t){return n(e,o(e),t)}},function(e,t){var r=Object.prototype.hasOwnProperty;e.exports=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&r.call(e,"index")&&(n.index=e.index,n.input=e.input),n}},function(e,t,r){var n=r(68),o=r(334),s=r(335),i=r(336),a=r(337);e.exports=function(e,t,r){var c=e.constructor;switch(t){case"[object ArrayBuffer]":return n(e);case"[object Boolean]":case"[object Date]":return new c(+e);case"[object DataView]":return o(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return a(e,r);case"[object Map]":return new c;case"[object Number]":case"[object String]":return new c(e);case"[object RegExp]":return s(e);case"[object Set]":return new c;case"[object Symbol]":return i(e)}}},function(e,t,r){var n=r(68);e.exports=function(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}},function(e,t){var r=/\w*$/;e.exports=function(e){var t=new e.constructor(e.source,r.exec(e));return t.lastIndex=e.lastIndex,t}},function(e,t,r){var n=r(18),o=n?n.prototype:void 0,s=o?o.valueOf:void 0;e.exports=function(e){return s?Object(s.call(e)):{}}},function(e,t,r){var n=r(68);e.exports=function(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}},function(e,t,r){var n=r(76),o=r(35),s=r(26);e.exports=function(e){return"function"!=typeof e.constructor||s(e)?{}:n(o(e))}},function(e,t,r){var n=r(340),o=r(49),s=r(50),i=s&&s.isMap,a=i?o(i):n;e.exports=a},function(e,t,r){var n=r(33),o=r(10);e.exports=function(e){return o(e)&&"[object Map]"==n(e)}},function(e,t,r){var n=r(342),o=r(49),s=r(50),i=s&&s.isSet,a=i?o(i):n;e.exports=a},function(e,t,r){var n=r(33),o=r(10);e.exports=function(e){return o(e)&&"[object Set]"==n(e)}},function(e,t,r){var n=r(19),o=r(344),s=r(345),i=r(20);e.exports=function(e,t){return t=n(t,e),null==(e=s(e,t))||delete e[i(o(t))]}},function(e,t){e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},function(e,t,r){var n=r(34),o=r(346);e.exports=function(e,t){return t.length<2?e:n(e,o(t,0,-1))}},function(e,t){e.exports=function(e,t,r){var n=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(r=r>o?o:r)<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var s=Array(o);++n<o;)s[n]=e[n+t];return s}},function(e,t,r){var n=r(348);e.exports=function(e){return n(e)?void 0:e}},function(e,t,r){var n=r(17),o=r(35),s=r(10),i=Function.prototype,a=Object.prototype,c=i.toString,u=a.hasOwnProperty,l=c.call(Object);e.exports=function(e){if(!s(e)||"[object Object]"!=n(e))return!1;var t=o(e);if(null===t)return!0;var r=u.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&c.call(r)==l}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(350),o=r(70);t.default=function(e,t){if(function(e){return e.length>1}(e))return async function(r,n){return await o.applySession(r,n,t),e(r,n)};const r=e;function s(e){return n.createElement(r,e)}var i;return s.displayName=`withSession(${i=r,i.displayName||i.name||"Component"})`,r.getInitialProps&&(s.getInitialProps=async e=>("undefined"==typeof window&&await o.applySession(e.req,e.res,t),r.getInitialProps(e))),s}},function(e,t,r){"use strict";e.exports=r(351)},function(e,t,r){"use strict";
/** @license React v16.14.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(352),o="function"==typeof Symbol&&Symbol.for,s=o?Symbol.for("react.element"):60103,i=o?Symbol.for("react.portal"):60106,a=o?Symbol.for("react.fragment"):60107,c=o?Symbol.for("react.strict_mode"):60108,u=o?Symbol.for("react.profiler"):60114,l=o?Symbol.for("react.provider"):60109,p=o?Symbol.for("react.context"):60110,h=o?Symbol.for("react.forward_ref"):60112,d=o?Symbol.for("react.suspense"):60113,f=o?Symbol.for("react.memo"):60115,m=o?Symbol.for("react.lazy"):60116,y="function"==typeof Symbol&&Symbol.iterator;function g(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function _(e,t,r){this.props=e,this.context=t,this.refs=b,this.updater=r||v}function w(){}function x(e,t,r){this.props=e,this.context=t,this.refs=b,this.updater=r||v}_.prototype.isReactComponent={},_.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(g(85));this.updater.enqueueSetState(this,e,t,"setState")},_.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},w.prototype=_.prototype;var k=x.prototype=new w;k.constructor=x,n(k,_.prototype),k.isPureReactComponent=!0;var S={current:null},j=Object.prototype.hasOwnProperty,P={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var n,o={},i=null,a=null;if(null!=t)for(n in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(i=""+t.key),t)j.call(t,n)&&!P.hasOwnProperty(n)&&(o[n]=t[n]);var c=arguments.length-2;if(1===c)o.children=r;else if(1<c){for(var u=Array(c),l=0;l<c;l++)u[l]=arguments[l+2];o.children=u}if(e&&e.defaultProps)for(n in c=e.defaultProps)void 0===o[n]&&(o[n]=c[n]);return{$$typeof:s,type:e,key:i,ref:a,props:o,_owner:S.current}}function E(e){return"object"==typeof e&&null!==e&&e.$$typeof===s}var O=/\/+/g,A=[];function C(e,t,r,n){if(A.length){var o=A.pop();return o.result=e,o.keyPrefix=t,o.func=r,o.context=n,o.count=0,o}return{result:e,keyPrefix:t,func:r,context:n,count:0}}function I(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>A.length&&A.push(e)}function U(e,t,r){return null==e?0:function e(t,r,n,o){var a=typeof t;"undefined"!==a&&"boolean"!==a||(t=null);var c=!1;if(null===t)c=!0;else switch(a){case"string":case"number":c=!0;break;case"object":switch(t.$$typeof){case s:case i:c=!0}}if(c)return n(o,t,""===r?"."+q(t,0):r),1;if(c=0,r=""===r?".":r+":",Array.isArray(t))for(var u=0;u<t.length;u++){var l=r+q(a=t[u],u);c+=e(a,l,n,o)}else if(null===t||"object"!=typeof t?l=null:l="function"==typeof(l=y&&t[y]||t["@@iterator"])?l:null,"function"==typeof l)for(t=l.call(t),u=0;!(a=t.next()).done;)c+=e(a=a.value,l=r+q(a,u++),n,o);else if("object"===a)throw n=""+t,Error(g(31,"[object Object]"===n?"object with keys {"+Object.keys(t).join(", ")+"}":n,""));return c}(e,"",t,r)}function q(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function R(e,t){e.func.call(e.context,t,e.count++)}function H(e,t,r){var n=e.result,o=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?L(e,n,r,(function(e){return e})):null!=e&&(E(e)&&(e=function(e,t){return{$$typeof:s,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,o+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(O,"$&/")+"/")+r)),n.push(e))}function L(e,t,r,n,o){var s="";null!=r&&(s=(""+r).replace(O,"$&/")+"/"),U(e,H,t=C(t,s,n,o)),I(t)}var N={current:null};function M(){var e=N.current;if(null===e)throw Error(g(321));return e}var D={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:S,IsSomeRendererActing:{current:!1},assign:n};t.Children={map:function(e,t,r){if(null==e)return e;var n=[];return L(e,n,null,t,r),n},forEach:function(e,t,r){if(null==e)return e;U(e,R,t=C(null,null,t,r)),I(t)},count:function(e){return U(e,(function(){return null}),null)},toArray:function(e){var t=[];return L(e,t,null,(function(e){return e})),t},only:function(e){if(!E(e))throw Error(g(143));return e}},t.Component=_,t.Fragment=a,t.Profiler=u,t.PureComponent=x,t.StrictMode=c,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null==e)throw Error(g(267,e));var o=n({},e.props),i=e.key,a=e.ref,c=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,c=S.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(l in t)j.call(t,l)&&!P.hasOwnProperty(l)&&(o[l]=void 0===t[l]&&void 0!==u?u[l]:t[l])}var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){u=Array(l);for(var p=0;p<l;p++)u[p]=arguments[p+2];o.children=u}return{$$typeof:s,type:e.type,key:i,ref:a,props:o,_owner:c}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:p,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:h,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:m,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return M().useCallback(e,t)},t.useContext=function(e,t){return M().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return M().useEffect(e,t)},t.useImperativeHandle=function(e,t,r){return M().useImperativeHandle(e,t,r)},t.useLayoutEffect=function(e,t){return M().useLayoutEffect(e,t)},t.useMemo=function(e,t){return M().useMemo(e,t)},t.useReducer=function(e,t,r){return M().useReducer(e,t,r)},t.useRef=function(e){return M().useRef(e)},t.useState=function(e){return M().useState(e)},t.version="16.14.0"},function(e,t,r){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;function i(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var r,a,c=i(e),u=1;u<arguments.length;u++){for(var l in r=Object(arguments[u]))o.call(r,l)&&(c[l]=r[l]);if(n){a=n(r);for(var p=0;p<a.length;p++)s.call(r,a[p])&&(c[a[p]]=r[a[p]])}}return c}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(70);let o=!0;t.default=function(e){return e&&e.store&&e.store.on&&(e.store.on("disconnect",()=>{o=!1}),e.store.on("connect",()=>{o=!0})),(t,r,s)=>{o?n.applySession(t,r,e).then(s):s()}}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.promisifyStore=t.expressSession=void 0;const o=r(38),s=r(13),i=n(r(71));function a(){s.EventEmitter.call(this)}function c(e){}function u(){}o.inherits(a,s.EventEmitter),t.expressSession=c,c.Store=a,o.inherits(u,a),u.prototype.get=o.callbackify(i.default.prototype.get),u.prototype.set=o.callbackify(i.default.prototype.set),u.prototype.destroy=o.callbackify(i.default.prototype.destroy),u.prototype.all=o.callbackify(i.default.prototype.all),c.MemoryStore=u,t.promisifyStore=function(e){return console.warn("promisifyStore has been deprecated: express-session store still works without using this."),e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SessionStore=void 0;t.SessionStore=class{}},function(e,t,r){"use strict";r.r(t);var n=r(179),o=r.n(n),s=r(180),i=r.n(s),a=r(44),c=r.n(a),u=r(3),l=r.n(u),p=r(6),h=r.n(p),d=r(182),f=r(41),m=r.n(f),y=r(23),g=r.n(y),v="(function() {\n      function ITPHelper(opts) {\n        this.itpContent = document.getElementById('TopLevelInteractionContent');\n        this.itpAction = document.getElementById('TopLevelInteractionButton');\n        this.redirectUrl = opts.redirectUrl;\n      }\n\n      ITPHelper.prototype.redirect = function() {\n        sessionStorage.setItem('shopify.top_level_interaction', true);\n        window.location.href = this.redirectUrl;\n      }\n\n      ITPHelper.prototype.userAgentIsAffected = function() {\n        return Boolean(document.hasStorageAccess);\n      }\n\n      ITPHelper.prototype.canPartitionCookies = function() {\n        var versionRegEx = /Version\\/12\\.0\\.?\\d? Safari/;\n        return versionRegEx.test(navigator.userAgent);\n      }\n\n      ITPHelper.prototype.setUpContent = function(onClick) {\n        this.itpContent.style.display = 'block';\n        this.itpAction.addEventListener('click', this.redirect.bind(this));\n      }\n\n      ITPHelper.prototype.execute = function() {\n        if (!this.itpContent) {\n          return;\n        }\n\n        if (this.userAgentIsAffected()) {\n          this.setUpContent();\n        } else {\n          this.redirect();\n        }\n      }\n\n      this.ITPHelper = ITPHelper;\n    })(window);",b="html,\nbody {\n  min-height: 100%;\n  height: 100%;\n  font-size: 1.5rem;\n  font-weight: 400;\n  line-height: 2rem;\n  text-transform: initial;\n  letter-spacing: initial;\n  font-weight: 400;\n  color: #212b36;\n  font-family: -apple-system, BlinkMacSystemFont, San Francisco, Roboto,\n    Segoe UI, Helvetica Neue, sans-serif;\n}\n\n@media (min-width: 40em) {\n  html,\n  body {\n    font-size: 1.4rem;\n  }\n}\n\nhtml {\n  position: relative;\n  font-size: 62.5%;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  -webkit-text-size-adjust: 100%;\n  -ms-text-size-adjust: 100%;\n  text-size-adjust: 100%;\n  text-rendering: optimizeLegibility;\n}\n\nbody {\n  min-height: 100%;\n  margin: 0;\n  padding: 0;\n  background-color: #f4f6f8;\n}\n\n*,\n*::before,\n*::after {\n  box-sizing: border-box;\n}\n\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\np {\n  margin: 0;\n  font-size: 1em;\n  font-weight: 400;\n}\n\n#CookiePartitionPrompt, #RequestStorageAccess {\n  display: none;\n}\n\n.Polaris-Page {\n  margin: 0 auto;\n  padding: 0;\n  max-width: 99.8rem;\n}\n\n@media (min-width: 30.625em) {\n  .Polaris-Page {\n    padding: 0 2rem;\n  }\n}\n@media (min-width: 46.5em) {\n  .Polaris-Page {\n    padding: 0 3.2rem;\n  }\n}\n\n.Polaris-Page__Content {\n  margin: 2rem 0;\n}\n\n@media (min-width: 46.5em) {\n  .Polaris-Page__Content {\n    margin-top: 2rem;\n  }\n}\n\n@media (min-width: 46.5em) {\n  .Polaris-Page {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 100vh;\n  }\n}\n\n.Polaris-Layout {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-wrap: wrap;\n  flex-wrap: wrap;\n  -webkit-box-pack: center;\n  -ms-flex-pack: center;\n  justify-content: center;\n  -webkit-box-align: start;\n  -ms-flex-align: start;\n  align-items: flex-start;\n  margin-top: -2rem;\n  margin-left: -2rem;\n}\n\n.Polaris-Layout__Section {\n  -webkit-box-flex: 2;\n  -ms-flex: 2 2 48rem;\n  flex: 2 2 48rem;\n  min-width: 51%;\n}\n\n.Polaris-Layout__Section--fullWidth {\n  -webkit-box-flex: 1;\n  -ms-flex: 1 1 100%;\n  flex: 1 1 100%;\n}\n\n.Polaris-Layout__Section {\n  max-width: calc(100% - 2rem);\n  margin-top: 2rem;\n  margin-left: 2rem;\n}\n\n.Polaris-Stack {\n  margin-top: -1.6rem;\n  margin-left: -1.6rem;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-wrap: wrap;\n  flex-wrap: wrap;\n  -webkit-box-align: stretch;\n  -ms-flex-align: stretch;\n  align-items: stretch;\n}\n\n.Polaris-Stack > .Polaris-Stack__Item {\n  margin-top: 1.6rem;\n  margin-left: 1.6rem;\n  max-width: calc(100% - 1.6rem);\n}\n\n.Polaris-Stack__Item {\n  -webkit-box-flex: 0;\n  -ms-flex: 0 0 auto;\n  flex: 0 0 auto;\n  min-width: 0;\n}\n\n.Polaris-Heading {\n  font-size: 1.7rem;\n  font-weight: 600;\n  line-height: 2.4rem;\n  margin: 0;\n}\n\n@media (min-width: 40em) {\n  .Polaris-Heading {\n    font-size: 1.6rem;\n  }\n}\n\n.Polaris-Card {\n  overflow: hidden;\n  background-color: white;\n  box-shadow: 0 0 0 1px rgba(63, 63, 68, 0.05),\n    0 1px 3px 0 rgba(63, 63, 68, 0.15);\n}\n\n.Polaris-Card + .Polaris-Card {\n  margin-top: 2rem;\n}\n\n@media (min-width: 30.625em) {\n  .Polaris-Card {\n    border-radius: 3px;\n  }\n}\n\n.Polaris-Card__Header {\n  padding: 2rem 2rem 0;\n}\n\n.Polaris-Card__Section {\n  padding: 2rem;\n}\n\n.Polaris-Card__Section + .Polaris-Card__Section {\n  border-top: 1px solid #dfe3e8;\n}\n\n.Polaris-Card__Section--subdued {\n  background-color: #f9fafb;\n}\n\n.Polaris-Stack--distributionTrailing {\n  -webkit-box-pack: end;\n  -ms-flex-pack: end;\n  justify-content: flex-end;\n}\n\n.Polaris-Stack--vertical {\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n  -ms-flex-direction: column;\n  flex-direction: column;\n}\n\n.Polaris-Button {\n  fill: #637381;\n  position: relative;\n  display: -webkit-inline-box;\n  display: -ms-inline-flexbox;\n  display: inline-flex;\n  -webkit-box-align: center;\n  -ms-flex-align: center;\n  align-items: center;\n  -webkit-box-pack: center;\n  -ms-flex-pack: center;\n  justify-content: center;\n  min-height: 3.6rem;\n  min-width: 3.6rem;\n  margin: 0;\n  padding: 0.7rem 1.6rem;\n  background: linear-gradient(to bottom, white, #f9fafb);\n  border: 1px solid #c4cdd5;\n  box-shadow: 0 1px 0 0 rgba(22, 29, 37, 0.05);\n  border-radius: 3px;\n  line-height: 1;\n  color: #212b36;\n  text-align: center;\n  cursor: pointer;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  text-decoration: none;\n  transition-property: background, border, box-shadow;\n  transition-duration: 200ms;\n  transition-timing-function: cubic-bezier(0.64, 0, 0.35, 1);\n}\n\n.Polaris-Button:hover {\n  background: linear-gradient(to bottom, #f9fafb, #f4f6f8);\n  border-color: #c4cdd5;\n}\n\n.Polaris-Button:focus {\n  border-color: #5c6ac4;\n  outline: 0;\n  box-shadow: 0 0 0 1px #5c6ac4;\n}\n\n.Polaris-Button:active {\n  background: linear-gradient(to bottom, #f4f6f8, #f4f6f8);\n  border-color: #c4cdd5;\n  box-shadow: 0 0 0 0 transparent, inset 0 1px 1px 0 rgba(99, 115, 129, 0.1),\n    inset 0 1px 4px 0 rgba(99, 115, 129, 0.2);\n}\n\n.Polaris-Button.Polaris-Button--disabled {\n  fill: #919eab;\n  transition: none;\n  background: linear-gradient(to bottom, #f4f6f8, #f4f6f8);\n  color: #919eab;\n}\n\n.Polaris-Button__Content {\n  font-size: 1.5rem;\n  font-weight: 400;\n  line-height: 1.6rem;\n  text-transform: initial;\n  letter-spacing: initial;\n  position: relative;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n  -ms-flex-pack: center;\n  justify-content: center;\n  -webkit-box-align: center;\n  -ms-flex-align: center;\n  align-items: center;\n  min-width: 1px;\n  min-height: 1px;\n}\n\n@media (min-width: 40em) {\n  .Polaris-Button__Content {\n    font-size: 1.4rem;\n  }\n}\n\n.Polaris-Button--primary {\n  background: linear-gradient(to bottom, #6371c7, #5563c1);\n  border-color: #3f4eae;\n  box-shadow: inset 0 1px 0 0 #6774c8, 0 1px 0 0 rgba(22, 29, 37, 0.05),\n    0 0 0 0 transparent;\n  color: white;\n  fill: white;\n}\n\n.Polaris-Button--primary:hover {\n  background: linear-gradient(to bottom, #5c6ac4, #4959bd);\n  border-color: #3f4eae;\n  color: white;\n  text-decoration: none;\n}\n\n.Polaris-Button--primary:focus {\n  border-color: #202e78;\n  box-shadow: inset 0 1px 0 0 #6f7bcb, 0 1px 0 0 rgba(22, 29, 37, 0.05),\n    0 0 0 1px #202e78;\n}\n\n.Polaris-Button--primary:active {\n  background: linear-gradient(to bottom, #3f4eae, #3f4eae);\n  border-color: #38469b;\n  box-shadow: inset 0 0 0 0 transparent, 0 1px 0 0 rgba(22, 29, 37, 0.05),\n    0 0 1px 0 #38469b;\n}\n\n.Polaris-Button--primary.Polaris-Button--disabled {\n  fill: white;\n  background: linear-gradient(to bottom, #bac0e6, #bac0e6);\n  border-color: #a7aedf;\n  box-shadow: none;\n  color: white;\n}",_=function(e){return'(function() {\n      function setUpTopLevelInteraction() {\n        var TopLevelInteraction = new ITPHelper({\n          redirectUrl: "/auth?shop='.concat(encodeURIComponent(e),'",\n        });\n        TopLevelInteraction.execute();\n      }\n      document.addEventListener("DOMContentLoaded", setUpTopLevelInteraction);\n    })();')},w={ShopParamMissing:"Expected a valid shop query parameter",InvalidHmac:"HMAC validation failed",AccessTokenFetchFailure:"Could not fetch access token",NonceMatchFailed:"Request origin could not be verified"};function x(e){return function(t,r){var n=t.query.shop;null!=n?r.writeHead(200,{"Content-Type":"text/html"}).end('\n      <!DOCTYPE html>\n      <html lang="en">\n      <head>\n        <meta charset="utf-8" />\n        <style>\n          '.concat(b,'\n        </style>\n        <base target="_top">\n        <title>Redirecting</title>\n\n        <script>\n          window.apiKey = "').concat(e,'";\n          window.shopOrigin = "https://').concat(encodeURIComponent(n),'";\n\n          ').concat(v,"\n          ").concat(_(n),'\n        <\/script>\n      </head>\n      <body>\n        <main id="TopLevelInteractionContent">\n          <div class="Polaris-Page">\n            <div class="Polaris-Page__Content">\n              <div class="Polaris-Layout">\n                <div class="Polaris-Layout__Section">\n                  <div class="Polaris-Stack Polaris-Stack--vertical">\n                    <div class="Polaris-Stack__Item">\n                      <div class="Polaris-Card">\n                        <div class="Polaris-Card__Header">\n                          <h1 class="Polaris-Heading">').concat("Enable cookies",'</h1>\n                        </div>\n                        <div class="Polaris-Card__Section">\n                          <p>').concat("You must manually enable cookies in this browser in order to use this app within Shopify.",'</p>\n                        </div>\n                        <div class="Polaris-Card__Section Polaris-Card__Section--subdued">\n                          <p>').concat("Cookies let the app authenticate you by temporarily storing your preferences and personal\ninformation. They expire after 30 days.",'</p>\n                        </div>\n                      </div>\n                    </div>\n                    <div class="Polaris-Stack__Item">\n                      <div class="Polaris-Stack Polaris-Stack--distributionTrailing">\n                        <div class="Polaris-Stack__Item">\n                          <button type="button" class="Polaris-Button Polaris-Button--primary" id="TopLevelInteractionButton">\n                            <span class="Polaris-Button__Content"><span>').concat("Enable cookies","</span></span>\n                          </button>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </main>\n      </body>\n      </html>\n    ")):r.writeHead(400).end(w.ShopParamMissing)}}var k=r(42),S=r.n(k),j=r(181),P=r.n(j),T=r(72);function E(e,t){return function(r,n){var o=function(e){var t=e.headers["user-agent"],r={};return t&&t.match(/chrome|crios/i)&&(r={sameSite:"None",secure:!0}),r}(r),s="object"===P()(t)?"j:"+JSON.stringify(t):String(t);n.setHeader("Set-Cookie",Object(T.serialize)(e,String(s)),o)}}function O(e){return Boolean(e.cookies.shopifyTestCookie)}function A(e){return Boolean(e.cookies["shopify.granted_storage_access"])}function C(e){return Boolean(e.cookies.shopifyTopLevelOAuth)}var I=E("shopifyTopLevelOAuth","1"),U=E("shopifyTopLevelOAuth",""),q=E("shopifyTestCookie","1"),R=(E("shopifyTestCookie",""),E("shopify.granted_storage_access","1"),E("shopify.granted_storage_access",""),function(e,t){return Object.keys(e).reduce((function(r,n){return t.includes(n)||(r[n]=e[n]),r}),{})}),H=function(e,t){var r=e.url.split("?")[1]?"?".concat(e.url.split("?")[1]):"";t.writeHead("307",{Location:"/api/auth".concat(r)}).end()};function L(e){var t=e.paramsName,r=e.sharedSecret,n=e.apiKey,o=e.scopes,s=e.accessTokenTimeout,i=e.accessMode,a=e.apiVersion,c=e.autoLimit,u=e.presentmentPrices,p=e.shopifyAPITimeout,d=e.whatToDoAfterAuth;return function(){var e=h()(l.a.mark((function e(h,f){var m,y,v,b,_,x,k,j,P,T,E,O,A,C,I;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m=h.query,y=m.code,v=m.shop,b=m.state,_=h.session.nonce,b===_){e.next=5;break}return f.writeHead(403).end(w.NonceMatchFailed),e.abrupt("return");case 5:if(v&&null!==v.match(/[a-zA-Z0-9][a-zA-Z0-9-]*\.myshopify\.com[/]?/)){e.next=8;break}return f.writeHead(400).end(w.ShopParamMissing),e.abrupt("return");case 8:if(x=new S.a({sharedSecret:r,apiKey:n,redirectUri:"https://".concat(h.headers.host,"/api/auth/callback"),scopes:o,timeout:s,accessMode:i}),k=R(h.query,[t]),x.verifyHmac(k)){e.next=13;break}return f.writeHead(400).end(w.InvalidHmac),e.abrupt("return");case 13:return e.next=15,x.getAccessToken(v,y);case 15:if((j=e.sent)&&j.access_token){e.next=19;break}return f.writeHead(401).end(w.AccessTokenFetchFailure),e.abrupt("return");case 19:return P=v.replace(".myshopify.com",""),T=j.access_token,E=j.scope,O=new g.a({shopName:P,accessToken:T,apiVersion:a,autoLimit:c,presentmentPrices:u,timeout:p}),e.prev=22,e.next=25,O.metafield.list();case 25:e.next=31;break;case 27:return e.prev=27,e.t0=e.catch(22),f.writeHead(401).end(w.AccessTokenFetchFailure),e.abrupt("return");case 31:h.session.shop=v,h.session.shopName=P,h.session.accessToken=T,h.session.scope=E,"per-user"===i&&(A=j.expires_in,C=j.associated_user_scope,I=j.associated_user,h.session.expiresIn=A,h.session.associatedUser=I,h.session.associatedUserScope=C),d(h,f,O);case 37:case"end":return e.stop()}}),e,null,[[22,27]])})));return function(t,r){return e.apply(this,arguments)}}()}function N(e){var t=e.paramsName,r=e.sharedSecret,n=e.apiKey,o=e.scopes,s=e.accessTokenTimeout,i=e.accessMode;return function(){var e=h()(l.a.mark((function e(a,c){var u,p,h,d,f,m;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((u=a.query.shop)&&null!==u.match(/[a-zA-Z0-9][a-zA-Z0-9-]*\.myshopify\.com[/]?/)){e.next=4;break}return c.writeHead(400).end(w.ShopParamMissing),e.abrupt("return");case 4:if(p=new S.a({sharedSecret:r,apiKey:n,redirectUri:"https://".concat(a.headers.host,"/api/auth/callback"),scopes:o,timeout:s,accessMode:i}),h=R(a.query,[t]),p.verifyHmac(h)){e.next=9;break}return c.writeHead(400).end(w.InvalidHmac),e.abrupt("return");case 9:d=p.generateNonce(),a.session.nonce=d,f=u.replace(".myshopify.com",""),m=p.generateAuthUrl(f,o,d),U(a,c),c.redirect(m);case 15:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}var M=function(e){return'(function() {\n      function redirect() {\n        var targetInfo = {\n          myshopifyUrl: "https://'.concat(encodeURIComponent(e),'",\n          hasStorageAccessUrl: "/auth/inline?shop=').concat(encodeURIComponent(e),'",\n          doesNotHaveStorageAccessUrl: "/auth/enable_cookies?shop=').concat(encodeURIComponent(e),'",\n          appTargetUrl: "/?shop=').concat(encodeURIComponent(e),'"\n        }\n\n        if (window.top == window.self) {\n          // If the current window is the \'parent\', change the URL by setting location.href\n          window.top.location.href = targetInfo.hasStorageAccessUrl;\n        } else {\n          var storageAccessHelper = new StorageAccessHelper(targetInfo);\n          storageAccessHelper.execute();\n        }\n      }\n\n      document.addEventListener("DOMContentLoaded", redirect);\n    })();')};function D(e){return function(t,r){var n=t.query.shop;null!=n?r.writeHead(200,{"Content-Type":"text/html"}).end('\n<!DOCTYPE html>\n<html lang="en">\n<head>\n  <meta charset="utf-8" />\n  <style>\n    '.concat(b,'\n  </style>\n  <base target="_top">\n  <title>Redirecting</title>\n\n  <script>\n    window.apiKey = "').concat(e,'";\n    window.shopOrigin = "https://').concat(encodeURIComponent(n),'";\n    ').concat(v,"\n    ").concat("(function() {\n      var ACCESS_GRANTED_STATUS = 'storage_access_granted';\n      var ACCESS_DENIED_STATUS = 'storage_access_denied';\n\n      function StorageAccessHelper(redirectData) {\n        this.redirectData = redirectData;\n      }\n\n      StorageAccessHelper.prototype.setNormalizedLink = function(storageAccessStatus) {\n        return storageAccessStatus === ACCESS_GRANTED_STATUS ? this.redirectData.hasStorageAccessUrl : this.redirectData.doesNotHaveStorageAccessUrl;\n      }\n\n      StorageAccessHelper.prototype.redirectToAppTLD = function(storageAccessStatus) {\n        var normalizedLink = document.createElement('a');\n\n        normalizedLink.href = this.setNormalizedLink(storageAccessStatus);\n\n        data = JSON.stringify({\n          message: 'Shopify.API.remoteRedirect',\n          data: {\n            location: normalizedLink.href,\n          }\n        });\n        window.parent.postMessage(data, this.redirectData.myshopifyUrl);\n      }\n\n      StorageAccessHelper.prototype.redirectToAppsIndex = function() {\n        window.parent.location.href = this.redirectData.myshopifyUrl + '/admin/apps';\n      }\n\n      StorageAccessHelper.prototype.redirectToAppTargetUrl = function() {\n        window.location.href = this.redirectData.appTargetUrl;\n      }\n\n      StorageAccessHelper.prototype.sameSiteNoneIncompatible = function(ua) {\n        return ua.includes(\"iPhone OS 12_\") || ua.includes(\"iPad; CPU OS 12_\") || //iOS 12\n        (ua.includes(\"UCBrowser/\")\n            ? this.isOlderUcBrowser(ua) //UC Browser < 12.13.2\n            : (ua.includes(\"Chrome/5\") || ua.includes(\"Chrome/6\"))) ||\n        ua.includes(\"Chromium/5\") || ua.includes(\"Chromium/6\") ||\n        (ua.includes(\" OS X 10_14_\") &&\n            ((ua.includes(\"Version/\") && ua.includes(\"Safari\")) || //Safari on MacOS 10.14\n            ua.endsWith(\"(KHTML, like Gecko)\"))); //Web view on MacOS 10.14\n      }\n\n      StorageAccessHelper.prototype.isOlderUcBrowser = function(ua) {\n        var match = ua.match(/UCBrowser\\/(\\d+)\\.(\\d+)\\.(\\d+)\\./);\n        if (!match) return false;\n        var major = parseInt(match[1]);\n        var minor = parseInt(match[2]);\n        var build = parseInt(match[3]);\n        if (major != 12) return major < 12;\n        if (minor != 13) return minor < 13;\n        return build < 2;\n      }\n\n      StorageAccessHelper.prototype.setCookie = function(value) {\n        if(!this.sameSiteNoneIncompatible(navigator.userAgent)) {\n          value += '; secure; SameSite=None'\n        }\n        document.cookie = value;\n      }\n\n      StorageAccessHelper.prototype.grantedStorageAccess = function() {\n        try {\n          sessionStorage.setItem('shopify.granted_storage_access', true);\n          this.setCookie('shopify.granted_storage_access=true');\n          if (!document.cookie) {\n            throw 'Cannot set third-party cookie.'\n          }\n          this.redirectToAppTargetUrl();\n        } catch (error) {\n          console.warn('Third party cookies may be blocked.', error);\n          this.redirectToAppTLD(ACCESS_DENIED_STATUS);\n        }\n      }\n\n      StorageAccessHelper.prototype.handleRequestStorageAccess = function() {\n        return document.requestStorageAccess().then(this.grantedStorageAccess.bind(this), this.redirectToAppsIndex.bind(this, ACCESS_DENIED_STATUS));\n      }\n\n      StorageAccessHelper.prototype.setupRequestStorageAccess = function() {\n        var requestContent = document.getElementById('RequestStorageAccess');\n        var requestButton = document.getElementById('TriggerAllowCookiesPrompt');\n\n        requestButton.addEventListener('click', this.handleRequestStorageAccess.bind(this));\n        requestContent.style.display = 'block';\n      }\n\n      StorageAccessHelper.prototype.handleHasStorageAccess = function() {\n        if (sessionStorage.getItem('shopify.granted_storage_access')) {\n          // If app was classified by ITP and used Storage Access API to acquire access\n          this.redirectToAppTargetUrl();\n        } else {\n          // If app has not been classified by ITP and still has storage access\n          this.redirectToAppTLD(ACCESS_GRANTED_STATUS);\n        }\n      }\n\n      StorageAccessHelper.prototype.handleGetStorageAccess = function() {\n        if (sessionStorage.getItem('shopify.top_level_interaction')) {\n          // If merchant has been redirected to interact with TLD (requirement for prompting request to gain storage access)\n          this.setupRequestStorageAccess();\n        } else {\n          // If merchant has not been redirected to interact with TLD (requirement for prompting request to gain storage access)\n          this.redirectToAppTLD(ACCESS_DENIED_STATUS);\n        }\n      }\n\n      StorageAccessHelper.prototype.manageStorageAccess = function() {\n        return document.hasStorageAccess().then(function(hasAccess) {\n          if (hasAccess) {\n            this.handleHasStorageAccess();\n          } else {\n            this.handleGetStorageAccess();\n          }\n        }.bind(this));\n      }\n\n      StorageAccessHelper.prototype.execute = function() {\n        if (ITPHelper.prototype.userAgentIsAffected()) {\n          this.manageStorageAccess();\n        } else {\n          this.grantedStorageAccess();\n        }\n      }\n\n      /* ITP 2.0 solution: handles cookie partitioning */\n      StorageAccessHelper.prototype.setUpHelper = function() {\n        return new ITPHelper({redirectUrl: window.shopOrigin + \"/admin/apps/\" + window.apiKey + window.returnTo});\n      }\n\n      StorageAccessHelper.prototype.setCookieAndRedirect = function() {\n        this.setCookie('shopify.cookies_persist=true');\n        var helper = this.setUpHelper();\n        helper.redirect();\n      }\n\n      StorageAccessHelper.prototype.setUpCookiePartitioning = function() {\n        var itpContent = document.getElementById('CookiePartitionPrompt');\n        itpContent.style.display = 'block';\n\n        // var button = document.getElementById('AcceptCookies');\n        // button.addEventListener('click', this.setCookieAndRedirect.bind(this));\n      }\n\n      this.StorageAccessHelper = StorageAccessHelper;\n    })(window);","\n    ").concat(M(n),'\n  <\/script>\n</head>\n<body>\n  <main id="RequestStorageAccess">\n    <div class="Polaris-Page">\n      <div class="Polaris-Page__Content">\n        <div class="Polaris-Layout">\n          <div class="Polaris-Layout__Section">\n            <div class="Polaris-Stack Polaris-Stack--vertical">\n              <div class="Polaris-Stack__Item">\n                <div class="Polaris-Card">\n                  <div class="Polaris-Card__Header">\n                    <h1 class="Polaris-Heading">').concat("This app needs access to your browser data",'</h1>\n                  </div>\n                  <div class="Polaris-Card__Section">\n                    <p>').concat("Your browser is blocking this app from accessing your data. To continue using this app, click Continue, then click Allow if the browser prompts you.",'</p>\n                  </div>\n                </div>\n              </div>\n              <div class="Polaris-Stack__Item">\n                <div class="Polaris-Stack Polaris-Stack--distributionTrailing">\n                  <div class="Polaris-Stack__Item">\n                    <button type="button" class="Polaris-Button Polaris-Button--primary" id="TriggerAllowCookiesPrompt">\n                      <span class="Polaris-Button__Content"><span>').concat("Continue","</span></span>\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </main>\n</body>\n</html>")):r.writeHead(400).end(w.ShopParamMissing)}}function z(e,t){return function(r,n){var o=r.headers.host,s=r.query,i=s.shop,a=m.a.stringify(s);n.writeHead(200,{"Content-Type":"text/html"}).end(function(e){var t=e.origin,r=e.redirectTo,n=e.apiKey;return'\n    <script src="https://unpkg.com/@shopify/app-bridge@^1"><\/script> <script type="text/javascript">\n      document.addEventListener(\'DOMContentLoaded\', function() {\n        if (window.top === window.self) {\n          // If the current window is the \'parent\', change the URL by setting location.href\n          window.location.href = "'.concat(r,"\";\n        } else {\n          // If the current window is the 'child', change the parent's URL with postMessage\n          var AppBridge = window['app-bridge'];\n          var createApp = AppBridge.default;\n          var Redirect = AppBridge.actions.Redirect;\n          var app = createApp({\n            apiKey: \"").concat(n,'",\n            shopOrigin: "').concat(encodeURI(t),'",\n          });\n          var redirect = Redirect.create(app);\n          redirect.dispatch(Redirect.Action.REMOTE, "').concat(r,'");\n        }\n      });\n    <\/script>\n  ')}({origin:i,redirectTo:"https://".concat(o).concat(t,"?").concat(a),apiKey:e}))}}function B(e,t){var r=z(e,t);return function(e,t){I(e,t),r(e,t)}}var F={accessScope:{list:[]},apiPermission:{delete:[]},applicationCharge:{activate:["id","_params"],create:["createApplicationCharge"],get:["id","_params"],list:["_params"]},applicationCredit:{create:["createApplicationCredit"],get:["id","_params"],list:["_params"]},article:{authors:[],count:["blogId","_params"],create:["blogId","createArticle"],delete:["blogId","id"],get:["blogId","id","_params"],list:["blogId","_params"],tags:["blogId","_params"],update:["blogId","id","updateArticle"]},asset:{create:["themeId","params"],delete:["themeId","params"],get:["themeId","_params"],list:["themeId","_params"],update:["themeId","updateAsset"]},balance:{list:[],transactions:[]},blog:{count:[],create:["createBlog"],delete:["id"],get:["id","_params"],list:["_params"],update:["id","params"]},cancellationRequest:{create:["fulfillmentOrderId","_message"],accept:["fulfillmentOrderId","_message"],reject:["fulfillmentOrderId","_message"]},carrierService:{create:["createCarrierService"],delete:["id"],get:["id"],list:[],update:["id","updateCarrierService"]},checkout:{complete:["token"],count:["_params"],create:["_params"],get:["token"],list:["_params"],shippingRates:["token"],update:["token","params"]},collect:{count:["_params"],create:["createCollect"],delete:["id"],get:["id","_params"],list:["_params"]},collection:{get:["id","_params"],products:["id","_params"]},collectionListing:{get:["id","_params"],list:["_params"],productIds:["id","_params"]},comment:{approve:["id"],count:["_params"],create:["createComment"],get:["id","_params"],list:["_params"],notSpam:["id"],remove:["id"],restore:["id"],spam:["id"],update:["id","updateComment"]},country:{count:[],create:["createCountry"],delete:["id"],get:["id","_params"],list:["_params"],update:["id","updateCountry"]},currency:{list:[]},customCollection:{count:["_params"],create:["params"],delete:["id"],get:["id","_params"],list:["_params"],update:["id","params"]},customer:{accountActivationUrl:["id"],count:["_params"],create:["params"],delete:["id"],get:["id","_params"],list:["_params"],search:["params"],update:["id","params"],orders:["id","_params"]},customerAddress:{create:["customerId","params"],default:["customerId","id"],delete:["customerId","id"],get:["customerId","id"],list:["customerId","_params"],set:["customerId","params"],update:["customerId","id","params"]},customerSavedSearch:{count:["_params"],create:["params"],customers:["id","_params"],delete:["id"],get:["id","_params"],list:["_params"],update:["id","params"]},discountCode:{create:["priceRuleId","params"],delete:["priceRuleId","id"],get:["priceRuleId","id"],list:["priceRuleId","_params"],lookup:["params"],update:["priceRuleId","id","_params"]},discountCodeCreationJob:{create:["priceRuleId","params"],discountCodes:["priceRuleId","id"],get:["priceRuleId","id"]},dispute:{get:["id"],list:["_params"]},draftOrder:{complete:["id","_params"],count:[],create:["params"],delete:["id"],get:["id"],list:["_params"],sendInvoice:["id","_params"],update:["id","_params"]},event:{count:["_params"],get:["id","_params"],list:["_params"]},fulfillment:{cancel:["orderId","id"],complete:["orderId","id"],count:["orderId","_params"],create:["orderId","params"],createV2:["params"],get:["orderId","id","_params"],list:["orderId","_params"],open:["orderId","id"],update:["orderId","id","params"],updateTracking:["id","params"]},fulfillmentEvent:{create:["orderId","fulfillmentId","params"],delete:["orderId","fulfillmentId","id"],get:["orderId","fulfillmentId","id"],list:["orderId","fulfillmentId","_params"],update:["orderId","fulfillmentId","id","params"]},fulfillmentOrder:{cancel:["id","fulfillmentOrder"],close:["id","_message"],get:["id"],list:["_params"],locationsForMove:["id"],move:["id","locationId"]},fulfillmentRequest:{accept:["fulfillmentOrderId","_message"],create:["fulfillmentOrderId","createFulfillmentRequest"],reject:["fulfillmentOrderId","_message"]},fulfillmentService:{create:["params"],delete:["id"],get:["id"],list:["_params"],update:["id","params"]},giftCard:{count:["_params"],create:["params"],disable:["id"],get:["id"],list:["_params"],search:["params"],update:["id","params"]},giftCardAdjustment:{create:["giftCardId","params"],get:["giftCardId","id"],list:["giftCardId"]},graphql:["data","_variables"],inventoryItem:{get:["id"],list:["_params"],update:["id","params"]},inventoryLevel:{adjust:["params"],connect:["params"],delete:["params"],list:["params"],set:["params"]},location:{count:[],get:["id"],inventoryLevels:["id","_params"],list:[]},marketingEvent:{count:["_params"],create:["params"],delete:["id"],get:["id","_params"],list:["_params"],update:["id","params"],engagements:["id","params"]},metafield:{count:["_params"],create:["params"],delete:["id"],get:["id","_params"],list:["_params"],update:["id","params"]},order:{cancel:["id","_params"],close:["id"],count:["_params"],create:["params"],delete:["id"],fulfillmentOrders:["id"],get:["id","_params"],list:["_params"],open:["id"],update:["id","params"]},orderRisk:{create:["orderId","params"],delete:["orderId","id"],get:["orderId","id"],list:["orderId"],update:["orderId","id","params"]},page:{count:["_params"],create:["params"],delete:["id"],get:["id","_params"],list:["_params"],update:["id","params"]},payment:{count:["checkoutToken"],create:["checkoutToken","params"],get:["checkoutToken","id"],list:["_checkoutToken"]},payout:{get:["id"],list:["_params"]},policy:{list:["_params"]},priceRule:{create:["params"],delete:["id"],get:["id","_params"],list:["_params"],update:["id","params"]},product:{count:["_params"],create:["params"],delete:["id"],get:["id","_params"],list:["_params"],update:["id","params"]},productImage:{count:["productId","_params"],create:["productId","params"],delete:["productId","id"],get:["productId","id","_params"],list:["productId","_params"],update:["productId","id","params"]},productListing:{count:[],create:["productId","params"],delete:["productId"],get:["productId"],list:["_params"],productIds:["_params"]},productResourceFeedback:{create:["productId","params"],list:["productId","_params"]},productVariant:{count:["productId"],create:["productId","params"],delete:["productId","id"],get:["id","_params"],list:["productId","_params"],update:["id","params"]},province:{count:["countryId","_params"],get:["countryId","id","_params"],list:["countryId","_params"],update:["countryId","id","params"]},recurringApplicationCharge:{activate:["id","params"],create:["createRecurringApplicationCharge"],delete:["id"],get:["id","_params"],list:["_params"],customize:["id","params"]},redirect:{count:["_params"],create:["createRedirect"],delete:["id"],get:["id","_params"],list:["_params"],update:["id","updateRedirect"]},refund:{calculate:["orderId","params"],create:["orderId","params"],get:["orderId","id","_params"],list:["orderId","_params"]},report:{create:["params"],delete:["id"],get:["id","_params"],list:["_params"],update:["id","params"]},resourceFeedback:{create:["params"],list:[]},scriptTag:{count:["_params"],create:["createScriptTag"],delete:["id"],get:["id","_params"],list:["_params"],update:["id","updateScriptTag"]},shippingZone:{list:["_params"]},shop:{get:["_params"]},smartCollection:{count:["_params"],create:["params"],delete:["id"],get:["id","_params"],list:["_params"],order:["id","params"],products:["id","params"],update:["id","params"]},storefrontAccessToken:{create:["params"],delete:["id"],list:[]},tenderTransaction:{list:["_params"]},theme:{create:["params"],delete:["id"],get:["id","params"],list:["_params"],update:["id","params"]},transaction:{count:["orderId"],create:["orderId","params"],get:["orderId","id","_params"],list:["orderId","_params"]},usageCharge:{create:["recurringApplicationChargeId","createUsageCharge"],get:["recurringApplicationChargeId","id","_params"],list:["recurringApplicationChargeId","_params"]},user:{current:[],get:["id"],list:[]},webhook:{count:["_params"],create:["createWebhook"],delete:["id"],get:["id","_params"],list:["_params"],update:["id","updateWebhook"]}};function $(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function G(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var V={};t.default=function(e){var t=e.prepareSessionOptions,r=e.sharedSecret,n=e.apiKey,s=e.scopes,i=e.accessTokenTimeout,a=void 0===i?6e4:i,u=e.accessMode,p=void 0===u?"":u,f=e.paramsName,y=void 0===f?"fns":f,v=e.apiVersion,b=void 0===v?"2020-10":v,_=e.autoLimit,w=void 0!==_&&_,k=e.presentmentPrices,S=void 0!==k&&k,j=e.shopifyAPITimeout,P=void 0===j?6e4:j,T=e.whatToDoAfterAuth,E=void 0===T?function(e,t,r){t.redirect("/")}:T;return Object.keys(V).length>0||(V.setSessionMiddleware=function(e){var t=e.prepareSessionOptions;return function(){var e=h()(l.a.mark((function e(r,n,o){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return s=e.sent,e.next=5,Object(d.applySession)(r,n,s);case 5:return e.next=7,o();case 7:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()}({prepareSessionOptions:t}),V.enableCookiesMiddleware=function(e){var t=e.apiKey,r=e.paramsName;return function(){var e=h()(l.a.mark((function e(n,o,s){var i,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(2!==(i=n.query[r]).length||"auth"!==i[0]||"enable_cookies"!==i[1]){e.next=6;break}return a=x(t),e.next=5,a(n,o);case 5:return e.abrupt("return");case 6:return e.next=8,s();case 8:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()}({apiKey:n,paramsName:y}),V.getAuthUrlMiddleware=function(e){var t=e.sharedSecret,r=e.apiKey,n=e.scopes,o=e.accessTokenTimeout,s=e.accessMode,i=e.paramsName;return function(){var e=h()(l.a.mark((function e(a,c,u){var p,h,d,f;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==(p=a.query[i]).length||"auth"!==p[0]){e.next=18;break}if(O(a)||A(a)){e.next=7;break}return h=D(r),e.next=6,h(a,c);case 6:return e.abrupt("return");case 7:if(!C(a)){e.next=14;break}return d=N({paramsName:i,sharedSecret:t,apiKey:r,scopes:n,accessTokenTimeout:o,accessMode:s}),e.next=11,d(a,c);case 11:return e.abrupt("return");case 14:return f=B(r,"/api/auth/inline"),e.next=17,f(a,c);case 17:return e.abrupt("return");case 18:return e.next=20,u();case 20:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()}({sharedSecret:r,apiKey:n,scopes:s,accessTokenTimeout:a,accessMode:p,paramsName:y}),V.handleInlineAuthMiddleware=function(e){var t=e.sharedSecret,r=e.apiKey,n=e.scopes,o=e.accessTokenTimeout,s=e.accessMode,i=e.paramsName;return function(){var e=h()(l.a.mark((function e(a,c,u){var p,h;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(2!==(p=a.query[i]).length||"auth"!==p[0]||"inline"!==p[1]){e.next=6;break}return h=N({paramsName:i,sharedSecret:t,apiKey:r,scopes:n,accessTokenTimeout:o,accessMode:s}),e.next=5,h(a,c);case 5:return e.abrupt("return");case 6:return e.next=8,u();case 8:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()}({sharedSecret:r,apiKey:n,scopes:s,accessTokenTimeout:a,accessMode:p,paramsName:y}),V.getAccessTokenMiddleware=function(e){var t=e.sharedSecret,r=e.apiKey,n=e.scopes,o=e.accessTokenTimeout,s=e.accessMode,i=e.paramsName,a=e.apiVersion,c=e.autoLimit,u=e.presentmentPrices,p=e.shopifyAPITimeout,d=e.whatToDoAfterAuth;return function(){var e=h()(l.a.mark((function e(h,f,m){var y,g;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(2!==(y=h.query[i]).length||"auth"!==y[0]||"callback"!==y[1]){e.next=6;break}return g=L({paramsName:i,sharedSecret:t,apiKey:r,scopes:n,accessTokenTimeout:o,accessMode:s,apiVersion:a,autoLimit:c,presentmentPrices:u,shopifyAPITimeout:p,whatToDoAfterAuth:d}),e.next=5,g(h,f);case 5:return e.abrupt("return");case 6:return e.next=8,m();case 8:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()}({sharedSecret:r,apiKey:n,scopes:s,accessTokenTimeout:a,accessMode:p,paramsName:y,apiVersion:b,autoLimit:w,presentmentPrices:S,shopifyAPITimeout:P,whatToDoAfterAuth:E}),V.loginAgainIfDirrentShopMiddleware=function(){var e=h()(l.a.mark((function e(t,r,n){var o,s,i,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.query,i=t.session,a=t.url,c=null!=s?s:m.a.parse(null!==(o=a.split("?")[1])&&void 0!==o?o:""),i&&c&&c.shop&&i.shop&&i.shop!=c.shop&&(console.log("loginAgainIfDifferentShopMiddleware",t.url),t.session.destroy(),H(t,r)),e.next=5,n();case 5:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),V.verifyTokenMiddleware=function(e){var t=e.paramsName;return function(){var e=h()(l.a.mark((function e(r,n,o){var s,i,a,u,p,h,d,f,m;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=r.query&&r.query[t],i=null!=s?s:[],a=c()(i,2),u=a[0],p=a[1],!(!s||2!==s.length||u&&void 0===F[u]||u&&p&&F[u]&&void 0===F[u][p])){e.next=23;break}if(!(h=r.session)||!h.accessToken){e.next=20;break}return U(r,n),d=h.shopName,f=h.accessToken,m=new g.a({shopName:d,accessToken:f}),e.prev=8,e.next=11,m.metafield.list();case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(8),H(r,n),e.abrupt("return");case 17:return e.next=19,o();case 19:return e.abrupt("return");case 20:return q(r,n),H(r,n),e.abrupt("return");case 23:return e.next=25,o();case 25:case"end":return e.stop()}}),e,null,[[8,13]])})));return function(t,r,n){return e.apply(this,arguments)}}()}({paramsName:y}),V.handleShopifyAPIMiddleware=function(e){var t=e.paramsName,r=e.apiVersion,n=e.autoLimit,s=e.presentmentPrices,i=e.shopifyAPITimeout;return function(){var e=h()(l.a.mark((function e(a,u,p){var h,d,f,m,y,v,b,_,w,x,k,S,j,P,T;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h=a.query[t],d=c()(h,2),f=d[0],m=d[1],2!==h.length||void 0===F[f]||void 0===F[f][m]){e.next=27;break}if(!(y=a.session)||!y.accessToken){e.next=24;break}return U(a,u),b=y.shopName,_=y.accessToken,w=new g.a({shopName:b,accessToken:_,apiVersion:r,autoLimit:n,presentmentPrices:s,timeout:i}),x=a.query,k=null!==(v=a.body)&&void 0!==v?v:{},S=G(G({},x),k),j=F[f][m].map((function(e){return S[e]})),e.prev=12,e.next=15,(P=w[f])[m].apply(P,o()(j));case 15:return T=e.sent,u.writeHead(200,{"Content-Type":"application/json"}).end(JSON.stringify(T)),e.abrupt("return");case 20:return e.prev=20,e.t0=e.catch(12),H(a,u),e.abrupt("return");case 24:return q(a,u),H(a,u),e.abrupt("return");case 27:return e.next=29,p();case 29:case"end":return e.stop()}}),e,null,[[12,20]])})));return function(t,r,n){return e.apply(this,arguments)}}()}({paramsName:y,apiVersion:b,autoLimit:w,presentmentPrices:S,shopifyAPITimeout:P}),V.verifyAPIRoutesMiddleware=function(e){var t=e.paramsName;return function(){var e=h()(l.a.mark((function e(r,n,o){var s,i,a,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=r.query[t],i=c()(s,2),a=i[0],u=i[1],!(1===s.length&&"auth"===s[0]||2===s.length&&"auth"===s[0]&&"callback"===s[1]||2===s.length&&void 0!==F[a]&&void 0!==F[a][u])){e.next=9;break}if(!r.redirectPath){e.next=7;break}return e.next=6,o();case 6:return e.abrupt("return");case 7:e.next=11;break;case 9:return n.writeHead(400).end("Route API not found"),e.abrupt("return");case 11:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()}({paramsName:y})),V}},function(e,t,r){"use strict";r.r(t),r.d(t,"nanoid",(function(){return p})),r.d(t,"customAlphabet",(function(){return l})),r.d(t,"customRandom",(function(){return u})),r.d(t,"urlAlphabet",(function(){return s})),r.d(t,"random",(function(){return c}));var n=r(43),o=r.n(n);let s="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW";let i,a,c=e=>{!i||i.length<e?(i=Buffer.allocUnsafe(32*e),o.a.randomFillSync(i),a=0):a+e>i.length&&(o.a.randomFillSync(i),a=0);let t=i.subarray(a,a+e);return a+=e,t},u=(e,t,r)=>{let n=(2<<31-Math.clz32(e.length-1|1))-1,o=Math.ceil(1.6*n*t/e.length);return()=>{let s="";for(;;){let i=r(o),a=o;for(;a--;)if(s+=e[i[a]&n]||"",s.length===t)return s}}},l=(e,t)=>u(e,t,c),p=(e=21)=>{let t=c(e),r="";for(;e--;)r+=s[63&t[e]];return r}}])}));